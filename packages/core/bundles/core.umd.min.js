!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("reflect-metadata")):"function"==typeof define&&define.amd?define(["reflect-metadata"],e):(t.core=t.core||{},t.core.umd=t.core.umd||{},t.core.umd.js=e(t.Reflect))}(this,function(t){"use strict";function e(){throw new Error("Dynamic requires are not currently supported by rollup-plugin-commonjs")}function r(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function n(t,e){return e={exports:{}},t(e,e.exports),e.exports}t=t&&t.hasOwnProperty("default")?t.default:t;var o="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};Object.defineProperty(exports,"__esModule",{value:!0});var a=o&&o.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),i=(o&&o.__decorate,o&&o.__metadata,o&&o.__param,n(function(t,e){!function(t){t.design="design",t.runtime="runtime"}(e.IocState||(e.IocState={}));!function(t){t[t.route=1]="route",t[t.children=2]="children",t[t.traverse=3]="traverse",t[t.traverseLast=4]="traverseLast"}(e.Mode||(e.Mode={}))}));r(i);var s=n(function(t,e){function r(t){return!!t&&"function"==typeof t}function n(t){if(!r(t))return!1;if(t.prototype){if(!t.name||"Object"===t.name)return!1;if(Reflect.hasOwnMetadata("@Abstract",t))return!1;var e=t;if(/^[a-z]$/.test(e.name))return!(!e.classAnnations||!e.classAnnations.name);if(e.classAnnations&&s(e.classAnnations.name))return!0;if(!/^[A-Z@]/.test(t.name))return!1;if(!o()&&/MSIE [6-9]/.test(navigator.userAgent))return!0;try{return t.arguments&&t.caller,!1}catch(t){return!0}}return!1}function o(){return"undefined"!=typeof process&&void 0!==process.versions.node}function a(t){return!!t&&!!(s(t)||u(t)||n(t)||c(t)&&t instanceof f.Registration)}function i(t,e,r){return!!t&&(!a(t)&&(!(t instanceof RegExp||t instanceof Date)&&((!t.constructor||"Object"===t.constructor.name)&&(e=e||["type"],r&&(e=r.concat(e)),Object.keys(t).some(function(t){return e.indexOf(t)>0})))))}function s(t){return"string"==typeof t}function c(t){var e=typeof t;return null!=t&&("object"===e||"function"===e)}function u(t){return"symbol"==typeof t||c(t)&&/^Symbol\(/.test(t.toString())}e.isFunction=r,e.isAbstractDecoratorClass=function(t){return!!r(t)&&!!Reflect.hasOwnMetadata("@Abstract",t)},e.getClassName=function(t){return r(t)?/^[a-z]$/.test(t.name)&&t.classAnnations?t.classAnnations.name:t.name:""},e.isClass=n,e.isNodejsEnv=o,e.isToken=a,e.isPromise=function(t){return!!t&&!(!r(t.then)||!r(t.catch))},e.isObservable=function(t){return!(!t&&!c(t)||!r(t.subscribe)||!r(t.toPromise))},e.isBaseObject=function(t){return!!t&&!(!t.constructor||"Object"!==t.constructor.name)},e.isMetadataObject=i,e.isClassMetadata=function(t,e){return i(t,["singleton","provide","alias","type"],e)},e.isParamMetadata=function(t,e){return i(t,["type","provider","index"],e)},e.isParamPropMetadata=function(t,e){return i(t,["type","provider","index"],e)},e.isPropertyMetadata=function(t,e){return i(t,["type","provider"],e)},e.isString=s,e.isBoolean=function(t){return"boolean"==typeof t||!0===t||!1===t},e.isNumber=function(t){return"number"==typeof t},e.isUndefined=function(t){return void 0===t||void 0===t},e.isNull=function(t){return null===t},e.isArray=function(t){return Array.isArray(t)},e.isObject=c,e.isDate=function(t){return c(t)&&t instanceof Date},e.isSymbol=u,e.isRegExp=function(t){return t&&t instanceof RegExp}});r(s);var c=n(function(t,e){var r=function(){function t(){this.valueMap={},this.keyMap={}}return t.prototype.clear=function(){this.valueMap={},this.keyMap={}},t.prototype.getTypeKey=function(t){return s.isString(t)?t:s.isFunction(t)?t.name:t.toString()},t.prototype.delete=function(t){var e=this.getTypeKey(t).toString();try{return delete this.keyMap[e],delete this.valueMap[e],!0}catch(t){return!1}},t.prototype.forEach=function(t,e){var r=this;Object.keys(this.keyMap).forEach(function(e){t(r.valueMap[e],r.keyMap[e],r)})},t.prototype.get=function(t){var e=this.getTypeKey(t);return this.valueMap[e]},t.prototype.has=function(t){var e=this.getTypeKey(t);return!s.isUndefined(this.keyMap[e])},t.prototype.set=function(t,e){var r=this.getTypeKey(t);return this.keyMap[r]=t,this.valueMap[r]=e,this},Object.defineProperty(t.prototype,"size",{get:function(){return Object.keys(this.keyMap).length},enumerable:!0,configurable:!0}),t.classAnnations={name:"ObjectMapSet",params:{constructor:[],clear:[],getTypeKey:["key"],delete:["key"],forEach:["callbackfn","thisArg"],get:["key"],has:["key"],set:["key","value"]}},t}();e.ObjectMapSet=r;var n=function(){function t(){this.map=s.isClass(Map)?new Map:new r}return t.prototype.clear=function(){this.map.clear()},t.prototype.delete=function(t){return this.map.delete(t)},t.prototype.forEach=function(t,e){this.map.forEach(t,e)},t.prototype.get=function(t){return this.map.get(t)},t.prototype.has=function(t){return this.map.has(t)},t.prototype.set=function(t,e){return this.map.set(t,e),this},Object.defineProperty(t.prototype,"size",{get:function(){return this.map.size},enumerable:!0,configurable:!0}),t.classAnnations={name:"MapSet",params:{constructor:[],clear:[],delete:["key"],forEach:["callbackfn","thisArg"],get:["key"],has:["key"],set:["key","value"]}},t}();e.MapSet=n});r(c);var u=n(function(t,e){e.symbols={IContainer:Symbol("IContainer"),LifeScope:Symbol("LifeScope"),IProviderMatcher:Symbol("IProviderMatcher"),IMethodAccessor:Symbol("IMethodAccessor"),ICacheManager:Symbol("ICacheManager"),IContainerBuilder:Symbol("IContainerBuilder"),IRecognizer:Symbol("IRecognizer")}});r(u);var p=n(function(t,e){function r(t){for(var r in t)e.hasOwnProperty(r)||(e[r]=t[r])}r(s),r(c),r(u)});r(p);var f=n(function(t,e){var r=function(){function t(t,e){this.classType=t,this.desc=e,this.type="Registration"}return t.prototype.getClass=function(){return p.isClass(this.classType)?this.classType:null},t.prototype.getDesc=function(){return this.desc},t.prototype.toString=function(){var t="";return t=p.isFunction(this.classType)?p.getClassName(this.classType):this.classType.toString(),this.type+" "+t+" "+this.desc},t.classAnnations={name:"Registration",params:{constructor:["classType","desc"],getClass:[],getDesc:[],toString:[]}},t}();e.Registration=r});r(f);var l=n(function(t,e){var r=function(){function t(t){this.args=t,this.idx=-1,this.metadata=null}return t.prototype.isCompeted=function(){return this.idx>=this.args.length},t.prototype.end=function(){this.idx=this.args.length},t.prototype.next=function(t){if(this.isCompeted())return null;if(this.idx++,this.isCompeted())return null;var e=this.args[this.idx];t.isMetadata&&t.isMetadata(e)?(this.metadata=e,this.end()):t.match(e)?(this.metadata=this.metadata||{},t.setMetadata(this.metadata,e)):this.end()},t.prototype.getArgs=function(){return this.args},t.prototype.getMetadata=function(){return this.metadata},t.classAnnations={name:"ArgsIterator",params:{constructor:["args"],isCompeted:[],end:[],next:["express"],getArgs:[],getMetadata:[]}},t}();e.ArgsIterator=r});r(l);var h=n(function(t,e){!function(t){t[t.Class=1]="Class",t[t.Parameter=2]="Parameter",t[t.Property=4]="Property",t[t.Method=8]="Method",t[t.All=13]="All"}(e.DecoratorType||(e.DecoratorType={}))});r(h);var d=n(function(t,e){function r(t,e,r){var o="@"+t,a=function(){for(var a=[],i=0;i<arguments.length;i++)a[i]=arguments[i];var s=null;return a.length<1?function(){for(var e=[],a=0;a<arguments.length;a++)e[a]=arguments[a];return n(t,o,e,s,r)}:(s=function(t,e){var r=null;if(t.length)if(1===t.length&&p.isMetadataObject(t[0]))r=t[0];else if(e){var n=new l.ArgsIterator(t);e(n),r=n.getMetadata()}return r}(a,e))?function(){for(var e=[],a=0;a<arguments.length;a++)e[a]=arguments[a];return n(t,o,e,s,r)}:1!==a.length||p.isClass(a[0])?n(t,o,a,s,r):function(){for(var e=[],a=0;a<arguments.length;a++)e[a]=arguments[a];return n(t,o,e,s,r)}};return a.toString=function(){return o},a.decoratorType=h.DecoratorType.All,a}function n(t,e,r,n,i){var s;switch(r.length){case 1:if(s=r[0],p.isClass(s)||p.isAbstractDecoratorClass(s))return function(t,e,r,n,a){var i=o(e,r).slice(0),s=n||{};s.type||(s.type=r);s.decorator=t,a&&(s=a(s));i.unshift(s),d(r),Reflect.defineMetadata(e,i,r)}(t,e,s,n,i),s;break;case 2:c(t,e,s=r[0],r[1],n,i);break;case 3:if(p.isNumber(r[2])){!function(t,e,r,n,o,a,i){var s=u(e,r,n).slice(0);for(;s.length<=o;)s.push(null);s[o]=s[o]||[];var c=a||{};if(!c.type){var p=Reflect.getOwnMetadata("design:type",r,n);p||(p=Reflect.getOwnMetadata("design:type",r.constructor,n)),c.type=p}c.propertyKey=n,c.decorator=t,c.index=o,i&&(c=i(c));s[o].unshift(c),Reflect.defineMetadata(e+m,s,r,n)}(t,e,s=r[0],r[1],r[2],n,i)}else{if(!p.isUndefined(r[2])){s=r[0];var f=r[1],l=r[2];return function(t,e,r,n,o,i,s){var c=Object.assign({},a(e,r));c[n]=c[n]||[];var u=i||{};u.decorator=t,u.propertyKey=n,s&&(u=s(u));c[n].unshift(u),Reflect.defineMetadata(e+g,c,r.constructor)}(t,e,s,f,0,n,i),l}c(t,e,s=r[0],r[1],n,i)}break;default:throw new Error("Invalid @"+t+" Decorator declaration.")}}function o(t,e){var r=Reflect.getOwnMetadata(p.isFunction(t)?t.toString():t,e);return r=p.isArray(r)?r:[]}function a(t,e){var r=p.isFunction(t)?t.toString():t,n=Reflect.getMetadata(r+g,e);return(!n||p.isArray(n)||Object.keys(n).length<0)&&(n=Reflect.getMetadata(r+g,e.constructor)),p.isArray(n)?{}:n||{}}function i(t,e){var r=p.isFunction(t)?t.toString():t,n=Reflect.getOwnMetadata(r+g,e);return(!n||p.isArray(n)||Object.keys(n).length<0)&&(n=Reflect.getOwnMetadata(r+g,e.constructor)),p.isArray(n)?{}:n||{}}function s(t,e){var r=p.isFunction(t)?t.toString():t,n=Reflect.getMetadata(r+v,e);return(!n||p.isArray(n)||Object.keys(n).length<0)&&(n=Reflect.getMetadata(r+v,e.constructor)),p.isArray(n)?{}:n||{}}function c(t,e,r,n,o,a){var i=Object.assign({},s(e,r)),c=o||{};if(c.propertyKey=n,c.decorator=t,!c.type){var u=Reflect.getMetadata("design:type",r,n);u||(u=Reflect.getMetadata("design:type",r.constructor,n)),c.type=u}a&&(c=a(c)),i[n]&&p.isArray(i[n])||(i[n]=[]),i[n].unshift(c),Reflect.defineMetadata(e+v,i,r.constructor)}function u(t,e,r){var n=p.isFunction(t)?t.toString():t,o=Reflect.getOwnMetadata(n+m,e,r);return o=p.isArray(o)?o:[]}function f(t){var r=Reflect.getMetadata(e.ParamerterName,t);return(!r||p.isArray(r)||Object.keys(r).length<0)&&(r=Reflect.getMetadata(e.ParamerterName,t.constructor)),p.isArray(r)?{}:r||{}}function d(t){var r=Object.assign({},f(t)),n=Object.getOwnPropertyDescriptors(t.prototype),o=/^[a-z]/.test(t.name),a="";t.classAnnations&&t.classAnnations.params&&(a=t.classAnnations.name,r=Object.assign(r,t.classAnnations.params)),o||t.name===a||(Object.keys(n).forEach(function(t){"constructor"!==t&&(n[t].value&&(r[t]=y(n[t].value)),n[t].set&&(r[t]=y(n[t].set)))}),r.constructor=y(t.prototype.constructor)),Reflect.defineMetadata(e.ParamerterName,r,t)}function y(t){if(!p.isFunction(t))return[];var e=t.toString().replace(A,""),r=e.slice(e.indexOf("(")+1,e.indexOf(")")).match(M);return null===r&&(r=[]),r}e.ParamerterName="paramerter_names",e.createDecorator=r,e.getTypeMetadata=function(t,e){var r=Reflect.getOwnMetadata(p.isFunction(t)?t.toString():t,e);return r=p.isArray(r)?r:[]},e.getOwnTypeMetadata=o,e.hasClassMetadata=function(t,e){var r=p.isFunction(t)?t.toString():t;return Reflect.hasMetadata(r,e)},e.hasOwnClassMetadata=function(t,e){var r=p.isFunction(t)?t.toString():t;return Reflect.hasOwnMetadata(r,e)};var g="__method";e.getMethodMetadata=a,e.getOwnMethodMetadata=i,e.hasOwnMethodMetadata=function(t,e,r){var n=p.isFunction(t)?t.toString():t;if(r){var o=i(n,e);return o&&o.hasOwnProperty(r)}return Reflect.hasOwnMetadata(n+g,e)},e.hasMethodMetadata=function(t,e,r){var n=p.isFunction(t)?t.toString():t;if(r){var o=a(n,e);return o&&o.hasOwnProperty(r)}return Reflect.hasMetadata(n+g,e)};var v="__props";e.getPropertyMetadata=s,e.getOwnPropertyMetadata=function(t,e){var r=p.isFunction(t)?t.toString():t,n=Reflect.getOwnMetadata(r+v,e);return(!n||p.isArray(n)||Object.keys(n).length<0)&&(n=Reflect.getOwnMetadata(r+v,e.constructor)),p.isArray(n)?{}:n||{}},e.hasPropertyMetadata=function(t,e,r){var n=p.isFunction(t)?t.toString():t;if(r){var o=s(n,e);return o&&o.hasOwnProperty(r)}return Reflect.hasMetadata(n+v,e)};var m="__params";e.getParamMetadata=function(t,e,r){var n=p.isFunction(t)?t.toString():t,o=Reflect.getMetadata(n+m,e,r);return o=p.isArray(o)?o:[]},e.getOwnParamMetadata=u,e.hasParamMetadata=function(t,e,r){var n=p.isFunction(t)?t.toString():t;return Reflect.hasMetadata(n+m,e,r)},e.hasOwnParamMetadata=function(t,e,r){var n=p.isFunction(t)?t.toString():t;return Reflect.hasOwnMetadata(n+m,e,r)},e.getParamerterNames=f,e.getOwnParamerterNames=function(t){var r=Reflect.getOwnMetadata(e.ParamerterName,t);return(!r||p.isArray(r)||Object.keys(r).length<0)&&(r=Reflect.getOwnMetadata(e.ParamerterName,t.constructor)),p.isArray(r)?{}:r||{}},e.setParamerterNames=d;var A=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,M=/([^\s,]+)/g});r(d);var y=n(function(t,e){e.createClassDecorator=function(t,e,r){var n=d.createDecorator(t,function(t){e&&e(t),t.next({isMetadata:function(t){return p.isClassMetadata(t)},match:function(t){return t&&(p.isSymbol(t)||p.isString(t)||p.isObject(t)&&t instanceof f.Registration)},setMetadata:function(t,e){t.provide=e}}),t.next({match:function(t){return p.isString(t)},setMetadata:function(t,e){t.alias=e}}),t.next({match:function(t){return p.isBoolean(t)},setMetadata:function(t,e){t.singleton=e}}),t.next({match:function(t){return p.isNumber(t)},setMetadata:function(t,e){t.expires=e}})},r);return n.decoratorType=h.DecoratorType.Class,n}});r(y);var g=n(function(t,e){e.createMethodDecorator=function(t,e,r){var n=d.createDecorator(t,function(t){e&&e(t),t.next({match:function(t){return p.isArray(t)},setMetadata:function(t,e){t.providers=e}})},r);return n.decoratorType=h.DecoratorType.Method,n}});r(g);var v=n(function(t,e){e.createParamDecorator=function(t,e,r){var n=d.createDecorator(t,function(t){e&&e(t),t.next({isMetadata:function(t){return p.isParamMetadata(t)},match:function(t){return p.isToken(t)},setMetadata:function(t,e){t.provider=e}})},r);return n.decoratorType=h.DecoratorType.Parameter,n}});r(v);var m=n(function(t,e){e.createPropDecorator=function(t,e,r){var n=d.createDecorator(t,function(t){e&&e(t),t.next({isMetadata:function(t){return p.isPropertyMetadata(t)},match:function(t){return p.isToken(t)},setMetadata:function(t,e){t.provider=e}})},r);return n.decoratorType=h.DecoratorType.Property,n}});r(m);var A=n(function(t,e){e.createParamPropDecorator=function(t,e,r){var n=d.createDecorator(t,function(t){e&&e(t),t.next({isMetadata:function(t){return p.isParamPropMetadata(t)},match:function(t){return p.isToken(t)},setMetadata:function(t,e){t.provider=e}})},r);return n.decoratorType=h.DecoratorType.Property|h.DecoratorType.Parameter,n}});r(A);var M=n(function(t,e){e.createClassMethodDecorator=function(t,e,r){var n=d.createDecorator(t,e,r);return n.decoratorType=h.DecoratorType.Class|h.DecoratorType.Method,n}});r(M);var P=n(function(t,e){e.createMethodPropDecorator=function(t,e,r){var n=d.createDecorator(t,e,r);return n.decoratorType=h.DecoratorType.Method|h.DecoratorType.Property,n}});r(P);var C=n(function(t,e){e.createMethodPropParamDecorator=function(t,e,r){var n=d.createDecorator(t,e,r);return n.decoratorType=h.DecoratorType.Method|h.DecoratorType.Property|h.DecoratorType.Parameter,n}});r(C);var b=n(function(t,e){function r(t){for(var r in t)e.hasOwnProperty(r)||(e[r]=t[r])}r(l),r(h),r(d),r(y),r(g),r(v),r(m),r(A),r(M),r(P),r(C)});r(b);var T=n(function(t,e){e.Component=b.createClassDecorator("Component")});r(T);var k=n(function(t,e){e.Injectable=b.createClassDecorator("Injectable")});r(k);var w=n(function(t,e){e.Inject=b.createParamPropDecorator("Inject")});r(w);var D=n(function(t,e){e.AutoWired=b.createParamPropDecorator("AutoWired")});r(D);var x=n(function(t,e){e.Param=b.createParamDecorator("Param")});r(x);var S=n(function(t,e){e.Method=b.createMethodDecorator("Method")});r(S);var I=n(function(t,e){e.Singleton=b.createClassDecorator("Singleton",null,function(t){return t.singleton=!0,t})});r(I);var O=n(function(t,e){e.Abstract=b.createClassDecorator("Abstract")});r(O);var R=n(function(t,e){e.Autorun=b.createClassMethodDecorator("Autorun",function(t){t.next({isMetadata:function(t){return p.isClassMetadata(t,["autorun"])},match:function(t){return p.isString(t)},setMetadata:function(t,e){t.autorun=e}})})});r(R);var N=n(function(t,e){e.IocModule=b.createClassDecorator("IocModule",function(t){t.next({isMetadata:function(t){return p.isClassMetadata(t,["autorun"])},match:function(t){return p.isString(t)},setMetadata:function(t,e){t.autorun=e}})})});r(N);var E=n(function(t,e){function r(t){for(var r in t)e.hasOwnProperty(r)||(e[r]=t[r])}r(T),r(k),r(w),r(D),r(x),r(S),r(I),r(O),r(R),r(N)});r(E);var j=n(function(t,e){var r=function(){function t(){}return t.prototype.isEmpty=function(){return!0},t.prototype.add=function(t){return this},t.prototype.remove=function(t){return this},t.prototype.find=function(t,r){return e.NullNode},t.prototype.filter=function(t,e){return[]},t.prototype.each=function(t,e){},t.prototype.trans=function(t){},t.prototype.transAfter=function(t){},t.prototype.routeUp=function(t){},t.prototype.equals=function(t){return t===e.NullNode},t.prototype.empty=function(){return e.NullNode},t.classAnnations={name:"NullComponent",params:{isEmpty:[],add:["action"],remove:["action"],find:["express","mode"],filter:["express","mode"],each:["express","mode"],trans:["express"],transAfter:["express"],routeUp:["express"],equals:["node"],empty:[]}},t}();e.NullComponent=r,e.NullNode=new r});r(j);var F=n(function(t,e){var r=function(){function t(t){this.name=t,this.children=[]}return t.prototype.add=function(t){return t.parent=this,this.children.push(t),this},t.prototype.remove=function(t){var e;return(e=p.isString(t)?this.find(function(e){return p.isString(t)?e.name===t:e.equals(t)}):t||this).parent?this.equals(e.parent)?(this.children.splice(this.children.indexOf(e),1),e.parent=null,this):(e.parent.remove(e),this):this},t.prototype.find=function(t,e){var r;return this.each(function(e){if(r)return!1;return!(p.isFunction(t)?t(e):t===e)||(r=e,!1)},e),r||this.empty()},t.prototype.filter=function(t,e){var r=[];return this.each(function(e){t(e)&&r.push(e)},e),r},t.prototype.each=function(t,e){var r;switch(e=e||i.Mode.traverse){case i.Mode.route:r=this.routeUp(t);break;case i.Mode.children:r=this.eachChildren(t);break;case i.Mode.traverse:r=this.trans(t);break;case i.Mode.traverseLast:r=this.transAfter(t);break;default:r=this.trans(t)}return r},t.prototype.eachChildren=function(t){(this.children||[]).forEach(function(e){return t(e)})},t.prototype.routeUp=function(t){return!1!==t(this)&&(this.parent&&this.parent.routeUp?this.parent.routeUp(t):void 0)},t.prototype.trans=function(t){if(!1===t(this))return!1;for(var e=this.children||[],r=0;r<e.length;r++){var n=e[r].trans(t);if(!1===n)return n}return!0},t.prototype.transAfter=function(t){for(var e=this.children||[],r=0;r<e.length;r++){if(!1===e[r].transAfter(t))return!1}return!1!==t(this)},t.prototype.equals=function(t){return this===t},t.prototype.empty=function(){return j.NullNode},t.prototype.isEmpty=function(){return this.equals(this.empty())},t.classAnnations={name:"Composite",params:{constructor:["name"],add:["node"],remove:["node"],find:["express","mode"],filter:["express","mode"],each:["express","mode"],eachChildren:["express"],routeUp:["express"],trans:["express"],transAfter:["express"],equals:["node"],empty:[],isEmpty:[]}},t}();e.Composite=r});r(F);var L=n(function(t,e){var r=function(){function t(t){this.name=t,this.children=[]}return t.prototype.add=function(t){return t.parent=this,this.children.push(t),this},t.prototype.remove=function(t){var e;return(e=p.isString(t)?this.find(function(e){return p.isString(t)?e.name===t:e.equals(t)}):t||this).parent?this.equals(e.parent)?(this.children.splice(this.children.indexOf(e),1),e.parent=null,this):(e.parent.remove(e),null):this},t.prototype.find=function(t,e){var r;return this.each(function(e){if(r)return!1;return!(p.isFunction(t)?t(e):t===e)||(r=e,!1)},e),r||this.empty()},t.prototype.filter=function(t,e){var r=[];return this.each(function(e){t(e)&&r.push(e)},e),r},t.prototype.each=function(t,e){var r;switch(e=e||i.Mode.traverse){case i.Mode.route:r=this.routeUp(t);break;case i.Mode.children:r=this.eachChildren(t);break;case i.Mode.traverse:r=this.trans(t);break;case i.Mode.traverseLast:r=this.transAfter(t);break;default:r=this.trans(t)}return r},t.prototype.eachChildren=function(t){(this.children||[]).forEach(function(e){return t(e)})},t.prototype.routeUp=function(t){return!1!==t(this)&&(this.parent&&this.parent.routeUp?this.parent.routeUp(t):void 0)},t.prototype.trans=function(t){if(!1===t(this))return!1;for(var e=this.children||[],r=0;r<e.length;r++){var n=e[r].trans(t);if(!1===n)return n}return!0},t.prototype.transAfter=function(t){for(var e=this.children||[],r=0;r<e.length;r++){if(!1===e[r].transAfter(t))return!1}return!1!==t(this)},t.prototype.equals=function(t){return this===t},t.prototype.empty=function(){return j.NullNode},t.prototype.isEmpty=function(){return this.equals(this.empty())},t.classAnnations={name:"GComposite",params:{constructor:["name"],add:["node"],remove:["node"],find:["express","mode"],filter:["express","mode"],each:["iterate","mode"],eachChildren:["iterate"],routeUp:["iterate"],trans:["express"],transAfter:["express"],equals:["node"],empty:[],isEmpty:[]}},t}();e.GComposite=r});r(L);var K=n(function(t,e){function r(t){for(var r in t)e.hasOwnProperty(r)||(e[r]=t[r])}r(F),r(L),r(j)});r(K);var B=n(function(t,e){var r=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return a(r,t),r.prototype.insert=function(t,e){return this},r.prototype.execute=function(t,e,r){},r.prototype.empty=function(){return e.NullAction},r.classAnnations={name:"NullActionClass",params:{insert:["action","index"],execute:["container","data","name"],empty:[]}},r}(K.NullComponent);e.NullAction=new r});r(B);var _=n(function(t,e){var r=function(t){function e(e){var r=t.call(this,e)||this;return r.children=[],r}return a(e,t),e.prototype.insert=function(t,e){return t.parent=this,e<0?e=0:e>=this.children.length&&(e=this.children.length-1),this.children.splice(e,0,t),this},e.prototype.execute=function(t,r,n){n?this.find(function(t){return t.name===n}).execute(t,r):this.trans(function(n){n instanceof e&&n.working(t,r)})},e.prototype.empty=function(){return B.NullAction},e.prototype.working=function(t,e){},e.classAnnations={name:"ActionComposite",params:{constructor:["name"],insert:["node","index"],execute:["container","data","name"],empty:[],working:["container","data"]}},e}(K.GComposite);e.ActionComposite=r});r(_);var U=n(function(t,e){!function(t){t.beforeCreateArgs="beforeCreateArgs",t.beforeConstructor="beforeConstructor",t.afterConstructor="afterConstructor",t.onInit="onInit",t.AfterInit="AfterInit"}(e.LifeState||(e.LifeState={}))});r(U);var q=n(function(t,e){!function(t){t.bindParameterType="bindParameterType",t.bindPropertyType="bindPropertyType",t.injectProperty="injectProperty",t.bindProvider="bindProvider",t.bindParameterProviders="bindParameterProviders",t.cache="cache",t.componentBeforeInit="componentBeforeInit",t.componentInit="componentInit",t.componentAfterInit="componentAfterInit",t.singletion="singletion",t.autorun="autorun"}(e.CoreActions||(e.CoreActions={}))});r(q);var V=n(function(t,e){var r=function(t){function e(){return t.call(this,q.CoreActions.bindProvider)||this}return a(e,t),e.prototype.working=function(t,e){var r=e.targetType,n=[];t.getLifeScope().getClassDecorators(function(t){return t.actions.includes(q.CoreActions.bindProvider)&&b.hasOwnClassMetadata(t.name,r)}).forEach(function(e){var o=b.getOwnTypeMetadata(e.name,r);if(Array.isArray(o)&&o.length>0){var a=o.find(function(t){return t&&!!t.provide});if(a){var i=t.getTokenKey(a.provide,a.alias);n.push(i),t.bindProvider(i,a.type)}}}),e.execResult=n},e.classAnnations={name:"BindProviderAction",params:{constructor:[],working:["container","data"]}},e}(_.ActionComposite);e.BindProviderAction=r});r(V);var z=n(function(t,e){var r=function(t){function e(){return t.call(this,q.CoreActions.bindParameterType)||this}return a(e,t),e.prototype.working=function(t,e){var r,n=e.target,o=e.targetType,a=e.propertyKey,i=t.getLifeScope();r=n&&a?Reflect.getMetadata("design:paramtypes",n,a)||[]:Reflect.getMetadata("design:paramtypes",o)||[],(r=r.slice(0)).forEach(function(e){i.isVaildDependence(e)&&(t.has(e)||t.register(e))});i.getParameterDecorators(function(t){return t.actions.includes(q.CoreActions.bindParameterType)&&(n||"constructor"!==a?b.hasParamMetadata(t.name,n,a):b.hasOwnParamMetadata(t.name,o))}).forEach(function(e){var s=n||"constructor"!==a?b.getParamMetadata(e.name,n,a):b.getOwnParamMetadata(e.name,o);p.isArray(s)&&s.length&&s.forEach(function(e){var n=p.isArray(e)&&e.length>0?e[0]:null;if(n&&n.index>=0){i.isVaildDependence(n.provider)&&(t.has(n.provider,n.alias)||t.register(t.getToken(n.provider,n.alias))),i.isVaildDependence(n.type)&&(t.has(n.type)||t.register(n.type));var o=n.provider?t.getTokenKey(n.provider,n.alias):n.type;o&&(r[n.index]=o)}})}),e.execResult=r},e.classAnnations={name:"BindParameterTypeAction",params:{constructor:[],working:["container","data"]}},e}(_.ActionComposite);e.BindParameterTypeAction=r});r(z);var G=n(function(t,e){var r=function(t){function e(){return t.call(this,q.CoreActions.bindPropertyType)||this}return a(e,t),e.prototype.working=function(t,e){var r=e.targetType,n=t.getLifeScope(),o=[];n.getPropertyDecorators(function(t){return t.actions.includes(q.CoreActions.bindPropertyType)&&b.hasPropertyMetadata(t.name,r)}).forEach(function(e){var a=b.getPropertyMetadata(e.name,r);for(var i in a)o=o.concat(a[i]);(o=o.filter(function(t){return!!t})).forEach(function(e){n.isVaildDependence(e.provider)&&(t.has(e.provider,e.alias)||t.register(t.getToken(e.provider,e.alias))),n.isVaildDependence(e.type)&&(t.has(e.type)||t.register(e.type))})}),e.execResult=o},e.classAnnations={name:"BindPropertyTypeAction",params:{constructor:[],working:["container","data"]}},e}(_.ActionComposite);e.BindPropertyTypeAction=r});r(G);var W=n(function(t,e){var r=function(t){function e(){return t.call(this,q.CoreActions.injectProperty)||this}return a(e,t),e.prototype.working=function(t,e){e.execResult||this.parent.find(function(t){return t.name===q.CoreActions.bindPropertyType}).execute(t,e),e.target&&e.execResult&&e.execResult.length&&e.execResult.forEach(function(r,n){if(r){var o=r.provider?t.getToken(r.provider,r.alias):r.type;t.has(o)&&(e.target[r.propertyKey]=t.resolve.apply(t,[o].concat(e.providers||[])))}})},e.classAnnations={name:"InjectPropertyAction",params:{constructor:[],working:["container","data"]}},e}(_.ActionComposite);e.InjectPropertyAction=r});r(W);var $=n(function(t,e){var r=function(t){function e(){return t.call(this,q.CoreActions.bindParameterProviders)||this}return a(e,t),e.prototype.working=function(t,e){var r=e.targetType,n=e.propertyKey,o=[];t.getLifeScope().getMethodDecorators(function(t){return t.actions.includes(q.CoreActions.bindParameterProviders)&&b.hasOwnMethodMetadata(t.name,r)}).forEach(function(t){var e=b.getOwnMethodMetadata(t.name,r)[n];e&&p.isArray(e)&&e.length>0&&e.forEach(function(t){t.providers&&t.providers.length>0&&(o=o.concat(t.providers))})}),e.execResult=o},e.classAnnations={name:"BindParameterProviderAction",params:{constructor:[],working:["container","data"]}},e}(_.ActionComposite);e.BindParameterProviderAction=r});r($);var Z=n(function(t,e){var r=function(t){function e(){return t.call(this,q.CoreActions.componentBeforeInit)||this}return a(e,t),e.prototype.working=function(t,e){if(e.targetType&&e.target){var r=e.target;p.isFunction(r.beforeInit)&&t.syncInvoke(e.targetType,"beforeInit",e.target)}},e.classAnnations={name:"ComponentBeforeInitAction",params:{constructor:[],working:["container","data"]}},e}(_.ActionComposite);e.ComponentBeforeInitAction=r});r(Z);var H=n(function(t,e){var r=function(t){function e(){return t.call(this,q.CoreActions.componentInit)||this}return a(e,t),e.prototype.working=function(t,e){if(e.targetType&&e.target){var r=e.target;p.isFunction(r.onInit)&&t.syncInvoke(e.targetType,"onInit",e.target)}},e.classAnnations={name:"ComponentInitAction",params:{constructor:[],working:["container","data"]}},e}(_.ActionComposite);e.ComponentInitAction=r});r(H);var J=n(function(t,e){var r=function(t){function e(){return t.call(this,q.CoreActions.componentAfterInit)||this}return a(e,t),e.prototype.working=function(t,e){if(e.targetType&&e.target){var r=e.target;p.isFunction(r.afterInit)&&t.syncInvoke(e.targetType,"afterInit",e.target)}},e.classAnnations={name:"ComponentAfterInitAction",params:{constructor:[],working:["container","data"]}},e}(_.ActionComposite);e.ComponentAfterInitAction=r});r(J);var Q=n(function(t,e){var r=function(t){function e(){return t.call(this,q.CoreActions.cache)||this}return a(e,t),e.prototype.working=function(t,e){if(e.singleton||!e.targetType||!p.isClass(e.targetType))return e;var r=t.get(p.symbols.ICacheManager);if(e.target){if(!r.hasCache(e.targetType)){(o=this.getCacheMetadata(t,e))&&r.cache(e.targetType,e.target,o.expires)}}else{var n=r.get(e.targetType);if(n){var o=this.getCacheMetadata(t,e);o&&(r.cache(e.targetType,n,o.expires),e.execResult=n)}}return e},e.prototype.getCacheMetadata=function(t,e){for(var r,n=t.getLifeScope().getClassDecorators(function(t){return b.hasOwnClassMetadata(t.name,e.targetType)}),o=0;o<n.length;o++){var a=n[o],i=b.getOwnTypeMetadata(a.name,e.targetType);if(Array.isArray(i)&&i.length>0&&(r=i.find(function(t){return t&&p.isNumber(t.expires)&&t.expires>0})))break}return r},e.classAnnations={name:"CacheAction",params:{constructor:[],working:["container","data"],getCacheMetadata:["container","data"]}},e}(_.ActionComposite);e.CacheAction=r});r(Q);var X=n(function(t,e){var r=function(t){function e(){return t.call(this,q.CoreActions.singletion)||this}return a(e,t),e.prototype.working=function(t,e){e.tokenKey&&e.target&&e.singleton&&t.registerValue(e.tokenKey,e.target)},e.classAnnations={name:"SingletionAction",params:{constructor:[],working:["container","data"]}},e}(_.ActionComposite);e.SingletionAction=r});r(X);var Y=n(function(t,e){var r=function(t){function e(){return t.call(this,q.CoreActions.autorun)||this}return a(e,t),e.prototype.getDecorator=function(){return[E.IocModule,E.Autorun]},e.prototype.working=function(t,e){if(e.tokenKey&&e.targetType){this.getDecorator().forEach(function(r){if(b.hasClassMetadata(r,e.targetType)){var n=b.getTypeMetadata(r,e.targetType),o=n.find(function(t){return!!t.autorun});if(!o&&n.length&&(o=n[0]),o){var a=t.get(e.tokenKey);a&&o.autorun&&p.isFunction(a[o.autorun])&&t.syncInvoke(e.tokenKey,o.autorun,a)}}else if(b.hasMethodMetadata(r,e.targetType)){var i,s=b.getMethodMetadata(r,e.targetType);Object.keys(s).forEach(function(t){var e=s[t];e&&!i&&(i=e.find(function(t){return!!t.autorun}))}),i&&i.autorun&&t.syncInvoke(e.tokenKey,i.autorun)}})}},e.classAnnations={name:"AutorunAction",params:{constructor:[],getDecorator:[],working:["container","data"]}},e}(_.ActionComposite);e.AutorunAction=r});r(Y);var tt=n(function(t,e){function r(t){for(var r in t)e.hasOwnProperty(r)||(e[r]=t[r])}r(_),r(U),r(q),r(B),r(V),r(z),r(G),r(W),r($),r(Z),r(H),r(J),r(Q),r(X),r(Y)});r(tt);var et=n(function(t,e){var r=function(){function t(){}return t.prototype.create=function(t){var e;switch(t){case tt.CoreActions.bindParameterType:e=new tt.BindParameterTypeAction;break;case tt.CoreActions.bindPropertyType:e=new tt.BindPropertyTypeAction;break;case tt.CoreActions.injectProperty:e=new tt.InjectPropertyAction;break;case tt.CoreActions.bindProvider:e=new tt.BindProviderAction;break;case tt.CoreActions.bindParameterProviders:e=new tt.BindParameterProviderAction;break;case tt.CoreActions.componentInit:e=new tt.ComponentInitAction;break;case tt.CoreActions.componentBeforeInit:e=new tt.ComponentBeforeInitAction;break;case tt.CoreActions.componentAfterInit:e=new tt.ComponentAfterInitAction;break;case tt.CoreActions.cache:e=new tt.CacheAction;break;case tt.CoreActions.singletion:e=new tt.SingletionAction;break;case tt.CoreActions.autorun:e=new tt.AutorunAction;break;default:e=new tt.ActionComposite(t)}return e},t.classAnnations={name:"ActionFactory",params:{create:["type"]}},t}();e.ActionFactory=r});r(et);var rt=n(function(t,e){var r=function(){function t(t){this.container=t,this.decorators=[],this.buildAction()}return t.prototype.addAction=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];var n=this.action;return e.forEach(function(t){n=n.find(function(e){return e.name===t})}),n&&n.add(t),this},t.prototype.registerDecorator=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];var n=this.getDecoratorType(t);return this.registerCustomDecorator.apply(this,[t,n].concat(e))},t.prototype.registerCustomDecorator=function(t,e){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var o=this.toActionName(e),a=t.toString();return this.decorators.some(function(t){return t.name===a})||this.decorators.push({name:a,types:o,actions:r}),this},t.prototype.execute=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];e=e.filter(function(t){return!!t});var n=this.action;e.forEach(function(t){n=n.find(function(e){return e.name===t})}),n&&n.execute(this.container,t)},t.prototype.getClassDecorators=function(t){return this.getTypeDecorators(this.toActionName(b.DecoratorType.Class),t)},t.prototype.getMethodDecorators=function(t){return this.getTypeDecorators(this.toActionName(b.DecoratorType.Method),t)},t.prototype.getPropertyDecorators=function(t){return this.getTypeDecorators(this.toActionName(b.DecoratorType.Property),t)},t.prototype.getParameterDecorators=function(t){return this.getTypeDecorators(this.toActionName(b.DecoratorType.Parameter),t)},t.prototype.getDecoratorType=function(t){return t.decoratorType||b.DecoratorType.All},t.prototype.isVaildDependence=function(t){return!!t&&(!!p.isClass(t)&&(!p.isAbstractDecoratorClass(t)&&this.getClassDecorators().some(function(e){return b.hasOwnClassMetadata(e.name,t)})))},t.prototype.getAtionByName=function(t){return this.action.find(function(e){return e.name===t})},t.prototype.getClassAction=function(){return this.getAtionByName(this.toActionName(b.DecoratorType.Class))},t.prototype.getMethodAction=function(){return this.getAtionByName(this.toActionName(b.DecoratorType.Method))},t.prototype.getPropertyAction=function(){return this.getAtionByName(this.toActionName(b.DecoratorType.Property))},t.prototype.getParameterAction=function(){return this.getAtionByName(this.toActionName(b.DecoratorType.Parameter))},t.prototype.getConstructorParameters=function(t){return this.getParameters(t)},t.prototype.getMethodParameters=function(t,e,r){return this.getParameters(t,e,r)},t.prototype.getParamerterNames=function(t,e){var r=b.getOwnParamerterNames(t),n=[];return r&&r.hasOwnProperty(e)&&(n=r[e]),p.isArray(n)||(n=[]),n},t.prototype.isSingletonType=function(t){return!!b.hasOwnClassMetadata(E.Singleton,t)||this.getClassDecorators().some(function(e){var r=b.getOwnTypeMetadata(e.name,t)||[];return!!p.isArray(r)&&r.some(function(t){return!0===t.singleton})})},t.prototype.getMethodMetadatas=function(t,e){var r=[];return this.getMethodDecorators().forEach(function(n){var o=b.getOwnMethodMetadata(n.name,t);o.hasOwnProperty(e)&&(r=r.concat(o[e]||[]))}),r},t.prototype.filerDecorators=function(t){return this.decorators.filter(t)},t.prototype.getParameters=function(t,e,r){var n={target:e,targetType:t,propertyKey:r=r||"constructor"};this.execute(n,tt.LifeState.onInit,tt.CoreActions.bindParameterType);var o=this.getParamerterNames(t,r);return n.execResult.length?n.execResult.map(function(t,e){return{type:t,name:o[e]}}):o.map(function(t){return{name:t,type:void 0}})},t.prototype.getTypeDecorators=function(t,e){return this.filerDecorators(function(r){var n=(r.types||"").indexOf(t)>=0;return n&&e&&(n=e(r)),n})},t.prototype.buildAction=function(){var t=new et.ActionFactory,e=t.create("");e.add(t.create(i.IocState.design).add(t.create(tt.CoreActions.bindProvider)).add(t.create(tt.CoreActions.autorun))).add(t.create(i.IocState.runtime).add(t.create(tt.LifeState.beforeCreateArgs)).add(t.create(tt.LifeState.beforeConstructor)).add(t.create(tt.LifeState.afterConstructor)).add(t.create(tt.LifeState.onInit).add(t.create(tt.CoreActions.componentBeforeInit)).add(t.create(this.toActionName(b.DecoratorType.Class))).add(t.create(this.toActionName(b.DecoratorType.Method))).add(t.create(this.toActionName(b.DecoratorType.Property)).add(t.create(tt.CoreActions.bindPropertyType)).add(t.create(tt.CoreActions.injectProperty))).add(t.create(this.toActionName(b.DecoratorType.Parameter)).add(t.create(tt.CoreActions.bindParameterType)).add(t.create(tt.CoreActions.bindParameterProviders))).add(t.create(tt.CoreActions.componentInit))).add(t.create(tt.LifeState.AfterInit).add(t.create(tt.CoreActions.singletion)).add(t.create(tt.CoreActions.componentAfterInit)))).add(t.create(tt.CoreActions.cache)),this.action=e},t.prototype.toActionName=function(t){var e=[];return t&b.DecoratorType.Class&&e.push("ClassDecorator"),t&b.DecoratorType.Method&&e.push("MethodDecorator"),t&b.DecoratorType.Property&&e.push("PropertyDecorator"),t&b.DecoratorType.Parameter&&e.push("ParameterDecorator"),e.join(",")},t.classAnnations={name:"DefaultLifeScope",params:{constructor:["container"],addAction:["action","nodepaths"],registerDecorator:["decorator","actions"],registerCustomDecorator:["decorator","type","actions"],execute:["data","names"],getClassDecorators:["match"],getMethodDecorators:["match"],getPropertyDecorators:["match"],getParameterDecorators:["match"],getDecoratorType:["decirator"],isVaildDependence:["target"],getAtionByName:["name"],getClassAction:[],getMethodAction:[],getPropertyAction:[],getParameterAction:[],getConstructorParameters:["type"],getMethodParameters:["type","instance","propertyKey"],getParamerterNames:["type","propertyKey"],isSingletonType:["type"],getMethodMetadatas:["type","propertyKey"],filerDecorators:["express"],getParameters:["type","instance","propertyKey"],getTypeDecorators:["decType","match"],buildAction:[],toActionName:["type"]}},t}();e.DefaultLifeScope=r});r(rt);var nt=n(function(t,e){var r=o&&o.__awaiter||function(t,e,r,n){return new(r||(r=Promise))(function(o,a){function i(t){try{c(n.next(t))}catch(t){a(t)}}function s(t){try{c(n.throw(t))}catch(t){a(t)}}function c(t){t.done?o(t.value):new r(function(e){e(t.value)}).then(i,s)}c((n=n.apply(t,e||[])).next())})},n=o&&o.__generator||function(t,e){function r(r){return function(i){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,o&&(a=o[2&r[0]?"return":r[0]?"throw":"next"])&&!(a=a.call(o,r[1])).done)return a;switch(o=0,a&&(r=[0,a.value]),r[0]){case 0:case 1:a=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,o=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(a=s.trys,!(a=a.length>0&&a[a.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){s.label=r[1];break}if(6===r[0]&&s.label<a[1]){s.label=a[1],a=r;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(r);break}a[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(t){r=[6,t],o=0}finally{n=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,i])}}var n,o,a,i,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i},a=function(){function t(t){this.container=t}return t.prototype.getMatcher=function(){return this.container.get(p.symbols.IProviderMatcher)},t.prototype.invoke=function(t,e,o){for(var a=[],i=3;i<arguments.length;i++)a[i-3]=arguments[i];return r(this,void 0,void 0,function(){var r,i,s,c,u,f;return n(this,function(n){switch(n.label){case 0:if(o||(o=(f=this.container).resolve.apply(f,[t].concat(a))),!(r=this.container.getTokenImpl(t)))throw Error(t.toString()+" is not implements by any class.");return o&&p.isFunction(o[e])?(i={target:o,targetType:r,propertyKey:e},(s=this.container.getLifeScope()).execute(i,tt.LifeState.onInit,tt.CoreActions.bindParameterProviders),a=a.concat(i.execResult),c=s.getMethodParameters(r,o,e),[4,this.createParams.apply(this,[c].concat(a))]):[3,2];case 1:return u=n.sent(),[2,o[e].apply(o,u)];case 2:throw new Error("type: "+r+" has no method "+e+".");case 3:return[2]}})})},t.prototype.syncInvoke=function(t,e,r){for(var n=[],o=3;o<arguments.length;o++)n[o-3]=arguments[o];r||(r=(f=this.container).resolve.apply(f,[t].concat(n)));var a=this.container.getTokenImpl(t);if(!a)throw Error(t.toString()+" is not implements by any class.");if(r&&p.isFunction(r[e])){var i={target:r,targetType:a,propertyKey:e},s=this.container.getLifeScope();s.execute(i,tt.LifeState.onInit,tt.CoreActions.bindParameterProviders),n=n.concat(i.execResult);var c=s.getMethodParameters(a,r,e),u=this.createSyncParams.apply(this,[c].concat(n));return r[e].apply(r,u)}throw new Error("type: "+a+" has no method "+e+".");var f},t.prototype.createSyncParams=function(t){for(var e=this,r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var o=(a=this.getMatcher()).matchProviders.apply(a,[t].concat(r));return t.map(function(t,n){return t.name&&o.has(t.name)?o.resolve(t.name):p.isToken(t.type)?(a=e.container).resolve.apply(a,[t.type].concat(r)):void 0;var a});var a},t.prototype.createParams=function(t){for(var e=this,r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var o=(a=this.getMatcher()).matchProviders.apply(a,[t].concat(r));return Promise.all(t.map(function(t,n){return t.name&&o.has(t.name)?o.resolve(t.name):p.isToken(t.type)?(a=e.container).resolve.apply(a,[t.type].concat(r)):void 0;var a}));var a},t.classAnnations={name:"MethodAccessor",params:{constructor:["container"],getMatcher:[],invoke:["token","propertyKey","target","providers"],syncInvoke:["token","propertyKey","target","providers"],createSyncParams:["params","providers"],createParams:["params","providers"]}},t}();e.MethodAccessor=a});r(nt);var ot=n(function(t,e){var r=function(){function t(t){this.container=t,this.maps=new p.MapSet}return t.prototype.has=function(t){return this.maps.has(t)},t.prototype.get=function(t){return this.maps.get(t)},t.prototype.add=function(t,e){var r=this;if(p.isUndefined(t))return this;var n;return n=p.isToken(e)&&this.container.has(e)?function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(o=r.container).resolve.apply(o,[e].concat(t));var o}:p.isFunction(e)?function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.apply(void 0,[r.container].concat(t))}:function(){return e},this.maps.set(t,n),this},t.prototype.remove=function(t){return this.maps.has(t)&&this.maps.delete(t),this},t.prototype.resolve=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(!this.maps.has(t))return!p.isNumber(t)&&this.container.has(t)?(o=this.container).resolve.apply(o,[t].concat(e)):null;var n=this.maps.get(t);return p.isToken(n)?(a=this.container).resolve.apply(a,[n].concat(e)):n.apply(void 0,e);var o,a},t.prototype.forEach=function(t){this.maps.forEach(t)},t.prototype.copy=function(t){var e=this;t&&t.forEach(function(t,r){e.maps.set(r,t)})},t.classAnnations={name:"ProviderMap",params:{constructor:["container"],has:["provide"],get:["provide"],add:["provide","provider"],remove:["provide"],resolve:["provide","providers"],forEach:["express"],copy:["map"]}},t}();e.ProviderMap=r});r(ot);var at=n(function(t,e){var r=function(){function t(t,e){this.type=t,this.value=e}return t.prototype.resolve=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];return p.isUndefined(this.value)?t.has(this.type)?t.resolve.apply(t,[this.type].concat(e)):null:this.value},t.create=function(e,r){return new t(e,r)},t.createExtends=function(t,e,r){return new s(t,e,r)},t.createCustom=function(t,e,r){return new n(t,e,r)},t.createInvoke=function(t,e,r){return new o(t,e,r)},t.createParam=function(t,e,r,n){return new i(t,e,r,n)},t.createAsyncParam=function(t,e,r,n,o){return new c(t,e,r,n,o)},t.classAnnations={name:"Provider",params:{constructor:["type","value"],resolve:["container","providers"],create:["type","value"],createExtends:["token","value","extendsTarget"],createCustom:["type","toInstance","value"],createInvoke:["token","method","value"],createParam:["token","value","index","method"],createAsyncParam:["files","token","index","method","value"]}},t}();e.Provider=r;var n=function(t){function e(e,r,n){var o=t.call(this,e,n)||this;return o.toInstance=r,o}return a(e,t),e.prototype.resolve=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];return this.toInstance?this.toInstance.apply(this,[e].concat(r)):t.prototype.resolve.apply(this,[e].concat(r))},e.classAnnations={name:"CustomProvider",params:{constructor:["type","toInstance","value"],resolve:["container","providers"]}},e}(r);e.CustomProvider=n;var o=function(t){function e(e,r,n){var o=t.call(this,e,n)||this;return o.method=r,o}return a(e,t),e.prototype.resolve=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];return this.method?e.syncInvoke.apply(e,[this.type,this.method].concat(r)):t.prototype.resolve.apply(this,[e].concat(r))},e.classAnnations={name:"InvokeProvider",params:{constructor:["type","method","value"],resolve:["container","providers"]}},e}(r);e.InvokeProvider=o;var i=function(t){function e(e,r,n,o){var a=t.call(this,e,o,r)||this;return a.index=n,a}return a(e,t),e.prototype.resolve=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];return t.prototype.resolve.apply(this,[e].concat(r))},e.classAnnations={name:"ParamProvider",params:{constructor:["token","value","index","method"],resolve:["container","providers"]}},e}(o);e.ParamProvider=i;var s=function(t){function e(e,r,n){var o=t.call(this,e,r)||this;return o.extendsTarget=n,o}return a(e,t),e.prototype.resolve=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];return t.prototype.resolve.apply(this,[e].concat(r))},e.prototype.extends=function(t){p.isObject(t)&&p.isFunction(this.extendsTarget)&&this.extendsTarget(t,this)},e.classAnnations={name:"ExtendsProvider",params:{constructor:["token","value","extendsTarget"],resolve:["container","providers"],extends:["target"]}},e}(r);e.ExtendsProvider=s;var c=function(t){function e(e,r,n,o,a){var i=t.call(this,r,a,n,o)||this;return i.files=e,i}return a(e,t),e.prototype.resolve=function(e){for(var r=this,n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];return e.get(p.symbols.IContainerBuilder).loadModule(e,{files:this.files}).then(function(){return t.prototype.resolve.apply(r,[e].concat(n))})},e.classAnnations={name:"AsyncParamProvider",params:{constructor:["files","token","index","method","value"],resolve:["container","providers"]}},e}(i);e.AsyncParamProvider=c});r(at);var it=n(function(t,e){function r(t){for(var r in t)e.hasOwnProperty(r)||(e[r]=t[r])}r(at),r(ot),e.isProviderMap=function(t){return!!p.isObject(t)&&t instanceof ot.ProviderMap}});r(it);var st=n(function(t,e){var r=function(){function t(t){this.container=t}return t.prototype.toProviderMap=function(){for(var t=this,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];if(1===e.length&&it.isProviderMap(e[0]))return e[0];var n=this.container.resolve(it.ProviderMap);return e.forEach(function(e,r){p.isUndefined(e)||p.isNull(e)||(it.isProviderMap(e)?n.copy(e):e instanceof it.Provider?e instanceof it.ParamProvider&&!e.type&&p.isNumber(e.index)?n.add(e.index,function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return e.resolve.apply(e,[t.container].concat(r))}):n.add(e.type,function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return e.resolve.apply(e,[t.container].concat(r))}):p.isBaseObject(e)?Object.keys(e).forEach(function(t){p.isUndefined(e[t])||(p.isClass(e[t])?n.add(t,e[t]):p.isFunction(e[t])||p.isString(e[t])?n.add(t,function(){return e[t]}):n.add(t,e[t]))}):p.isFunction(e)?n.add(name,function(){return e}):n.add(r,e))}),n},t.prototype.matchProviders=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];return this.match(t,this.toProviderMap.apply(this,e))},t.prototype.match=function(t,e){var r=this,n=this.container.resolve(it.ProviderMap);return t.length?(t.forEach(function(t,o){t.name&&(e.has(t.name)?n.add(t.name,e.get(t.name)):p.isToken(t.type)?e.has(t.type)?n.add(t.name,e.get(t.type)):r.container.has(t.type)&&n.add(t.name,t.type):e.has(o)&&n.add(t.name,e.get(o)))}),n):n},t.classAnnations={name:"ProviderMatcher",params:{constructor:["container"],toProviderMap:["providers"],matchProviders:["params","providers"],match:["params","providers"]}},t}();e.ProviderMatcher=r});r(st);var ct=n(function(t,e){var r=function(){function t(t){this.container=t,this.cacheTokens=new p.MapSet}return t.prototype.isChecking=function(){return!!this.timeout},t.prototype.hasCache=function(t){return this.cacheTokens.has(t)},t.prototype.cache=function(t,e,r){var n;this.hasCache(t)?(n=this.cacheTokens.get(t)).expires=Date.now()+r:n={target:e,expires:Date.now()+r},this.cacheTokens.set(t,n),this.isChecking()||this.checkExpires()},t.prototype.get=function(t,e){var r=null;if(!this.cacheTokens.has(t))return null;var n=this.cacheTokens.get(t);return n.expires<=Date.now()?(r=n.target,p.isNumber(e)&&e>0&&(n.expires=Date.now()+e,this.cacheTokens.set(t,n))):this.destroy(t,n.target),r},t.prototype.checkExpires=function(){var t=this;if(this.timeout&&(clearTimeout(this.timeout),this.timeout=0),this.cacheTokens.size>0){var e=[];this.cacheTokens.forEach(function(t,r){t.expires>=Date.now()&&e.push(r)}),e.length&&e.forEach(function(e){t.destroy(e,t.cacheTokens.get(e).target)}),this.timeout=setTimeout(function(){t.checkExpires()},6e4)}},t.prototype.destroy=function(t,e){if(this.hasCache(t)){e||(e=this.cacheTokens.get(t).target);try{var r=e;p.isFunction(r.onDestroy)&&this.container.syncInvoke(t,"onDestroy",e),this.cacheTokens.delete(t)}catch(t){console.error&&console.error(t)}}},t.classAnnations={name:"CacheManager",params:{constructor:["container"],isChecking:[],hasCache:["targetType"],cache:["targetType","target","expires"],get:["targetType","expires"],checkExpires:[],destroy:["targetType","target"]}},t}();e.CacheManager=r});r(ct);var ut=n(function(t,e){function r(t){for(var r in t)e.hasOwnProperty(r)||(e[r]=t[r])}r(tt),r(E),r(b),r(it),r(et),r(rt),r(st),r(nt),r(ct),e.registerCores=function(t){t.registerSingleton(p.symbols.LifeScope,function(){return new rt.DefaultLifeScope(t)}),t.register(it.ProviderMap,function(){return new it.ProviderMap(t)}),t.registerSingleton(p.symbols.ICacheManager,function(){return new ct.CacheManager(t)}),t.registerSingleton(p.symbols.IProviderMatcher,function(){return new st.ProviderMatcher(t)}),t.registerSingleton(p.symbols.IMethodAccessor,function(){return new nt.MethodAccessor(t)});var e=t.get(p.symbols.LifeScope);e.registerDecorator(E.Injectable,tt.CoreActions.bindProvider,tt.CoreActions.cache),e.registerDecorator(E.Component,tt.CoreActions.bindProvider,tt.CoreActions.cache,tt.CoreActions.componentBeforeInit,tt.CoreActions.componentInit,tt.CoreActions.componentAfterInit),e.registerDecorator(E.Singleton,tt.CoreActions.bindProvider),e.registerDecorator(E.Abstract,tt.CoreActions.bindProvider,tt.CoreActions.cache),e.registerDecorator(E.AutoWired,tt.CoreActions.bindParameterType,tt.CoreActions.bindPropertyType),e.registerDecorator(E.Inject,tt.CoreActions.bindParameterType,tt.CoreActions.bindPropertyType),e.registerDecorator(E.Param,tt.CoreActions.bindParameterType,tt.CoreActions.bindPropertyType),e.registerDecorator(E.Method,tt.CoreActions.bindParameterProviders),e.registerDecorator(E.Autorun,tt.CoreActions.autorun),e.registerDecorator(E.IocModule,tt.CoreActions.autorun,tt.CoreActions.componentBeforeInit,tt.CoreActions.componentInit,tt.CoreActions.componentAfterInit),t.register(Date,function(){return new Date}),t.register(String,function(){return""}),t.register(Number,function(){return Number.NaN}),t.register(Boolean,function(){})}});r(ut);var pt=n(function(t,e){var r=function(){function t(){this.init()}return t.prototype.get=function(t,e){return this.resolve(e?this.getTokenKey(t,e):t)},t.prototype.resolve=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];var n=this.getTokenKey(t);if(!this.hasRegister(n))return console.error("have not register",n),null;return this.factories.get(n).apply(void 0,e)},t.prototype.clearCache=function(t){this.get(p.symbols.ICacheManager).destroy(t)},t.prototype.getToken=function(t,e){return t instanceof f.Registration?t:e&&p.isFunction(t)?new f.Registration(t,e):t},t.prototype.getTokenKey=function(t,e){return t instanceof f.Registration?t.toString():e?new f.Registration(t,e).toString():t},t.prototype.register=function(t,e){return this.registerFactory(t,e),this},t.prototype.has=function(t,e){var r=this.getTokenKey(t,e);return this.hasRegister(r)},t.prototype.hasRegister=function(t){return this.factories.has(t)},t.prototype.unregister=function(t){var e=this.getTokenKey(t);return this.hasRegister(e)&&this.factories.delete(e),this},t.prototype.registerSingleton=function(t,e){return this.registerFactory(t,e,!0),this},t.prototype.registerValue=function(t,e){var r=this,n=this.getTokenKey(t);return this.singleton.set(n,e),this.factories.has(n)||this.factories.set(n,function(){return r.singleton.get(n)}),this},t.prototype.bindProvider=function(t,e){var r,n=this,o=this.getTokenKey(t);if(r=p.isToken(e)?function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return n.resolve.apply(n,[e].concat(t))}:p.isFunction(e)?function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return e.apply(void 0,[n].concat(t))}:function(){return e},p.isClass(e))this.provideTypes.set(t,e);else if(p.isToken(e))for(var a=e;this.provideTypes.has(a)&&!p.isClass(a);)if(a=this.provideTypes.get(a),p.isClass(a)){this.provideTypes.set(t,a);break}return this.factories.set(o,r),this},t.prototype.getTokenImpl=function(t){return p.isClass(t)?t:this.provideTypes.has(t)?this.provideTypes.get(t):null},t.prototype.getLifeScope=function(){return this.get(p.symbols.LifeScope)},t.prototype.use=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(r=this.get(p.symbols.IContainerBuilder)).syncLoadModule.apply(r,[this].concat(t)),this;var r},t.prototype.invoke=function(t,e,r){for(var n=[],o=3;o<arguments.length;o++)n[o-3]=arguments[o];return(a=this.get(p.symbols.IMethodAccessor)).invoke.apply(a,[t,e,r].concat(n));var a},t.prototype.syncInvoke=function(t,e,r){for(var n=[],o=3;o<arguments.length;o++)n[o-3]=arguments[o];return(a=this.get(p.symbols.IMethodAccessor)).syncInvoke.apply(a,[t,e,r].concat(n));var a},t.prototype.createSyncParams=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];return(n=this.get(p.symbols.IMethodAccessor)).createSyncParams.apply(n,[t].concat(e));var n},t.prototype.createParams=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];return(n=this.get(p.symbols.IMethodAccessor)).createParams.apply(n,[t].concat(e));var n},t.prototype.cacheDecorator=function(t,e){t.has(e.name)||t.set(e.name,e)},t.prototype.init=function(){var t=this;this.factories=new p.MapSet,this.singleton=new p.MapSet,this.provideTypes=new p.MapSet,this.bindProvider(p.symbols.IContainer,function(){return t}),ut.registerCores(this)},t.prototype.registerFactory=function(t,e,r){var n=this.getTokenKey(t);if(!this.factories.has(n)){var o;if(p.isUndefined(e)){if(!p.isString(t)&&!p.isSymbol(t)){var a=t instanceof f.Registration?t.getClass():t;p.isClass(a)&&this.bindTypeFactory(n,a,r)}}else p.isFunction(e)?p.isClass(e)?this.bindTypeFactory(n,e,r):o=this.createCustomFactory(n,e,r):r&&void 0!==e&&(o=this.createCustomFactory(n,function(){return e},r));o&&this.factories.set(n,o)}},t.prototype.createCustomFactory=function(t,e,r){var n=this;return r?function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];if(n.singleton.has(t))return n.singleton.get(t);var a=e.apply(void 0,[n].concat(r));return n.singleton.set(t,a),a}:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return e.apply(void 0,[n].concat(t))}},t.prototype.bindTypeFactory=function(t,e,r){var n=this;if(Reflect.isExtensible(e)){var o=this.getLifeScope(),a=o.getConstructorParameters(e);r||(r=o.isSingletonType(e));this.factories.set(t,function(){for(var s=[],c=0;c<arguments.length;c++)s[c]=arguments[c];if(r&&n.singleton.has(t))return n.singleton.get(t);if(s.length<1){var u={tokenKey:t,targetType:e,singleton:r};if(o.execute(u,ut.CoreActions.cache),u.execResult&&u.execResult instanceof e)return u.execResult}o.execute({tokenKey:t,targetType:e,params:a,providers:s,singleton:r},i.IocState.runtime,ut.LifeState.beforeCreateArgs);var p=n.createSyncParams.apply(n,[a].concat(s));o.execute({tokenKey:t,targetType:e,args:p,params:a,providers:s,singleton:r},i.IocState.runtime,ut.LifeState.beforeConstructor);var f=new(e.bind.apply(e,[void 0].concat(p)));return o.execute({tokenKey:t,target:f,targetType:e,args:p,params:a,providers:s,singleton:r},i.IocState.runtime,ut.LifeState.afterConstructor),o.execute({tokenKey:t,target:f,targetType:e,args:p,params:a,providers:s,singleton:r},i.IocState.runtime,ut.LifeState.onInit),o.execute({tokenKey:t,target:f,targetType:e,args:p,params:a,providers:s,singleton:r},i.IocState.runtime,ut.LifeState.AfterInit),o.execute({tokenKey:t,target:f,targetType:e},ut.CoreActions.cache),f}),o.execute({tokenKey:t,targetType:e},i.IocState.design)}},t.classAnnations={name:"Container",params:{constructor:[],get:["token","alias"],resolve:["token","providers"],clearCache:["targetType"],getToken:["token","alias"],getTokenKey:["token","alias"],register:["token","value"],has:["token","alias"],hasRegister:["key"],unregister:["token"],registerSingleton:["token","value"],registerValue:["token","value"],bindProvider:["provide","provider"],getTokenImpl:["token"],getLifeScope:[],use:["modules"],invoke:["token","propertyKey","instance","providers"],syncInvoke:["token","propertyKey","instance","providers"],createSyncParams:["params","providers"],createParams:["params","providers"],cacheDecorator:["map","action"],init:[],registerFactory:["token","value","singleton"],createCustomFactory:["key","factory","singleton"],bindTypeFactory:["key","ClassT","singleton"]}},t}();e.Container=r});r(pt);var ft=n(function(t,r){var n=function(){function t(){}return t.prototype.getLoader=function(){return this._loader||(this._loader=this.createLoader()),this._loader},t.prototype.load=function(t){var e=this;return t.files?Promise.all(t.files).then(function(t){return t.map(function(t){return e.loadModule(t)})}):Promise.resolve([])},t.prototype.loadModule=function(t){return this.getLoader()(t)},t.prototype.createLoader=function(){if(void 0!==e)return function(t){return new Promise(function(t,r){e()})};throw new Error("has not module loader")},t.classAnnations={name:"DefaultModuleLoader",params:{constructor:[],getLoader:[],load:["options"],loadModule:["file"],createLoader:[]}},t}();r.DefaultModuleLoader=n});r(ft);var lt=n(function(t,e){var r=o&&o.__awaiter||function(t,e,r,n){return new(r||(r=Promise))(function(o,a){function i(t){try{c(n.next(t))}catch(t){a(t)}}function s(t){try{c(n.throw(t))}catch(t){a(t)}}function c(t){t.done?o(t.value):new r(function(e){e(t.value)}).then(i,s)}c((n=n.apply(t,e||[])).next())})},n=o&&o.__generator||function(t,e){function r(r){return function(i){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,o&&(a=o[2&r[0]?"return":r[0]?"throw":"next"])&&!(a=a.call(o,r[1])).done)return a;switch(o=0,a&&(r=[0,a.value]),r[0]){case 0:case 1:a=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,o=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(a=s.trys,!(a=a.length>0&&a[a.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){s.label=r[1];break}if(6===r[0]&&s.label<a[1]){s.label=a[1],a=r;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(r);break}a[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(t){r=[6,t],o=0}finally{n=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,i])}}var n,o,a,i,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i},a=function(){function t(t){this.loader=t,t||(this.loader=new ft.DefaultModuleLoader)}return t.prototype.create=function(){var t=this,e=new pt.Container;return e.bindProvider(p.symbols.IContainerBuilder,function(){return t}),e},t.prototype.build=function(t){return r(this,void 0,void 0,function(){var e;return n(this,function(r){switch(r.label){case 0:return e=this.create(),t?[4,this.loadModule(e,t)]:[3,2];case 1:r.sent(),r.label=2;case 2:return[2,e]}})})},t.prototype.loadModule=function(t,e){return r(this,void 0,void 0,function(){var r;return n(this,function(n){switch(n.label){case 0:return[4,this.loadTypes(e)];case 1:return r=n.sent(),[2,this.registers(t,r)]}})})},t.prototype.syncBuild=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=this.create();return t.length&&this.syncLoadModule.apply(this,[r].concat(t)),r},t.prototype.syncLoadModule=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];var n=this.getModules.apply(this,e);return this.registers(t,n)},t.prototype.loadTypes=function(t){return r(this,void 0,void 0,function(){var e,r,o=this;return n(this,function(n){switch(n.label){case 0:return t?[4,this.loader.load(t)]:[3,3];case 1:return e=n.sent(),t.modules&&t.modules.length?[4,Promise.all(t.modules.map(function(t){return p.isString(t)?o.loader.loadModule(t):t}))]:[3,3];case 2:r=n.sent(),e=e.concat(r),n.label=3;case 3:return[2,this.getModules.apply(this,e)]}})})},t.prototype.registers=function(t,e){return(e=e||[]).forEach(function(e){t.register(e)}),e},t.prototype.getModules=function(){for(var t=this,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n=[];return e.forEach(function(e){var r=t.getTypes(e),o=r.find(function(t){return ut.hasOwnClassMetadata(ut.IocModule,t)});o?n.push(o):n.push.apply(n,r)}),n},t.prototype.getTypes=function(t){var e=[];if(p.isClass(t))e.push(t);else{var r=t.exports?t.exports:t;for(var n in r)p.isClass(r[n])&&e.push(r[n])}return e},t.classAnnations={name:"DefaultContainerBuilder",params:{constructor:["loader"],create:[],build:["options"],loadModule:["container","options"],syncBuild:["modules"],syncLoadModule:["container","modules"],loadTypes:["options"],registers:["container","types"],getModules:["modules"],getTypes:["regModule"]}},t}();e.DefaultContainerBuilder=a});r(lt);return r(n(function(t,e){function r(t){for(var r in t)e.hasOwnProperty(r)||(e[r]=t[r])}r(pt),r(i),r(f),r(ft),r(lt),r(p),r(K),r(ut)}))});