{"version":3,"sources":["core.umd.min.js"],"names":["global","factory","exports","module","require","define","amd","core","umd","js","tslib_1","Reflect","this","reflectMetadata","commonjsRequire","Error","unwrapExports","x","__esModule","Object","prototype","hasOwnProperty","call","createCommonjsModule","fn","getOwnPropertySymbols","propIsEnumerable","propertyIsEnumerable","objectAssign","assign","test1","String","getOwnPropertyNames","test2","i","fromCharCode","map","n","join","test3","split","forEach","letter","keys","err","shouldUseNative","target","source","from","symbols","to","val","TypeError","toObject","s","arguments","length","key","lang_1","defineProperty","value","lang","typeCheck","isObject","isFunction","keys_1","name_1","push","forIn","iterator","isArray","idx","values","values_1","name_2","source1","source2","sources","unshift","apply","concat","omit","fields","_i","result_1","indexOf","hasField","find","express","item","it","getParentClass","p","getPrototypeOf","isClass","constructor","first","list","last","name","hasOwnMetadata","type","test","classAnnations","isString","isNodejsEnv","navigator","userAgent","caller","e","process","versions","node","isMetadataObject","props","extendsProps","isBaseType","isSymbol","Registration_1","Registration","RegExp","Date","some","isBoolean","isNumber","isUndefined","undefined","isNull","toString","isAbstractDecoratorClass","getClassName","classType","isToken","isPromise","then","catch","isObservable","subscribe","toPromise","isBaseObject","isClassMetadata","isParamMetadata","isParamPropMetadata","isPropertyMetadata","Array","isDate","isRegExp","MapSet_1","ObjectMapSet","valueMap","keyMap","clear","getTypeKey","delete","strkey","_a","callbackfn","thisArg","_this","get","strKey","has","set","enumerable","configurable","params","MapSet","Map","size","PromiseUtil_1","Defer","promise","Promise","resolve","reject","create","defer","PromiseUtil","promises","defVal","pf","v","data","step","result","filter","utils","__exportStar","provideType","desc","getProvide","pdec","getDesc","getClass","trim","InjectToken_1","InjectToken","_super","__extends","IContainer","ContainerToken","types","IocState","Mode","IMethodAccessor","MethodAccessorToken","NullComponent_1","NullComponent","isEmpty","add","action","remove","mode","NullNode","each","trans","transAfter","routeUp","equals","empty","GComposite_1","GComposite","children","parent","component","cmp","splice","nodes","iterate","r","traverse","route","eachChildren","traverseLast","Composite_1","Composite","components","NullAction","NullActionClass","insert","index","execute","container","ActionComposite_1","ActionComposite","working","LifeState_1","LifeState","CoreActions_1","CoreActions","ArgsIterator_1","ArgsIterator","args","metadata","isCompeted","end","next","arg","isMetadata","match","setMetadata","getArgs","getMetadata","DecoratorType_1","DecoratorType","DecoratorFactory","storeMetadata","metaName","metadataExtends","annotations","getOwnTypeMetadata","slice","typeMetadata","decorator","setParamerterNames","defineMetadata","setTypeMetadata","setPropertyMetadata","propertyKey","parameterIndex","parameters","getOwnParamMetadata","paramMeadata","t","getOwnMetadata","paramsMetadataExt","setParamMetadata","propertyKey_3","descriptor","meta","getOwnMethodMetadata","methodMeadata","methodMetadataExt","setMethodMetadata","ParamerterName","createDecorator","adapter","argsToMetadata","decoratorType","All","getTypeMetadata","hasClassMetadata","hasMetadata","hasOwnClassMetadata","getMethodMetadata","hasOwnMethodMetadata","hasMethodMetadata","propertyMetadataExt","getPropertyMetadata","getOwnPropertyMetadata","propmetadata","hasPropertyMetadata","getParamerterNames","descriptors","getOwnPropertyDescriptors","isUglify","anName","getParamNames","getParamMetadata","hasParamMetadata","hasOwnParamMetadata","getOwnParamerterNames","STRIP_COMMENTS","ARGUMENT_NAMES","func","fnStr","replace","ClassDecoratorFactory","createClassDecorator","provide","alias","singleton","expires","Class","MethodDecoratorFactory","createMethodDecorator","providers","Method","ParamDecoratorFactory","createParamDecorator","provider","Parameter","PropertyDecoratorFactory","createPropDecorator","Property","ParamPropDecoratorFactory","createParamPropDecorator","ClassMethodDecoratorFactory","createClassMethodDecorator","MethodPropDecoratorFactory","createMethodPropDecorator","MethodPropParamDecoratorFactory","createMethodPropParamDecorator","factories","BindProviderAction_1","BindProviderAction","bindProvider","targetType","matchs","getLifeScope","getClassDecorators","surm","actions","includes","provides","raiseContainer","c","provideKey","getTokenKey","execResult","BindParameterTypeAction_1","BindParameterTypeAction","bindParameterType","designParams","lifeScope","dtype","isVaildDependence","register","getParameterDecorators","parm","getToken","token","BindPropertyTypeAction_1","BindPropertyTypeAction","bindPropertyType","getPropertyDecorators","propMetadata","prop","InjectPropertyAction_1","InjectPropertyAction","injectProperty","act","providerMap_1","providerMap","reverse","BindParameterProviderAction_1","BindParameterProviderAction","bindParameterProviders","getMethodDecorators","metadatas","ComponentBeforeInitAction_1","ComponentBeforeInitAction","componentBeforeInit","beforeInit","syncInvoke","ComponentInitAction_1","ComponentInitAction","componentInit","onInit","ComponentAfterInitAction_1","ComponentAfterInitAction","componentAfterInit","afterInit","ICacheManager","CacheManagerToken","CacheAction_1","CacheAction","cache","cacheManager","hasCache","cacheMetadata","getCacheMetadata","SingletonAction","SingletionAction","singletion","tokenKey","registerValue","Component","Injectable","Inject","AutoWried","AutoWired","Param","Singleton","Abstract","AutoRun","Autorun","autorun","order","IocExt","IocModule","decorators","AutorunAction_1","AutorunAction","getDecorator","metas","instance","ProviderMap_1","ProviderMapToken","ProviderMap","maps","_b","copy","Provider_1","Provider","createExtends","extendsTarget","ExtendsProvider","createInvoke","method","InvokeProvider","createParam","ParamProvider","extends","isProviderMap","IRecognizer","RecognizerToken","IProviderMatcher","ProviderMatcherToken","MethodAutorun_1","MethodAutorun","methodAutorun","lastmetas_1","idx_1","mm","m","sort","au1","au2","aut","ActionFactory_1","ActionFactory","DefaultLifeScope_1","DefaultLifeScope","buildAction","addAction","nodepaths","pathname","registerDecorator","actions$$2","getDecoratorType","registerCustomDecorator","types$$2","toActionName","d","names","itm","routeExecute","getTypeDecorators","decirator","getAtionByName","getClassAction","getMethodAction","getPropertyAction","getParameterAction","getConstructorParameters","getParameters","getMethodParameters","paramNames","isSingletonType","getMethodMetadatas","dec","filerDecorators","typ","decType","flag","design","runtime","beforeCreateArgs","beforeConstructor","afterConstructor","AfterInit","ProviderMatcher_1","ProviderMatcher","toProviderMap","providers$$1","pr_1","isobjMap","deps","useValue","useClass","useFactory","useExisting","console","log","matchProviders","param","MethodAccessor_1","MethodAccessor","getMatcher","invoke","__awaiter","targetClass","actionData","paramInstances","__generator","label","getTokenImpl","createParams","sent","createSyncParams","all","CacheManager_1","CacheManager","cacheTokens","isChecking","timeout","now","checkExpires","destroy","clearTimeout","timeoutCaches_1","setTimeout","onDestroy","error","LifeScope","LifeScopeToken","IContainerBuilder","ContainerBuilderToken","ResolverChain_1","ResolverChainToken","ResolverChain","resolvers","resolver","hasResolver","toArray","Container_1","Container","a","hasToken","hasRegister","exps_1","resolveValue","unregister","resolves","registerCores_1","registerCores","registerSingleton","Number","NaN","Boolean","init","getRoot","root","getBuilder","clearCache","registerFactory","inchain","provideTypes","getTokenExtendsChain","getBaseClasses","types$$1","use","modules","syncLoadModule","loadModule","cacheDecorator","classFactory","ClassT","bindTypeFactory","createCustomFactory","isExtensible","lifecycleData","bind","IModuleLoader","ModuleLoaderToken","DefaultModuleLoader_1","DefaultModuleLoader","getLoader","_loader","createLoader","load","mdty","isFile","loadFile","loadPathModule","allms","rmodules","ms","loadTypes","mdls","getTypes","regModules","getContentTypes","files","basePath","loader","f","rms","str","moduleName","pmd","allmoduls","nmd","modulepath","regModule","IModuleValidate","InjectModuleValidateToken","ModuleValidateToken","IMetaAccessor","InjectMetaAccessorToken","DefaultMetaAccessorToken","AnnotationMetaAccessorToken","ModuleValidate","BaseModuelValidate","validate","decor","getMetaConfig","getMetaAccessor","IocExtModuleValidateToken","IocExtModuleValidate","MetaAccessor_1","MetaAccessor","getDecorators","firstDecor","__decorate","__metadata","AnnotationMetaAccessor","accessor_1","provider_1","tk","accToken","getDefaultMetaAccessor","IModuleInjector","InjectModuleInjectorToken","sync","ModuleInjectorToken","SyncModuleInjectorToken","ModuleInjector_1","BaseModuleInjector","skipNext","md","filtered","setup","inject","SyncModuleInjector","ty","injected","ModuleInjector","IModuleInjectorChain","ModuleInjectorChainToken","ModuleInjectorChain_1","ModuleInjectorChain","_injectors","injector","isInjector","injectors","jtor","ijrt","syncInject","completed","DefaultContainerBuilder_1","DefaultContainerBuilder","build","injTypes","injChain_1","getInjectorChain","typs","ityps","syncBuild","injChain_2","currChain","injectorChain"],"mappings":"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","file":"../core.umd.min.js","sourcesContent":["(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory(require('tslib'), require('reflect-metadata')) :\n\ttypeof define === 'function' && define.amd ? define(['tslib', 'reflect-metadata'], factory) :\n\t(global.core = global.core || {}, global.core.umd = global.core.umd || {}, global.core.umd.js = factory(global.tslib_1,global.Reflect));\n}(this, (function (tslib_1,reflectMetadata) { 'use strict';\n\ntslib_1 = tslib_1 && tslib_1.hasOwnProperty('default') ? tslib_1['default'] : tslib_1;\nreflectMetadata = reflectMetadata && reflectMetadata.hasOwnProperty('default') ? reflectMetadata['default'] : reflectMetadata;\n\nfunction commonjsRequire () {\n\tthrow new Error('Dynamic requires are not currently supported by rollup-plugin-commonjs');\n}\n\nfunction unwrapExports (x) {\n\treturn x && x.__esModule && Object.prototype.hasOwnProperty.call(x, 'default') ? x['default'] : x;\n}\n\nfunction createCommonjsModule(fn, module) {\n\treturn module = { exports: {} }, fn(module, module.exports), module.exports;\n}\n\n/*\nobject-assign\n(c) Sindre Sorhus\n@license MIT\n*/\n\n/* eslint-disable no-unused-vars */\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nfunction toObject(val) {\n\tif (val === null || val === undefined) {\n\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t}\n\n\treturn Object(val);\n}\n\nfunction shouldUseNative() {\n\ttry {\n\t\tif (!Object.assign) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Detect buggy property enumeration order in older V8 versions.\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=4118\n\t\tvar test1 = new String('abc');  // eslint-disable-line no-new-wrappers\n\t\ttest1[5] = 'de';\n\t\tif (Object.getOwnPropertyNames(test1)[0] === '5') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test2 = {};\n\t\tfor (var i = 0; i < 10; i++) {\n\t\t\ttest2['_' + String.fromCharCode(i)] = i;\n\t\t}\n\t\tvar order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n\t\t\treturn test2[n];\n\t\t});\n\t\tif (order2.join('') !== '0123456789') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test3 = {};\n\t\t'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n\t\t\ttest3[letter] = letter;\n\t\t});\n\t\tif (Object.keys(Object.assign({}, test3)).join('') !==\n\t\t\t\t'abcdefghijklmnopqrst') {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t} catch (err) {\n\t\t// We don't expect any of the above to throw, but better to be safe.\n\t\treturn false;\n\t}\n}\n\nvar objectAssign = shouldUseNative() ? Object.assign : function (target, source) {\n\tvar from;\n\tvar to = toObject(target);\n\tvar symbols;\n\n\tfor (var s = 1; s < arguments.length; s++) {\n\t\tfrom = Object(arguments[s]);\n\n\t\tfor (var key in from) {\n\t\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\t\tto[key] = from[key];\n\t\t\t}\n\t\t}\n\n\t\tif (getOwnPropertySymbols) {\n\t\t\tsymbols = getOwnPropertySymbols(from);\n\t\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\t\tto[symbols[i]] = from[symbols[i]];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn to;\n};\n\nvar lang_1 = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n\nvar lang;\n(function (lang) {\n    /**\n     * get object keys.\n     *\n     * @param {*} target\n     * @returns {string[]}\n     */\n    function keys(target) {\n        if (typeCheck.isObject(target)) {\n            if (typeCheck.isFunction(Object.keys)) {\n                return Object.keys(target);\n            }\n            else {\n                var keys_1 = [];\n                for (var name_1 in target) {\n                    keys_1.push(name_1);\n                }\n                return keys_1;\n            }\n        }\n        return [];\n    }\n    lang.keys = keys;\n    /**\n     * values of target object.\n     *\n     * @export\n     * @param {*} target\n     * @returns {any[]}\n     */\n    function values(target) {\n        if (typeCheck.isObject(target)) {\n            if (typeCheck.isFunction(Object.values)) {\n                return Object.values(target);\n            }\n            else {\n                var values_1 = [];\n                for (var name_2 in target) {\n                    values_1.push(target[name_2]);\n                }\n                return values_1;\n            }\n        }\n        return [];\n    }\n    lang.values = values;\n    /**\n     * assign\n     *\n     * @export\n     * @template T\n     * @param {T} target\n     * @param {...any[]} source\n     * @returns {T}\n     */\n    function assign(target, source1, source2, sources) {\n        if (sources && sources.length) {\n            sources.unshift(source2 || {});\n            sources.unshift(source1 || {});\n            return objectAssign.apply(void 0, [target].concat(sources));\n        }\n        else if (source2) {\n            return objectAssign(target, source1 || {}, source2);\n        }\n        else {\n            return objectAssign(target, source1 || {});\n        }\n    }\n    lang.assign = assign;\n    /**\n     * create an new object from target object omit some field.\n     *\n     * @export\n     * @param {ObjectMap<any>} target\n     * @param {...string[]} fields\n     * @returns {*}\n     */\n    function omit(target) {\n        var fields = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            fields[_i - 1] = arguments[_i];\n        }\n        if (typeCheck.isObject(target)) {\n            var result_1 = {};\n            keys(target).forEach(function (key) {\n                if (fields.indexOf(key) < 0) {\n                    result_1[key] = target[key];\n                }\n            });\n            return result_1;\n        }\n        else {\n            return target;\n        }\n    }\n    lang.omit = omit;\n    /**\n     * object has field or not.\n     *\n     * @export\n     * @param {ObjectMap<any>} target\n     * @returns\n     */\n    function hasField(target) {\n        return keys(target).length > 0;\n    }\n    lang.hasField = hasField;\n    /**\n     * for in opter for object or array.\n     *\n     * @export\n     * @template T\n     * @param {(ObjectMap<T> | T[])} target\n     * @param {(item: T, idx?: number|string) => void|boolean} iterator\n     */\n    function forIn(target, iterator) {\n        if (typeCheck.isArray(target)) {\n            target.forEach(iterator);\n        }\n        else if (typeCheck.isObject(target)) {\n            keys(target).forEach(function (key, idx) {\n                iterator(target[key], key);\n            });\n        }\n    }\n    lang.forIn = forIn;\n    /**\n     * find\n     *\n     * @template T\n     * @param {(ObjectMap<T> | T[])} target\n     * @param {((item: T, idx?: number | string) => boolean)} express\n     */\n    function find(target, express) {\n        var item;\n        forIn(target, function (it, idx) {\n            if (!item) {\n                if (express(it, idx)) {\n                    item = it;\n                    return false;\n                }\n                return true;\n            }\n            else {\n                return false;\n            }\n        });\n    }\n    lang.find = find;\n    /**\n     * get target type parent class.\n     *\n     * @export\n     * @param {Type<any>} target\n     * @returns {Type<any>}\n     */\n    function getParentClass(target) {\n        var p = Reflect.getPrototypeOf(target.prototype);\n        return typeCheck.isClass(p) ? p : p.constructor;\n    }\n    lang.getParentClass = getParentClass;\n    /**\n     * first.\n     *\n     * @export\n     * @template T\n     * @param {T[]} list\n     * @returns {T}\n     */\n    function first(list) {\n        if (typeCheck.isArray(list) && list.length) {\n            return list[0];\n        }\n        return null;\n    }\n    lang.first = first;\n    /**\n     * last.\n     *\n     * @export\n     * @template T\n     * @param {T[]} list\n     * @returns {T}\n     */\n    function last(list) {\n        if (typeCheck.isArray(list) && list.length) {\n            return list[list.length - 1];\n        }\n        return null;\n    }\n    lang.last = last;\n})(lang = exports.lang || (exports.lang = {}));\n\n\n\n\n});\n\nunwrapExports(lang_1);\nvar lang_2 = lang_1.lang;\n\nvar typeCheck = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n\n/**\n * check target is function or not.\n *\n * @export\n * @param {*} target\n * @returns\n */\nfunction isFunction(target) {\n    if (!target) {\n        return false;\n    }\n    return typeof target === 'function';\n}\nexports.isFunction = isFunction;\n/**\n * check Abstract class with @Abstract or not\n *\n * @export\n * @param {*} target\n * @returns {target is AbstractType<any>}\n */\nfunction isAbstractDecoratorClass(target) {\n    if (!isFunction(target)) {\n        return false;\n    }\n    if (Reflect.hasOwnMetadata('@Abstract', target)) {\n        return true;\n    }\n    return false;\n}\nexports.isAbstractDecoratorClass = isAbstractDecoratorClass;\n/**\n * get class name.\n *\n * @export\n * @param {AbstractType<any>} classType\n * @returns {string}\n */\nfunction getClassName(classType) {\n    if (!isFunction(classType)) {\n        return '';\n    }\n    if (/^[a-z]$/.test(classType.name)) {\n        return classType.classAnnations ? classType.classAnnations.name : classType.name;\n    }\n    return classType.name;\n}\nexports.getClassName = getClassName;\n/**\n * check target is class or not.\n *\n * @export\n * @param {*} target\n * @returns\n */\nfunction isClass(target) {\n    if (!isFunction(target)) {\n        return false;\n    }\n    if (target.prototype) {\n        if (!target.name || target.name === 'Object') {\n            return false;\n        }\n        if (Reflect.hasOwnMetadata('@Abstract', target)) {\n            return false;\n        }\n        var type = target;\n        // for uglify\n        if (/^[a-z]$/.test(type.name)) {\n            if (type.classAnnations && type.classAnnations.name) {\n                return true;\n            }\n            else {\n                return false;\n            }\n        }\n        else {\n            if (type.classAnnations && isString(type.classAnnations.name)) {\n                return true;\n            }\n            if (!/^[A-Z@]/.test(target.name)) {\n                return false;\n            }\n        }\n        // for IE 8, 9\n        if (!isNodejsEnv() && /MSIE [6-9]/.test(navigator.userAgent)) {\n            return true;\n        }\n        try {\n            target.arguments && target.caller;\n            return false;\n        }\n        catch (e) {\n            return true;\n        }\n    }\n    return false;\n}\nexports.isClass = isClass;\n/**\n * is run in nodejs or not.\n *\n * @export\n * @returns {boolean}\n */\nfunction isNodejsEnv() {\n    return (typeof process !== 'undefined') && (typeof process.versions.node !== 'undefined');\n}\nexports.isNodejsEnv = isNodejsEnv;\n/**\n * check target is token or not.\n *\n * @export\n * @param {*} target\n * @returns {target is Token<any>}\n */\nfunction isToken(target) {\n    if (!target) {\n        return false;\n    }\n    if (isString(target) || isSymbol(target) || isClass(target) || (isObject(target) && target instanceof Registration_1.Registration)) {\n        return true;\n    }\n    return false;\n}\nexports.isToken = isToken;\n/**\n * is target promise or not.\n *\n * @export\n * @param {*} target\n * @returns {target is Promise<any>}\n */\nfunction isPromise(target) {\n    if (!target) {\n        return false;\n    }\n    if (isFunction(target.then) && isFunction(target.catch)) {\n        return true;\n    }\n    return false;\n}\nexports.isPromise = isPromise;\n/**\n * is target rxjs observable or not.\n *\n * @export\n * @param {*} target\n * @returns {boolean}\n */\nfunction isObservable(target) {\n    if (!target && !isObject(target)) {\n        return false;\n    }\n    if (isFunction(target.subscribe) && isFunction(target.toPromise)) {\n        return true;\n    }\n    return false;\n}\nexports.isObservable = isObservable;\n/**\n * is target base object or not.\n * eg. {}, have not self constructor;\n * @export\n * @param {*} target\n * @returns {target is Promise<any>}\n */\nfunction isBaseObject(target) {\n    if (!target) {\n        return false;\n    }\n    if (target.constructor && target.constructor.name === 'Object') {\n        return true;\n    }\n    return false;\n}\nexports.isBaseObject = isBaseObject;\n/**\n * is metadata object or not.\n *\n * @export\n * @param {any} target\n * @param {string[]} [props]\n * @param {string[]} [extendsProps]\n * @returns {boolean}\n */\nfunction isMetadataObject(target, props, extendsProps) {\n    if (!target) {\n        return false;\n    }\n    if (isBaseType(target) || isSymbol(target) || target instanceof Registration_1.Registration || target instanceof RegExp || target instanceof Date) {\n        return false;\n    }\n    if (target.constructor && target.constructor.name !== 'Object') {\n        return false;\n    }\n    props = props || [];\n    if (extendsProps) {\n        props = extendsProps.concat(props);\n    }\n    if (props.length) {\n        return lang_1.lang.keys(target).some(function (n) { return props.indexOf(n) > 0; });\n    }\n    return true;\n}\nexports.isMetadataObject = isMetadataObject;\n/**\n * check object is class metadata or not.\n *\n * @export\n * @param {any} target\n * @param {string[]} [extendsProps]\n * @returns {boolean}\n */\nfunction isClassMetadata(target, extendsProps) {\n    return isMetadataObject(target, ['singleton', 'provide', 'alias', 'type'], extendsProps);\n}\nexports.isClassMetadata = isClassMetadata;\n/**\n * check object is param metadata or not.\n *\n * @export\n * @param {any} target\n * @param {string[]} [extendsProps]\n * @returns {boolean}\n */\nfunction isParamMetadata(target, extendsProps) {\n    return isMetadataObject(target, ['type', 'provider', 'index'], extendsProps);\n}\nexports.isParamMetadata = isParamMetadata;\n/**\n * check object is param prop metadata or not.\n *\n * @export\n * @param {any} target\n * @param {string[]} [extendsProps]\n * @returns {boolean}\n */\nfunction isParamPropMetadata(target, extendsProps) {\n    return isMetadataObject(target, ['type', 'provider', 'index'], extendsProps);\n}\nexports.isParamPropMetadata = isParamPropMetadata;\n/**\n * check object is property metadata or not.\n *\n * @export\n * @param {any} target\n * @param {string[]} [extendsProps]\n * @returns {boolean}\n */\nfunction isPropertyMetadata(target, extendsProps) {\n    return isMetadataObject(target, ['type', 'provider'], extendsProps);\n}\nexports.isPropertyMetadata = isPropertyMetadata;\n/**\n * check target is string or not.\n *\n * @export\n * @param {*} target\n * @returns {target is string}\n */\nfunction isString(target) {\n    return typeof target === 'string';\n}\nexports.isString = isString;\n/**\n * check target is boolean or not.\n *\n * @export\n * @param {*} target\n * @returns {target is boolean}\n */\nfunction isBoolean(target) {\n    return typeof target === 'boolean' || (target === true || target === false);\n}\nexports.isBoolean = isBoolean;\n/**\n * check target is number or not.\n *\n * @export\n * @param {*} target\n * @returns {target is number}\n */\nfunction isNumber(target) {\n    return typeof target === 'number';\n}\nexports.isNumber = isNumber;\n/**\n * check target is undefined or not.\n *\n * @export\n * @param {*} target\n * @returns {target is undefined}\n */\nfunction isUndefined(target) {\n    return typeof target === 'undefined' || target === undefined;\n}\nexports.isUndefined = isUndefined;\n/**\n * check target is unll or not.\n *\n * @export\n * @param {*} target\n * @returns {target is null}\n */\nfunction isNull(target) {\n    return target === null;\n}\nexports.isNull = isNull;\n/**\n * check target is array or not.\n *\n * @export\n * @param {*} target\n * @returns {target is Array<any>}\n */\nfunction isArray(target) {\n    return Array.isArray(target);\n}\nexports.isArray = isArray;\n/**\n * check target is object or not.\n *\n * @export\n * @param {*} target\n * @returns {target is object}\n */\nfunction isObject(target) {\n    var type = typeof target;\n    return target != null && (type === 'object' || type === 'function');\n}\nexports.isObject = isObject;\n/**\n * check target is date or not.\n *\n * @export\n * @param {*} target\n * @returns {target is Date}\n */\nfunction isDate(target) {\n    return isObject(target) && target instanceof Date;\n}\nexports.isDate = isDate;\n/**\n * check target is symbol or not.\n *\n * @export\n * @param {*} target\n * @returns {target is Symbol}\n */\nfunction isSymbol(target) {\n    return typeof target === 'symbol' || (isObject(target) && /^Symbol\\(/.test(target.toString()));\n}\nexports.isSymbol = isSymbol;\n/**\n * check target is regexp or not.\n *\n * @export\n * @param {*} target\n * @returns {target is RegExp}\n */\nfunction isRegExp(target) {\n    return target && target instanceof RegExp;\n}\nexports.isRegExp = isRegExp;\n/**\n * is base type or not.\n *\n * @export\n * @param {*} target\n * @returns {boolean}\n */\nfunction isBaseType(target) {\n    return isNull(target) || isUndefined(target) || isBoolean(target) || isString(target) || isNumber(target);\n}\nexports.isBaseType = isBaseType;\n\n\n\n\n});\n\nunwrapExports(typeCheck);\nvar typeCheck_1 = typeCheck.isFunction;\nvar typeCheck_2 = typeCheck.isAbstractDecoratorClass;\nvar typeCheck_3 = typeCheck.getClassName;\nvar typeCheck_4 = typeCheck.isClass;\nvar typeCheck_5 = typeCheck.isNodejsEnv;\nvar typeCheck_6 = typeCheck.isToken;\nvar typeCheck_7 = typeCheck.isPromise;\nvar typeCheck_8 = typeCheck.isObservable;\nvar typeCheck_9 = typeCheck.isBaseObject;\nvar typeCheck_10 = typeCheck.isMetadataObject;\nvar typeCheck_11 = typeCheck.isClassMetadata;\nvar typeCheck_12 = typeCheck.isParamMetadata;\nvar typeCheck_13 = typeCheck.isParamPropMetadata;\nvar typeCheck_14 = typeCheck.isPropertyMetadata;\nvar typeCheck_15 = typeCheck.isString;\nvar typeCheck_16 = typeCheck.isBoolean;\nvar typeCheck_17 = typeCheck.isNumber;\nvar typeCheck_18 = typeCheck.isUndefined;\nvar typeCheck_19 = typeCheck.isNull;\nvar typeCheck_20 = typeCheck.isArray;\nvar typeCheck_21 = typeCheck.isObject;\nvar typeCheck_22 = typeCheck.isDate;\nvar typeCheck_23 = typeCheck.isSymbol;\nvar typeCheck_24 = typeCheck.isRegExp;\nvar typeCheck_25 = typeCheck.isBaseType;\n\nvar MapSet_1 = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n\n/**\n * object map set.\n *\n * @export\n * @class MapSet\n * @template TKey\n * @template TVal\n */\nvar ObjectMapSet = /** @class */ (function () {\n    function ObjectMapSet() {\n        this.valueMap = {};\n        this.keyMap = {};\n    }\n    ObjectMapSet.prototype.clear = function () {\n        this.valueMap = {};\n        this.keyMap = {};\n    };\n    ObjectMapSet.prototype.getTypeKey = function (key) {\n        var strKey = '';\n        if (typeCheck.isString(key)) {\n            strKey = key;\n        }\n        else if (typeCheck.isFunction(key)) {\n            strKey = key.name;\n        }\n        else {\n            strKey = key.toString();\n        }\n        return strKey;\n    };\n    ObjectMapSet.prototype.keys = function () {\n        return lang_1.lang.values(this.keyMap);\n    };\n    ObjectMapSet.prototype.values = function () {\n        return lang_1.lang.values(this.valueMap);\n    };\n    ObjectMapSet.prototype.delete = function (key) {\n        var strkey = this.getTypeKey(key).toString();\n        try {\n            delete this.keyMap[strkey];\n            delete this.valueMap[strkey];\n            return true;\n        }\n        catch (_a) {\n            return false;\n        }\n    };\n    ObjectMapSet.prototype.forEach = function (callbackfn, thisArg) {\n        var _this = this;\n        lang_1.lang.forIn(this.keyMap, function (val, name) {\n            callbackfn(_this.valueMap[name], val, _this);\n        });\n    };\n    ObjectMapSet.prototype.get = function (key) {\n        var strKey = this.getTypeKey(key);\n        return this.valueMap[strKey];\n    };\n    ObjectMapSet.prototype.has = function (key) {\n        var strKey = this.getTypeKey(key);\n        return !typeCheck.isUndefined(this.keyMap[strKey]);\n    };\n    ObjectMapSet.prototype.set = function (key, value) {\n        var strKey = this.getTypeKey(key);\n        this.keyMap[strKey] = key;\n        this.valueMap[strKey] = value;\n        return this;\n    };\n    Object.defineProperty(ObjectMapSet.prototype, \"size\", {\n        get: function () {\n            return lang_1.lang.keys(this.keyMap).length;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    ObjectMapSet.classAnnations = { \"name\": \"ObjectMapSet\", \"params\": { \"constructor\": [], \"clear\": [], \"getTypeKey\": [\"key\"], \"keys\": [], \"values\": [], \"delete\": [\"key\"], \"forEach\": [\"callbackfn\", \"thisArg\"], \"get\": [\"key\"], \"has\": [\"key\"], \"set\": [\"key\", \"value\"] } };\n    return ObjectMapSet;\n}());\nexports.ObjectMapSet = ObjectMapSet;\n/**\n * map set.\n *\n * @export\n * @class MapSet\n * @template TKey\n * @template TVal\n */\nvar MapSet = /** @class */ (function () {\n    function MapSet() {\n        this.map = typeCheck.isClass(Map) ? new Map() : new ObjectMapSet();\n    }\n    MapSet.prototype.keys = function () {\n        return this.map.keys();\n    };\n    MapSet.prototype.values = function () {\n        return this.map.values();\n    };\n    MapSet.prototype.clear = function () {\n        this.map.clear();\n    };\n    MapSet.prototype.delete = function (key) {\n        return this.map.delete(key);\n    };\n    MapSet.prototype.forEach = function (callbackfn, thisArg) {\n        var map = this.map;\n        map.forEach(callbackfn, thisArg);\n    };\n    MapSet.prototype.get = function (key) {\n        return this.map.get(key);\n    };\n    MapSet.prototype.has = function (key) {\n        return this.map.has(key);\n    };\n    MapSet.prototype.set = function (key, value) {\n        this.map.set(key, value);\n        return this;\n    };\n    Object.defineProperty(MapSet.prototype, \"size\", {\n        get: function () {\n            return this.map.size;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    MapSet.classAnnations = { \"name\": \"MapSet\", \"params\": { \"constructor\": [], \"keys\": [], \"values\": [], \"clear\": [], \"delete\": [\"key\"], \"forEach\": [\"callbackfn\", \"thisArg\"], \"get\": [\"key\"], \"has\": [\"key\"], \"set\": [\"key\", \"value\"] } };\n    return MapSet;\n}());\nexports.MapSet = MapSet;\n\n\n\n\n});\n\nunwrapExports(MapSet_1);\nvar MapSet_2 = MapSet_1.ObjectMapSet;\nvar MapSet_3 = MapSet_1.MapSet;\n\nvar PromiseUtil_1 = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n/**\n * defer\n *\n * @export\n * @class Defer\n * @template T\n */\nvar Defer = /** @class */ (function () {\n    function Defer() {\n        var _this = this;\n        this.promise = new Promise(function (resolve, reject) {\n            _this.resolve = resolve;\n            _this.reject = reject;\n        });\n    }\n    Defer.create = function (then) {\n        var defer = new Defer();\n        if (then) {\n            defer.promise = defer.promise.then(then);\n            return defer;\n        }\n        else {\n            return defer;\n        }\n    };\n    Defer.classAnnations = { \"name\": \"Defer\", \"params\": { \"create\": [\"then\"], \"constructor\": [] } };\n    return Defer;\n}());\nexports.Defer = Defer;\nvar PromiseUtil;\n(function (PromiseUtil) {\n    /**\n     * foreach opter for promises.\n     *\n     * @export\n     * @template T\n     * @param {((T | PromiseLike<T> | ((value: T) => T | PromiseLike<T>))[])} promises\n     * @param {Express<T, any>} express\n     * @param {T} [defVal]\n     * @returns\n     */\n    function forEach(promises, express, defVal) {\n        var defer = new Defer();\n        var pf = Promise.resolve(defVal);\n        var length = promises ? promises.length : 0;\n        if (length) {\n            promises.forEach(function (p, idx) {\n                pf = pf.then(function (v) { return typeCheck.isFunction(p) ? p(v) : p; })\n                    .then(function (data) {\n                    if (express(data) === false) {\n                        defer.resolve('complete');\n                        return Promise.reject('complete');\n                    }\n                    else if (idx === length - 1) {\n                        defer.resolve('complete');\n                        return Promise.reject('complete');\n                    }\n                    return data;\n                });\n            });\n            pf.catch(function (err) {\n                return err;\n            });\n        }\n        else {\n            defer.reject('array empty.');\n        }\n        return defer.promise;\n    }\n    PromiseUtil.forEach = forEach;\n    /**\n     * run promise step by step.\n     *\n     * @export\n     * @template T\n     * @param {((T | PromiseLike<T> | ((value: T) => T | PromiseLike<T>))[])} promises\n     * @returns\n     */\n    function step(promises) {\n        var result = Promise.resolve(null);\n        promises.forEach(function (p) {\n            result = result.then(function (v) { return typeCheck.isFunction(p) ? p(v) : p; });\n        });\n        return result;\n    }\n    PromiseUtil.step = step;\n    /**\n     * find first validate value from promises.\n     *\n     * @export\n     * @template T\n     * @param {(...(T | PromiseLike<T> | ((value: T) => T | PromiseLike<T>))[])} promises\n     * @param {Express<T, boolean>} validate\n     * @returns\n     */\n    function find(promises, filter, defVal) {\n        var defer = new Defer();\n        forEach(promises, function (val) {\n            if (filter(val)) {\n                defer.resolve(val);\n                return false;\n            }\n            return true;\n        }, defVal)\n            .then(function () { return defer.resolve(null); })\n            .catch(function () {\n            defer.resolve(null);\n        });\n        return defer.promise;\n    }\n    PromiseUtil.find = find;\n})(PromiseUtil = exports.PromiseUtil || (exports.PromiseUtil = {}));\n\n\n\n\n});\n\nunwrapExports(PromiseUtil_1);\nvar PromiseUtil_2 = PromiseUtil_1.Defer;\nvar PromiseUtil_3 = PromiseUtil_1.PromiseUtil;\n\nvar utils = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\ntslib_1.__exportStar(typeCheck, exports);\ntslib_1.__exportStar(MapSet_1, exports);\ntslib_1.__exportStar(lang_1, exports);\ntslib_1.__exportStar(PromiseUtil_1, exports);\n\n\n\n\n});\n\nunwrapExports(utils);\n\nvar Registration_1 = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n/**\n * inject token.\n * @export\n * @class Registration\n * @template T\n */\nvar Registration = /** @class */ (function () {\n    /**\n     * Creates an instance of Registration.\n     * @param {(Token<T> | Token<any>)} provideType\n     * @param {string} desc\n     * @memberof Registration\n     */\n    function Registration(provideType, desc) {\n        this.type = 'Reg';\n        if (provideType instanceof Registration) {\n            this.classType = provideType.getProvide();\n            var pdec = provideType.getDesc();\n            if (pdec && desc && pdec !== desc) {\n                this.desc = pdec + '_' + desc;\n            }\n            else {\n                this.desc = desc;\n            }\n        }\n        else {\n            this.classType = provideType;\n            this.desc = desc;\n        }\n    }\n    Registration.prototype.getProvide = function () {\n        return this.classType;\n    };\n    /**\n     * get class.\n     *\n     * @returns\n     * @memberof Registration\n     */\n    Registration.prototype.getClass = function () {\n        if (utils.isClass(this.classType)) {\n            return this.classType;\n        }\n        return null;\n    };\n    /**\n     * get desc.\n     *\n     * @returns\n     * @memberof Registration\n     */\n    Registration.prototype.getDesc = function () {\n        return this.desc;\n    };\n    /**\n     * to string.\n     *\n     * @returns {string}\n     * @memberof Registration\n     */\n    Registration.prototype.toString = function () {\n        var name = '';\n        if (utils.isFunction(this.classType)) {\n            name = \"{\" + utils.getClassName(this.classType) + \"}\";\n        }\n        else if (this.classType) {\n            name = this.classType.toString();\n        }\n        return (this.type + \" \" + name + \" \" + this.desc).trim();\n    };\n    Registration.classAnnations = { \"name\": \"Registration\", \"params\": { \"constructor\": [\"provideType\", \"desc\"], \"getProvide\": [], \"getClass\": [], \"getDesc\": [], \"toString\": [] } };\n    return Registration;\n}());\nexports.Registration = Registration;\n\n\n\n\n});\n\nunwrapExports(Registration_1);\nvar Registration_2 = Registration_1.Registration;\n\nvar InjectToken_1 = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n\n/**\n * inject token.\n *\n * @export\n * @class InjectToken\n * @extends {Registration<T>}\n * @template T\n */\nvar InjectToken = /** @class */ (function (_super) {\n    tslib_1.__extends(InjectToken, _super);\n    function InjectToken(desc) {\n        return _super.call(this, desc, '') || this;\n    }\n    InjectToken.classAnnations = { \"name\": \"InjectToken\", \"params\": { \"constructor\": [\"desc\"] } };\n    return InjectToken;\n}(Registration_1.Registration));\nexports.InjectToken = InjectToken;\n\n\n\n\n});\n\nunwrapExports(InjectToken_1);\nvar InjectToken_2 = InjectToken_1.InjectToken;\n\nvar IContainer = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n/**\n * IContainer token.\n * it is a symbol id, you can use  @Inject, @Autowried or @Param to get container instance in yourself class.\n */\nexports.ContainerToken = new InjectToken_1.InjectToken('DI_IContainer');\n\n\n\n\n});\n\nunwrapExports(IContainer);\nvar IContainer_1 = IContainer.ContainerToken;\n\nvar types = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * State of type in ioc.\n *\n * @export\n * @enum {number}\n */\nvar IocState;\n(function (IocState) {\n    IocState[\"design\"] = \"design\";\n    IocState[\"runtime\"] = \"runtime\";\n})(IocState = exports.IocState || (exports.IocState = {}));\n/**\n * iterate way.\n *\n * @export\n * @enum {number}\n */\nvar Mode;\n(function (Mode) {\n    /**\n     * route up. iterate in parents.\n     */\n    Mode[Mode[\"route\"] = 1] = \"route\";\n    /**\n     * iterate in children.\n     */\n    Mode[Mode[\"children\"] = 2] = \"children\";\n    /**\n     * iterate as tree map. node first\n     */\n    Mode[Mode[\"traverse\"] = 3] = \"traverse\";\n    /**\n     * iterate as tree map. node last\n     */\n    Mode[Mode[\"traverseLast\"] = 4] = \"traverseLast\";\n})(Mode = exports.Mode || (exports.Mode = {}));\n\n\n\n\n});\n\nunwrapExports(types);\nvar types_1 = types.IocState;\nvar types_2 = types.Mode;\n\nvar IMethodAccessor = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n/**\n * IMethodAccessor interface symbol.\n * it is a symbol id, you can register yourself MethodAccessor for this.\n */\nexports.MethodAccessorToken = new InjectToken_1.InjectToken('DI_IMethodAccessor');\n\n\n\n\n});\n\nunwrapExports(IMethodAccessor);\nvar IMethodAccessor_1 = IMethodAccessor.MethodAccessorToken;\n\nvar NullComponent_1 = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * null component.\n *\n * @export\n * @class NullComponent\n * @implements {IComponent}\n */\nvar NullComponent = /** @class */ (function () {\n    function NullComponent() {\n    }\n    NullComponent.prototype.isEmpty = function () {\n        return true;\n    };\n    NullComponent.prototype.add = function (action) {\n        return this;\n    };\n    NullComponent.prototype.remove = function (action) {\n        return this;\n    };\n    NullComponent.prototype.find = function (express, mode) {\n        return exports.NullNode;\n    };\n    NullComponent.prototype.filter = function (express, mode) {\n        return [];\n    };\n    NullComponent.prototype.each = function (express, mode) {\n    };\n    NullComponent.prototype.trans = function (express) {\n    };\n    NullComponent.prototype.transAfter = function (express) {\n    };\n    NullComponent.prototype.routeUp = function (express) {\n    };\n    NullComponent.prototype.equals = function (node) {\n        return node === exports.NullNode;\n    };\n    NullComponent.prototype.empty = function () {\n        return exports.NullNode;\n    };\n    NullComponent.classAnnations = { \"name\": \"NullComponent\", \"params\": { \"isEmpty\": [], \"add\": [\"action\"], \"remove\": [\"action\"], \"find\": [\"express\", \"mode\"], \"filter\": [\"express\", \"mode\"], \"each\": [\"express\", \"mode\"], \"trans\": [\"express\"], \"transAfter\": [\"express\"], \"routeUp\": [\"express\"], \"equals\": [\"node\"], \"empty\": [] } };\n    return NullComponent;\n}());\nexports.NullComponent = NullComponent;\n/**\n * Null node\n */\nexports.NullNode = new NullComponent();\n\n\n\n\n});\n\nunwrapExports(NullComponent_1);\nvar NullComponent_2 = NullComponent_1.NullComponent;\nvar NullComponent_3 = NullComponent_1.NullNode;\n\nvar GComposite_1 = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n\n\n/**\n * generics composite\n *\n * @export\n * @class GComposite\n * @implements {GComponent<T>}\n * @template T\n */\nvar GComposite = /** @class */ (function () {\n    function GComposite(name) {\n        this.name = name;\n        this.children = [];\n    }\n    GComposite.prototype.add = function (node) {\n        node.parent = this;\n        this.children.push(node);\n        return this;\n    };\n    GComposite.prototype.remove = function (node) {\n        var component;\n        if (utils.isString(node)) {\n            component = this.find(function (cmp) { return utils.isString(node) ? cmp.name === node : cmp.equals(node); });\n        }\n        else if (node) {\n            component = node;\n        }\n        else {\n            component = this;\n        }\n        if (!component.parent) {\n            return this;\n        }\n        else if (this.equals(component.parent)) {\n            this.children.splice(this.children.indexOf(component), 1);\n            component.parent = null;\n            return this;\n        }\n        else {\n            component.parent.remove(component);\n            return null;\n        }\n    };\n    GComposite.prototype.find = function (express, mode) {\n        var component;\n        this.each(function (item) {\n            if (component) {\n                return false;\n            }\n            var isFinded = utils.isFunction(express) ? express(item) : express === (item);\n            if (isFinded) {\n                component = item;\n                return false;\n            }\n            return true;\n        }, mode);\n        return (component || this.empty());\n    };\n    GComposite.prototype.filter = function (express, mode) {\n        var nodes = [];\n        this.each(function (item) {\n            if (express(item)) {\n                nodes.push(item);\n            }\n        }, mode);\n        return nodes;\n    };\n    GComposite.prototype.each = function (iterate, mode) {\n        mode = mode || types.Mode.traverse;\n        var r;\n        switch (mode) {\n            case types.Mode.route:\n                r = this.routeUp(iterate);\n                break;\n            case types.Mode.children:\n                r = this.eachChildren(iterate);\n                break;\n            case types.Mode.traverse:\n                r = this.trans(iterate);\n                break;\n            case types.Mode.traverseLast:\n                r = this.transAfter(iterate);\n                break;\n            default:\n                r = this.trans(iterate);\n                break;\n        }\n        return r;\n    };\n    GComposite.prototype.eachChildren = function (iterate) {\n        (this.children || []).forEach(function (item) {\n            return iterate(item);\n        });\n    };\n    /**\n     *do express work in routing.\n     *\n     *@param {Express<T, void | boolean>} express\n     *\n     *@memberOf IComponent\n     */\n    GComposite.prototype.routeUp = function (iterate) {\n        var curr = this;\n        if (iterate(curr) === false) {\n            return false;\n        }\n        \n        if (this.parent && this.parent.routeUp) {\n            return this.parent.routeUp(iterate);\n        }\n    };\n    /**\n     *translate all sub context to do express work.\n     *\n     *@param {Express<T, void | boolean>} express\n     *\n     *@memberOf IComponent\n     */\n    GComposite.prototype.trans = function (express) {\n        var curr = this;\n        if (express(curr) === false) {\n            return false;\n        }\n        var children = this.children || [];\n        for (var i = 0; i < children.length; i++) {\n            var result = children[i].trans(express);\n            if (result === false) {\n                return result;\n            }\n        }\n        return true;\n    };\n    GComposite.prototype.transAfter = function (express) {\n        var children = this.children || [];\n        for (var i = 0; i < children.length; i++) {\n            var result = children[i].transAfter(express);\n            if (result === false) {\n                return false;\n            }\n        }\n        var curr = this;\n        if (express(curr) === false) {\n            return false;\n        }\n        return true;\n    };\n    GComposite.prototype.equals = function (node) {\n        return this === node;\n    };\n    GComposite.prototype.empty = function () {\n        return NullComponent_1.NullNode;\n    };\n    GComposite.prototype.isEmpty = function () {\n        return this.equals(this.empty());\n    };\n    GComposite.classAnnations = { \"name\": \"GComposite\", \"params\": { \"constructor\": [\"name\"], \"add\": [\"node\"], \"remove\": [\"node\"], \"find\": [\"express\", \"mode\"], \"filter\": [\"express\", \"mode\"], \"each\": [\"iterate\", \"mode\"], \"eachChildren\": [\"iterate\"], \"routeUp\": [\"iterate\"], \"trans\": [\"express\"], \"transAfter\": [\"express\"], \"equals\": [\"node\"], \"empty\": [], \"isEmpty\": [] } };\n    return GComposite;\n}());\nexports.GComposite = GComposite;\n\n\n\n\n});\n\nunwrapExports(GComposite_1);\nvar GComposite_2 = GComposite_1.GComposite;\n\nvar Composite_1 = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n\n/**\n * compoiste.\n *\n * @export\n * @class Composite\n * @implements {IComponent}\n */\nvar Composite = /** @class */ (function (_super) {\n    tslib_1.__extends(Composite, _super);\n    function Composite(name) {\n        return _super.call(this, name) || this;\n    }\n    Composite.prototype.find = function (express, mode) {\n        return _super.prototype.find.call(this, express, mode);\n    };\n    Composite.prototype.filter = function (express, mode) {\n        return _super.prototype.filter.call(this, express, mode);\n    };\n    Composite.prototype.each = function (express, mode) {\n        return _super.prototype.each.call(this, express, mode);\n    };\n    Composite.prototype.eachChildren = function (express) {\n        _super.prototype.eachChildren.call(this, express);\n    };\n    Composite.classAnnations = { \"name\": \"Composite\", \"params\": { \"constructor\": [\"name\"], \"find\": [\"express\", \"mode\"], \"filter\": [\"express\", \"mode\"], \"each\": [\"express\", \"mode\"], \"eachChildren\": [\"express\"] } };\n    return Composite;\n}(GComposite_1.GComposite));\nexports.Composite = Composite;\n\n\n\n\n});\n\nunwrapExports(Composite_1);\nvar Composite_2 = Composite_1.Composite;\n\nvar components = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\ntslib_1.__exportStar(Composite_1, exports);\ntslib_1.__exportStar(GComposite_1, exports);\ntslib_1.__exportStar(NullComponent_1, exports);\n\n\n\n\n});\n\nunwrapExports(components);\n\nvar NullAction = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n\nvar NullActionClass = /** @class */ (function (_super) {\n    tslib_1.__extends(NullActionClass, _super);\n    function NullActionClass() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    NullActionClass.prototype.insert = function (action, index) {\n        return this;\n    };\n    NullActionClass.prototype.execute = function (container, data, name) {\n    };\n    NullActionClass.prototype.empty = function () {\n        return exports.NullAction;\n    };\n    NullActionClass.classAnnations = { \"name\": \"NullActionClass\", \"params\": { \"insert\": [\"action\", \"index\"], \"execute\": [\"container\", \"data\", \"name\"], \"empty\": [] } };\n    return NullActionClass;\n}(components.NullComponent));\n/**\n * Null Action\n */\nexports.NullAction = new NullActionClass();\n\n\n\n\n});\n\nunwrapExports(NullAction);\nvar NullAction_1 = NullAction.NullAction;\n\nvar ActionComposite_1 = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n\n\n/**\n * action composite\n *\n * @export\n * @class ActionComposite\n * @extends {GComposite<ActionComponent>}\n * @implements {ActionComponent}\n */\nvar ActionComposite = /** @class */ (function (_super) {\n    tslib_1.__extends(ActionComposite, _super);\n    function ActionComposite(name) {\n        var _this = _super.call(this, name) || this;\n        _this.children = [];\n        return _this;\n    }\n    ActionComposite.prototype.insert = function (node, index) {\n        node.parent = this;\n        if (index < 0) {\n            index = 0;\n        }\n        else if (index >= this.children.length) {\n            index = this.children.length - 1;\n        }\n        this.children.splice(index, 0, node);\n        return this;\n    };\n    ActionComposite.prototype.execute = function (container, data, name) {\n        if (name) {\n            this.find(function (it) { return it.name === name; })\n                .execute(container, data);\n        }\n        else {\n            this.trans(function (action) {\n                if (action instanceof ActionComposite) {\n                    action.working(container, data);\n                }\n            });\n        }\n    };\n    ActionComposite.prototype.empty = function () {\n        return NullAction.NullAction;\n    };\n    ActionComposite.prototype.working = function (container, data) {\n        // do nothing.\n    };\n    ActionComposite.classAnnations = { \"name\": \"ActionComposite\", \"params\": { \"constructor\": [\"name\"], \"insert\": [\"node\", \"index\"], \"execute\": [\"container\", \"data\", \"name\"], \"empty\": [], \"working\": [\"container\", \"data\"] } };\n    return ActionComposite;\n}(components.GComposite));\nexports.ActionComposite = ActionComposite;\n\n\n\n\n});\n\nunwrapExports(ActionComposite_1);\nvar ActionComposite_2 = ActionComposite_1.ActionComposite;\n\nvar LifeState_1 = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * life state.\n *\n * @export\n * @enum {number}\n */\nvar LifeState;\n(function (LifeState) {\n    /**\n     * before create constructor Args\n     */\n    LifeState[\"beforeCreateArgs\"] = \"beforeCreateArgs\";\n    /**\n     * before constructor advice action.\n     */\n    LifeState[\"beforeConstructor\"] = \"beforeConstructor\";\n    /**\n     * after constructor advice action.\n     */\n    LifeState[\"afterConstructor\"] = \"afterConstructor\";\n    /**\n     * on init.\n     */\n    LifeState[\"onInit\"] = \"onInit\";\n    /**\n     * after init.\n     */\n    LifeState[\"AfterInit\"] = \"AfterInit\";\n})(LifeState = exports.LifeState || (exports.LifeState = {}));\n\n\n\n\n});\n\nunwrapExports(LifeState_1);\nvar LifeState_2 = LifeState_1.LifeState;\n\nvar CoreActions_1 = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * cores decorator actions\n *\n * @export\n */\nvar CoreActions;\n(function (CoreActions) {\n    /**\n     * the action bind parameter type form metadata.\n     */\n    CoreActions[\"bindParameterType\"] = \"bindParameterType\";\n    /**\n     * the action bind Property type from metadata.\n     */\n    CoreActions[\"bindPropertyType\"] = \"bindPropertyType\";\n    /**\n     * inject property action.\n     */\n    CoreActions[\"injectProperty\"] = \"injectProperty\";\n    /**\n     * class provider bind action.\n     */\n    CoreActions[\"bindProvider\"] = \"bindProvider\";\n    /**\n     * bind parameter provider action.\n     */\n    CoreActions[\"bindParameterProviders\"] = \"bindParameterProviders\";\n    /**\n     * cache action.\n     */\n    CoreActions[\"cache\"] = \"cache\";\n    /**\n     * component init action.  after constructor befor property inject.\n     */\n    CoreActions[\"componentBeforeInit\"] = \"componentBeforeInit\";\n    /**\n     * component on init hooks. after property inject.\n     */\n    CoreActions[\"componentInit\"] = \"componentInit\";\n    /**\n     * component after init hooks. after component init.\n     */\n    CoreActions[\"componentAfterInit\"] = \"componentAfterInit\";\n    /**\n     * singleton action.\n     */\n    CoreActions[\"singletion\"] = \"singletion\";\n    /**\n     * autorun action.\n     */\n    CoreActions[\"autorun\"] = \"autorun\";\n    /**\n     * method autorun action.\n     */\n    CoreActions[\"methodAutorun\"] = \"methodAutorun\";\n})(CoreActions = exports.CoreActions || (exports.CoreActions = {}));\n\n\n\n\n});\n\nunwrapExports(CoreActions_1);\nvar CoreActions_2 = CoreActions_1.CoreActions;\n\nvar ArgsIterator_1 = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\nvar ArgsIterator = /** @class */ (function () {\n    function ArgsIterator(args) {\n        this.args = args;\n        this.idx = -1;\n        this.metadata = null;\n    }\n    ArgsIterator.prototype.isCompeted = function () {\n        return this.idx >= this.args.length;\n    };\n    ArgsIterator.prototype.end = function () {\n        this.idx = this.args.length;\n    };\n    ArgsIterator.prototype.next = function (express) {\n        this.idx++;\n        if (this.isCompeted()) {\n            return null;\n        }\n        var arg = this.args[this.idx];\n        if (express.isMetadata && express.isMetadata(arg)) {\n            this.metadata = utils.lang.assign(this.metadata || {}, arg);\n            this.end();\n        }\n        else if (express.match(arg)) {\n            this.metadata = this.metadata || {};\n            express.setMetadata(this.metadata, arg);\n        }\n        else if (utils.isMetadataObject(arg)) { // when match failed then check is base metadata.\n            this.metadata = utils.lang.assign(this.metadata || {}, arg);\n            this.end();\n        }\n        else {\n            this.end();\n        }\n    };\n    ArgsIterator.prototype.getArgs = function () {\n        return this.args;\n    };\n    ArgsIterator.prototype.getMetadata = function () {\n        return this.metadata;\n    };\n    ArgsIterator.classAnnations = { \"name\": \"ArgsIterator\", \"params\": { \"constructor\": [\"args\"], \"isCompeted\": [], \"end\": [], \"next\": [\"express\"], \"getArgs\": [], \"getMetadata\": [] } };\n    return ArgsIterator;\n}());\nexports.ArgsIterator = ArgsIterator;\n\n\n\n\n});\n\nunwrapExports(ArgsIterator_1);\nvar ArgsIterator_2 = ArgsIterator_1.ArgsIterator;\n\nvar DecoratorType_1 = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * decorator type category.\n *\n * @export\n * @enum {number}\n */\nvar DecoratorType;\n(function (DecoratorType) {\n    /**\n     * Class decorator\n     */\n    DecoratorType[DecoratorType[\"Class\"] = 1] = \"Class\";\n    /**\n     * Parameter decorator\n     */\n    DecoratorType[DecoratorType[\"Parameter\"] = 2] = \"Parameter\";\n    /**\n     * Property decorator\n     */\n    DecoratorType[DecoratorType[\"Property\"] = 4] = \"Property\";\n    /**\n     * Method decorator\n     */\n    DecoratorType[DecoratorType[\"Method\"] = 8] = \"Method\";\n    /**\n     * decorator for any where.\n     */\n    DecoratorType[DecoratorType[\"All\"] = 13] = \"All\";\n})(DecoratorType = exports.DecoratorType || (exports.DecoratorType = {}));\n\n\n\n\n});\n\nunwrapExports(DecoratorType_1);\nvar DecoratorType_2 = DecoratorType_1.DecoratorType;\n\nvar DecoratorFactory = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n\n\n\nexports.ParamerterName = 'paramerter_names';\n/**\n * create dectorator for class params props methods.\n *\n * @export\n * @template T\n * @param {string} name\n * @param {MetadataAdapter} [adapter]  metadata adapter\n * @param {MetadataExtends<T>} [metadataExtends] add extents for metadata.\n * @returns {*}\n */\nfunction createDecorator(name, adapter, metadataExtends) {\n    var metaName = \"@\" + name;\n    var factory = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        var metadata = null;\n        if (args.length < 1) {\n            return function () {\n                var args = [];\n                for (var _i = 0; _i < arguments.length; _i++) {\n                    args[_i] = arguments[_i];\n                }\n                return storeMetadata(name, metaName, args, metadata, metadataExtends);\n            };\n        }\n        metadata = argsToMetadata(args, adapter);\n        if (metadata) {\n            return function () {\n                var args = [];\n                for (var _i = 0; _i < arguments.length; _i++) {\n                    args[_i] = arguments[_i];\n                }\n                return storeMetadata(name, metaName, args, metadata, metadataExtends);\n            };\n        }\n        else {\n            if (args.length === 1) {\n                if (!utils.isClass(args[0])) {\n                    return function () {\n                        var args = [];\n                        for (var _i = 0; _i < arguments.length; _i++) {\n                            args[_i] = arguments[_i];\n                        }\n                        return storeMetadata(name, metaName, args, metadata, metadataExtends);\n                    };\n                }\n            }\n        }\n        return storeMetadata(name, metaName, args, metadata, metadataExtends);\n    };\n    factory.toString = function () { return metaName; };\n    factory.decoratorType = DecoratorType_1.DecoratorType.All;\n    return factory;\n}\nexports.createDecorator = createDecorator;\nfunction argsToMetadata(args, adapter) {\n    var metadata = null;\n    if (args.length) {\n        if (adapter) {\n            var iterator = new ArgsIterator_1.ArgsIterator(args);\n            adapter(iterator);\n            metadata = iterator.getMetadata();\n        }\n        else if (args.length === 1 && utils.isMetadataObject(args[0])) {\n            metadata = args[0];\n        }\n    }\n    return metadata;\n}\nfunction storeMetadata(name, metaName, args, metadata, metadataExtends) {\n    var target;\n    switch (args.length) {\n        case 1:\n            target = args[0];\n            if (utils.isClass(target) || utils.isAbstractDecoratorClass(target)) {\n                setTypeMetadata(name, metaName, target, metadata, metadataExtends);\n                return target;\n            }\n            break;\n        case 2:\n            target = args[0];\n            var propertyKey = args[1];\n            setPropertyMetadata(name, metaName, target, propertyKey, metadata, metadataExtends);\n            break;\n        case 3:\n            if (utils.isNumber(args[2])) {\n                target = args[0];\n                var propertyKey_1 = args[1];\n                var parameterIndex = args[2];\n                setParamMetadata(name, metaName, target, propertyKey_1, parameterIndex, metadata, metadataExtends);\n            }\n            else if (utils.isUndefined(args[2])) {\n                target = args[0];\n                var propertyKey_2 = args[1];\n                setPropertyMetadata(name, metaName, target, propertyKey_2, metadata, metadataExtends);\n            }\n            else {\n                target = args[0];\n                var propertyKey_3 = args[1];\n                var descriptor = args[2];\n                setMethodMetadata(name, metaName, target, propertyKey_3, descriptor, metadata, metadataExtends);\n                return descriptor;\n            }\n            break;\n        default:\n            throw new Error(\"Invalid @\" + name + \" Decorator declaration.\");\n    }\n}\n/**\n * get all class metadata of one specail decorator in target type.\n *\n * @export\n * @template T\n * @param {(string | Function)} decorator\n * @param {Type<any>} target\n * @returns\n */\nfunction getTypeMetadata(decorator, target) {\n    var annotations = Reflect.getOwnMetadata(utils.isFunction(decorator) ? decorator.toString() : decorator, target);\n    annotations = utils.isArray(annotations) ? annotations : [];\n    return annotations;\n}\nexports.getTypeMetadata = getTypeMetadata;\n/**\n * get own class metadata of one specail decorator in target type.\n *\n * @export\n * @template T\n * @param {(string | Function)} decorator\n * @param {Type<any>} target\n * @returns\n */\nfunction getOwnTypeMetadata(decorator, target) {\n    var annotations = Reflect.getOwnMetadata(utils.isFunction(decorator) ? decorator.toString() : decorator, target);\n    annotations = utils.isArray(annotations) ? annotations : [];\n    return annotations;\n}\nexports.getOwnTypeMetadata = getOwnTypeMetadata;\n/**\n * has class decorator metadata.\n *\n * @export\n * @param {(string | Function)} decorator\n * @param {(Type<any> | object)} target\n * @returns {boolean}\n */\nfunction hasClassMetadata(decorator, target) {\n    var name = utils.isFunction(decorator) ? decorator.toString() : decorator;\n    return Reflect.hasMetadata(name, target);\n}\nexports.hasClassMetadata = hasClassMetadata;\n/**\n * has own class decorator metadata.\n *\n * @export\n * @param {(string | Function)} decorator\n * @param {(Type<any> | object)} target\n * @returns {boolean}\n */\nfunction hasOwnClassMetadata(decorator, target) {\n    var name = utils.isFunction(decorator) ? decorator.toString() : decorator;\n    return Reflect.hasOwnMetadata(name, target);\n}\nexports.hasOwnClassMetadata = hasOwnClassMetadata;\nfunction setTypeMetadata(name, metaName, target, metadata, metadataExtends) {\n    var annotations = getOwnTypeMetadata(metaName, target).slice(0);\n    // let designParams = Reflect.getMetadata('design:paramtypes', target) || [];\n    var typeMetadata = (metadata || {});\n    if (!typeMetadata.type) {\n        typeMetadata.type = target;\n    }\n    typeMetadata.decorator = name;\n    if (metadataExtends) {\n        typeMetadata = metadataExtends(typeMetadata);\n    }\n    annotations.unshift(typeMetadata);\n    setParamerterNames(target);\n    Reflect.defineMetadata(metaName, annotations, target);\n}\nvar methodMetadataExt = '__method';\n/**\n * get all method metadata of one specail decorator in target type.\n *\n * @export\n * @template T\n * @param {(string | Function)} decorator\n * @param {Type<any>} target\n * @returns {ObjectMap<T[]>}\n */\nfunction getMethodMetadata(decorator, target) {\n    var name = utils.isFunction(decorator) ? decorator.toString() : decorator;\n    var meta = Reflect.getMetadata(name + methodMetadataExt, target);\n    if (!meta || utils.isArray(meta) || !utils.lang.hasField(meta)) {\n        meta = Reflect.getMetadata(name + methodMetadataExt, target.constructor);\n    }\n    return utils.isArray(meta) ? {} : (meta || {});\n}\nexports.getMethodMetadata = getMethodMetadata;\n/**\n * get own method metadata of one specail decorator in target type.\n *\n * @export\n * @template T\n * @param {(string | Function)} decorator\n * @param {Type<any>} target\n * @returns {ObjectMap<T[]>}\n */\nfunction getOwnMethodMetadata(decorator, target) {\n    var name = utils.isFunction(decorator) ? decorator.toString() : decorator;\n    var meta = Reflect.getOwnMetadata(name + methodMetadataExt, target);\n    if (!meta || utils.isArray(meta) || !utils.lang.hasField(meta)) {\n        meta = Reflect.getOwnMetadata(name + methodMetadataExt, target.constructor);\n    }\n    return utils.isArray(meta) ? {} : (meta || {});\n}\nexports.getOwnMethodMetadata = getOwnMethodMetadata;\n/**\n * has own method decorator metadata.\n *\n * @export\n * @param {(string | Function)} decorator\n * @param {Type<any>} target\n * @param {(string | symbol)} [propertyKey]\n * @returns {boolean}\n */\nfunction hasOwnMethodMetadata(decorator, target, propertyKey) {\n    var name = utils.isFunction(decorator) ? decorator.toString() : decorator;\n    if (propertyKey) {\n        var meta = getOwnMethodMetadata(name, target);\n        return meta && meta.hasOwnProperty(propertyKey);\n    }\n    else {\n        return Reflect.hasOwnMetadata(name + methodMetadataExt, target);\n    }\n}\nexports.hasOwnMethodMetadata = hasOwnMethodMetadata;\n/**\n * has method decorator metadata.\n *\n * @export\n * @param {(string | Function)} decorator\n * @param {Type<any>} target\n * @param {(string | symbol)} [propertyKey]\n * @returns {boolean}\n */\nfunction hasMethodMetadata(decorator, target, propertyKey) {\n    var name = utils.isFunction(decorator) ? decorator.toString() : decorator;\n    if (propertyKey) {\n        var meta = getMethodMetadata(name, target);\n        return meta && meta.hasOwnProperty(propertyKey);\n    }\n    else {\n        return Reflect.hasMetadata(name + methodMetadataExt, target);\n    }\n}\nexports.hasMethodMetadata = hasMethodMetadata;\nfunction setMethodMetadata(name, metaName, target, propertyKey, descriptor, metadata, metadataExtends) {\n    var meta = utils.lang.assign({}, getOwnMethodMetadata(metaName, target));\n    meta[propertyKey] = meta[propertyKey] || [];\n    var methodMeadata = (metadata || {});\n    methodMeadata.decorator = name;\n    methodMeadata.propertyKey = propertyKey;\n    // methodMeadata.descriptor = descriptor;\n    if (metadataExtends) {\n        methodMeadata = metadataExtends(methodMeadata);\n    }\n    meta[propertyKey].unshift(methodMeadata);\n    Reflect.defineMetadata(metaName + methodMetadataExt, meta, target.constructor);\n}\nvar propertyMetadataExt = '__props';\n/**\n * get all property metadata of one specail decorator in target type.\n *\n * @export\n * @template T\n * @param {(string | Function)} decorator\n * @param {Type<any>} target\n * @returns {ObjectMap<T[]>}\n */\nfunction getPropertyMetadata(decorator, target) {\n    var name = utils.isFunction(decorator) ? decorator.toString() : decorator;\n    var meta = Reflect.getMetadata(name + propertyMetadataExt, target);\n    if (!meta || utils.isArray(meta) || !utils.lang.hasField(meta)) {\n        meta = Reflect.getMetadata(name + propertyMetadataExt, target.constructor);\n    }\n    return utils.isArray(meta) ? {} : (meta || {});\n}\nexports.getPropertyMetadata = getPropertyMetadata;\n/**\n * get own property metadata of one specail decorator in target type.\n *\n * @export\n * @template T\n * @param {(string | Function)} decorator\n * @param {Type<any>} target\n * @returns {ObjectMap<T[]>}\n */\nfunction getOwnPropertyMetadata(decorator, target) {\n    var name = utils.isFunction(decorator) ? decorator.toString() : decorator;\n    var meta = Reflect.getOwnMetadata(name + propertyMetadataExt, target);\n    if (!meta || utils.isArray(meta) || !utils.lang.hasField(meta)) {\n        meta = Reflect.getOwnMetadata(name + propertyMetadataExt, target.constructor);\n    }\n    return utils.isArray(meta) ? {} : (meta || {});\n}\nexports.getOwnPropertyMetadata = getOwnPropertyMetadata;\n/**\n * has property decorator metadata.\n *\n * @export\n * @param {(string | Function)} decorator\n * @param {Type<any>} target\n * @param {(string | symbol)} [propertyKey]\n * @returns {boolean}\n */\nfunction hasPropertyMetadata(decorator, target, propertyKey) {\n    var name = utils.isFunction(decorator) ? decorator.toString() : decorator;\n    if (propertyKey) {\n        var meta = getPropertyMetadata(name, target);\n        return meta && meta.hasOwnProperty(propertyKey);\n    }\n    else {\n        return Reflect.hasMetadata(name + propertyMetadataExt, target);\n    }\n}\nexports.hasPropertyMetadata = hasPropertyMetadata;\nfunction setPropertyMetadata(name, metaName, target, propertyKey, metadata, metadataExtends) {\n    var meta = utils.lang.assign({}, getOwnPropertyMetadata(metaName, target));\n    var propmetadata = (metadata || {});\n    propmetadata.propertyKey = propertyKey;\n    propmetadata.decorator = name;\n    if (!propmetadata.type) {\n        var t = Reflect.getMetadata('design:type', target, propertyKey);\n        if (!t) {\n            // Needed to support react native inheritance\n            t = Reflect.getMetadata('design:type', target.constructor, propertyKey);\n        }\n        propmetadata.type = t;\n    }\n    if (metadataExtends) {\n        propmetadata = metadataExtends(propmetadata);\n    }\n    if (!meta[propertyKey] || !utils.isArray(meta[propertyKey])) {\n        meta[propertyKey] = [];\n    }\n    meta[propertyKey].unshift(propmetadata);\n    Reflect.defineMetadata(metaName + propertyMetadataExt, meta, target.constructor);\n}\nvar paramsMetadataExt = '__params';\n/**\n * get paramerter metadata of one specail decorator in target method.\n *\n * @export\n * @template T\n * @param {(string | Function)} decorator\n * @param {(Type<any> | object)} target\n * @param {(string | symbol)} propertyKey\n * @returns {T[][]}\n */\nfunction getParamMetadata(decorator, target, propertyKey) {\n    var name = utils.isFunction(decorator) ? decorator.toString() : decorator;\n    var parameters = Reflect.getMetadata(name + paramsMetadataExt, target, propertyKey);\n    parameters = utils.isArray(parameters) ? parameters : [];\n    return parameters;\n}\nexports.getParamMetadata = getParamMetadata;\n/**\n * get own paramerter metadata of one specail decorator in target method.\n *\n * @export\n * @template T\n * @param {(string | Function)} decorator\n * @param {(Type<any> | object)} target\n * @param {(string | symbol)} propertyKey\n * @returns {T[][]}\n */\nfunction getOwnParamMetadata(decorator, target, propertyKey) {\n    var name = utils.isFunction(decorator) ? decorator.toString() : decorator;\n    var parameters = Reflect.getOwnMetadata(name + paramsMetadataExt, target, propertyKey);\n    parameters = utils.isArray(parameters) ? parameters : [];\n    return parameters;\n}\nexports.getOwnParamMetadata = getOwnParamMetadata;\n/**\n * has param decorator metadata.\n *\n * @export\n * @param {(string | Function)} decorator\n * @param {(Type<any> | object)} target\n * @param {(string | symbol)} propertyKey\n * @returns {boolean}\n */\nfunction hasParamMetadata(decorator, target, propertyKey) {\n    var name = utils.isFunction(decorator) ? decorator.toString() : decorator;\n    return Reflect.hasMetadata(name + paramsMetadataExt, target, propertyKey);\n}\nexports.hasParamMetadata = hasParamMetadata;\n/**\n * has param decorator metadata.\n *\n * @export\n * @param {(string | Function)} decorator\n * @param {(Type<any> | object)} target\n * @param {(string | symbol)} propertyKey\n * @returns {boolean}\n */\nfunction hasOwnParamMetadata(decorator, target, propertyKey) {\n    var name = utils.isFunction(decorator) ? decorator.toString() : decorator;\n    return Reflect.hasOwnMetadata(name + paramsMetadataExt, target, propertyKey);\n}\nexports.hasOwnParamMetadata = hasOwnParamMetadata;\nfunction setParamMetadata(name, metaName, target, propertyKey, parameterIndex, metadata, metadataExtends) {\n    var parameters = getOwnParamMetadata(metaName, target, propertyKey).slice(0);\n    // there might be gaps if some in between parameters do not have annotations.\n    // we pad with nulls.\n    while (parameters.length <= parameterIndex) {\n        parameters.push(null);\n    }\n    parameters[parameterIndex] = parameters[parameterIndex] || [];\n    var paramMeadata = (metadata || {});\n    if (!paramMeadata.type) {\n        var t = Reflect.getOwnMetadata('design:type', target, propertyKey);\n        if (!t) {\n            // Needed to support react native inheritance\n            t = Reflect.getOwnMetadata('design:type', target.constructor, propertyKey);\n        }\n        paramMeadata.type = t;\n    }\n    paramMeadata.propertyKey = propertyKey;\n    paramMeadata.decorator = name;\n    paramMeadata.index = parameterIndex;\n    if (metadataExtends) {\n        paramMeadata = metadataExtends(paramMeadata);\n    }\n    parameters[parameterIndex].unshift(paramMeadata);\n    Reflect.defineMetadata(metaName + paramsMetadataExt, parameters, target, propertyKey);\n}\nfunction getParamerterNames(target) {\n    var meta = Reflect.getMetadata(exports.ParamerterName, target);\n    if (!meta || utils.isArray(meta) || !utils.lang.hasField(meta)) {\n        meta = Reflect.getMetadata(exports.ParamerterName, target.constructor);\n    }\n    return utils.isArray(meta) ? {} : (meta || {});\n}\nexports.getParamerterNames = getParamerterNames;\nfunction getOwnParamerterNames(target) {\n    var meta = Reflect.getOwnMetadata(exports.ParamerterName, target);\n    if (!meta || utils.isArray(meta) || !utils.lang.hasField(meta)) {\n        meta = Reflect.getOwnMetadata(exports.ParamerterName, target.constructor);\n    }\n    return utils.isArray(meta) ? {} : (meta || {});\n}\nexports.getOwnParamerterNames = getOwnParamerterNames;\nfunction setParamerterNames(target) {\n    var meta = utils.lang.assign({}, getParamerterNames(target));\n    var descriptors = Object.getOwnPropertyDescriptors(target.prototype);\n    var isUglify = /^[a-z]/.test(target.name);\n    var anName = '';\n    if (target.classAnnations && target.classAnnations.params) {\n        anName = target.classAnnations.name;\n        meta = utils.lang.assign(meta, target.classAnnations.params);\n    }\n    if (!isUglify && target.name !== anName) {\n        utils.lang.forIn(descriptors, function (item, name) {\n            if (name !== 'constructor') {\n                if (item.value) {\n                    meta[name] = getParamNames(item.value);\n                }\n                if (item.set) {\n                    meta[name] = getParamNames(item.set);\n                }\n            }\n        });\n        meta['constructor'] = getParamNames(target.prototype.constructor);\n    }\n    Reflect.defineMetadata(exports.ParamerterName, meta, target);\n}\nexports.setParamerterNames = setParamerterNames;\nvar STRIP_COMMENTS = /((\\/\\/.*$)|(\\/\\*[\\s\\S]*?\\*\\/))/mg;\nvar ARGUMENT_NAMES = /([^\\s,]+)/g;\nfunction getParamNames(func) {\n    if (!utils.isFunction(func)) {\n        return [];\n    }\n    var fnStr = func.toString().replace(STRIP_COMMENTS, '');\n    var result = fnStr.slice(fnStr.indexOf('(') + 1, fnStr.indexOf(')')).match(ARGUMENT_NAMES);\n    if (result === null) {\n        result = [];\n    }\n    return result;\n}\n\n\n\n\n});\n\nunwrapExports(DecoratorFactory);\nvar DecoratorFactory_1 = DecoratorFactory.ParamerterName;\nvar DecoratorFactory_2 = DecoratorFactory.createDecorator;\nvar DecoratorFactory_3 = DecoratorFactory.getTypeMetadata;\nvar DecoratorFactory_4 = DecoratorFactory.getOwnTypeMetadata;\nvar DecoratorFactory_5 = DecoratorFactory.hasClassMetadata;\nvar DecoratorFactory_6 = DecoratorFactory.hasOwnClassMetadata;\nvar DecoratorFactory_7 = DecoratorFactory.getMethodMetadata;\nvar DecoratorFactory_8 = DecoratorFactory.getOwnMethodMetadata;\nvar DecoratorFactory_9 = DecoratorFactory.hasOwnMethodMetadata;\nvar DecoratorFactory_10 = DecoratorFactory.hasMethodMetadata;\nvar DecoratorFactory_11 = DecoratorFactory.getPropertyMetadata;\nvar DecoratorFactory_12 = DecoratorFactory.getOwnPropertyMetadata;\nvar DecoratorFactory_13 = DecoratorFactory.hasPropertyMetadata;\nvar DecoratorFactory_14 = DecoratorFactory.getParamMetadata;\nvar DecoratorFactory_15 = DecoratorFactory.getOwnParamMetadata;\nvar DecoratorFactory_16 = DecoratorFactory.hasParamMetadata;\nvar DecoratorFactory_17 = DecoratorFactory.hasOwnParamMetadata;\nvar DecoratorFactory_18 = DecoratorFactory.getParamerterNames;\nvar DecoratorFactory_19 = DecoratorFactory.getOwnParamerterNames;\nvar DecoratorFactory_20 = DecoratorFactory.setParamerterNames;\n\nvar ClassDecoratorFactory = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n\n\n\n\n/**\n * create class decorator\n *\n * @export\n * @template T metadata type.\n * @param {string} name decorator name.\n * @param {MetadataAdapter} [adapter]  metadata adapter\n * @param {MetadataExtends<T>} [metadataExtends] add extents for metadata.\n * @returns {*}\n */\nfunction createClassDecorator(name, adapter, metadataExtends) {\n    var classAdapter = (function (args) {\n        if (adapter) {\n            adapter(args);\n        }\n        args.next({\n            // isMetadata: (arg) => isClassMetadata(arg),\n            match: function (arg) { return arg && (utils.isSymbol(arg) || utils.isString(arg) || (utils.isObject(arg) && arg instanceof Registration_1.Registration)); },\n            setMetadata: function (metadata, arg) {\n                metadata.provide = arg;\n            }\n        });\n        args.next({\n            match: function (arg) { return utils.isString(arg); },\n            setMetadata: function (metadata, arg) {\n                metadata.alias = arg;\n            }\n        });\n        args.next({\n            match: function (arg) { return utils.isBoolean(arg); },\n            setMetadata: function (metadata, arg) {\n                metadata.singleton = arg;\n            }\n        });\n        args.next({\n            match: function (arg) { return utils.isNumber(arg); },\n            setMetadata: function (metadata, arg) {\n                metadata.expires = arg;\n            }\n        });\n    });\n    var decorator = DecoratorFactory.createDecorator(name, classAdapter, metadataExtends);\n    decorator.decoratorType = DecoratorType_1.DecoratorType.Class;\n    return decorator;\n}\nexports.createClassDecorator = createClassDecorator;\n\n\n\n\n});\n\nunwrapExports(ClassDecoratorFactory);\nvar ClassDecoratorFactory_1 = ClassDecoratorFactory.createClassDecorator;\n\nvar MethodDecoratorFactory = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n\n\n\n/**\n * create method decorator.\n *\n * @export\n * @template T metadata type.\n * @param {string} name decorator name.\n * @param {MetadataAdapter} [adapter]  metadata adapter\n * @param {MetadataExtends<T>} [metadataExtends] add extents for metadata.\n * @returns\n */\nfunction createMethodDecorator(name, adapter, metadataExtends) {\n    var methodAdapter = function (args) {\n        if (adapter) {\n            adapter(args);\n        }\n        args.next({\n            match: function (arg) { return utils.isArray(arg); },\n            setMetadata: function (metadata, arg) {\n                metadata.providers = arg;\n            }\n        });\n    };\n    var decorator = DecoratorFactory.createDecorator(name, methodAdapter, metadataExtends);\n    decorator.decoratorType = DecoratorType_1.DecoratorType.Method;\n    return decorator;\n}\nexports.createMethodDecorator = createMethodDecorator;\n\n\n\n\n});\n\nunwrapExports(MethodDecoratorFactory);\nvar MethodDecoratorFactory_1 = MethodDecoratorFactory.createMethodDecorator;\n\nvar ParamDecoratorFactory = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n\n\n\n/**\n * create parameter decorator.\n *\n * @export\n * @template T metadata type.\n * @param {string} name decorator name.\n * @param {MetadataAdapter} [adapter]  metadata adapter\n * @param {MetadataExtends<T>} [metadataExtends] add extents for metadata.\n * @returns\n */\nfunction createParamDecorator(name, adapter, metadataExtends) {\n    var paramAdapter = (function (args) {\n        if (adapter) {\n            adapter(args);\n        }\n        args.next({\n            isMetadata: function (arg) { return utils.isParamMetadata(arg); },\n            match: function (arg) { return utils.isToken(arg); },\n            setMetadata: function (metadata, arg) {\n                metadata.provider = arg;\n            }\n        });\n        // args.next<T>({\n        //     match: (arg) => isString(arg),\n        //     setMetadata: (metadata, arg) => {\n        //         metadata.alias = arg;\n        //     }\n        // });\n    });\n    var decorator = DecoratorFactory.createDecorator(name, paramAdapter, metadataExtends);\n    decorator.decoratorType = DecoratorType_1.DecoratorType.Parameter;\n    return decorator;\n}\nexports.createParamDecorator = createParamDecorator;\n\n\n\n\n});\n\nunwrapExports(ParamDecoratorFactory);\nvar ParamDecoratorFactory_1 = ParamDecoratorFactory.createParamDecorator;\n\nvar PropertyDecoratorFactory = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n\n\n/**\n * create property decorator.\n *\n * @export\n * @template T metadata type.\n * @param {string} name decorator name.\n * @param {MetadataAdapter} [adapter]  metadata adapter\n * @param {MetadataExtends<T>} [metadataExtends] add extents for metadata.\n * @returns\n */\nfunction createPropDecorator(name, adapter, metadataExtends) {\n    var propPropAdapter = (function (args) {\n        if (adapter) {\n            adapter(args);\n        }\n        args.next({\n            isMetadata: function (arg) { return utils.isPropertyMetadata(arg); },\n            match: function (arg) { return utils.isToken(arg); },\n            setMetadata: function (metadata, arg) {\n                metadata.provider = arg;\n            }\n        });\n        // args.next<T>({\n        //     match: (arg) => isString(arg),\n        //     setMetadata: (metadata, arg) => {\n        //         metadata.alias = arg;\n        //     }\n        // });\n    });\n    var decorator = DecoratorFactory.createDecorator(name, propPropAdapter, metadataExtends);\n    decorator.decoratorType = DecoratorType_1.DecoratorType.Property;\n    return decorator;\n}\nexports.createPropDecorator = createPropDecorator;\n\n\n\n\n});\n\nunwrapExports(PropertyDecoratorFactory);\nvar PropertyDecoratorFactory_1 = PropertyDecoratorFactory.createPropDecorator;\n\nvar ParamPropDecoratorFactory = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n\n\n\n/**\n * create parameter or property decorator\n *\n * @export\n * @template T\n * @param {string} name\n * @param {MetadataAdapter} [adapter]  metadata adapter\n * @param {MetadataExtends<T>} [metadataExtends] add extents for metadata.\n * @returns {IParamPropDecorator<T>}\n */\nfunction createParamPropDecorator(name, adapter, metadataExtends) {\n    var paramPropAdapter = (function (args) {\n        if (adapter) {\n            adapter(args);\n        }\n        args.next({\n            isMetadata: function (arg) { return utils.isParamPropMetadata(arg); },\n            match: function (arg) { return utils.isToken(arg); },\n            setMetadata: function (metadata, arg) {\n                metadata.provider = arg;\n            }\n        });\n        // args.next<T>({\n        //     match: (arg) => isString(arg),\n        //     setMetadata: (metadata, arg) => {\n        //         metadata.alias = arg;\n        //     }\n        // });\n    });\n    var decorator = DecoratorFactory.createDecorator(name, paramPropAdapter, metadataExtends);\n    decorator.decoratorType = DecoratorType_1.DecoratorType.Property | DecoratorType_1.DecoratorType.Parameter;\n    return decorator;\n}\nexports.createParamPropDecorator = createParamPropDecorator;\n\n\n\n\n});\n\nunwrapExports(ParamPropDecoratorFactory);\nvar ParamPropDecoratorFactory_1 = ParamPropDecoratorFactory.createParamPropDecorator;\n\nvar ClassMethodDecoratorFactory = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n\n/**\n * create decorator for class and method.\n *\n * @export\n * @template T\n * @param {string} name\n * @param {MetadataAdapter} [adapter]  metadata adapter\n * @param {MetadataExtends<T>} [metadataExtends] add extents for metadata.\n * @returns {IClassMethodDecorator<T>}\n */\nfunction createClassMethodDecorator(name, adapter, metadataExtends) {\n    var decorator = DecoratorFactory.createDecorator(name, adapter, metadataExtends);\n    decorator.decoratorType = DecoratorType_1.DecoratorType.Class | DecoratorType_1.DecoratorType.Method;\n    return decorator;\n}\nexports.createClassMethodDecorator = createClassMethodDecorator;\n\n\n\n\n});\n\nunwrapExports(ClassMethodDecoratorFactory);\nvar ClassMethodDecoratorFactory_1 = ClassMethodDecoratorFactory.createClassMethodDecorator;\n\nvar MethodPropDecoratorFactory = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n\n/**\n * create method or property decorator\n *\n * @export\n * @template T\n * @param {string} name\n * @param {MetadataAdapter} [adapter]  metadata adapter\n * @param {MetadataExtends<T>} [metadataExtends] add extents for metadata.\n * @returns {IMethodPropDecorator<T>}\n */\nfunction createMethodPropDecorator(name, adapter, metadataExtends) {\n    var decorator = DecoratorFactory.createDecorator(name, adapter, metadataExtends);\n    decorator.decoratorType = DecoratorType_1.DecoratorType.Method | DecoratorType_1.DecoratorType.Property;\n    return decorator;\n}\nexports.createMethodPropDecorator = createMethodPropDecorator;\n\n\n\n\n});\n\nunwrapExports(MethodPropDecoratorFactory);\nvar MethodPropDecoratorFactory_1 = MethodPropDecoratorFactory.createMethodPropDecorator;\n\nvar MethodPropParamDecoratorFactory = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n\n/**\n * define method or property decorator\n *\n * @export\n * @template T\n * @param {string} name\n * @param {MetadataAdapter} [adapter]  metadata adapter\n * @param {MetadataExtends<T>} [metadataExtends] add extents for metadata.\n * @returns {IMethodPropParamDecorator<T>}\n */\nfunction createMethodPropParamDecorator(name, adapter, metadataExtends) {\n    var decorator = DecoratorFactory.createDecorator(name, adapter, metadataExtends);\n    decorator.decoratorType = DecoratorType_1.DecoratorType.Method | DecoratorType_1.DecoratorType.Property | DecoratorType_1.DecoratorType.Parameter;\n    return decorator;\n}\nexports.createMethodPropParamDecorator = createMethodPropParamDecorator;\n\n\n\n\n});\n\nunwrapExports(MethodPropParamDecoratorFactory);\nvar MethodPropParamDecoratorFactory_1 = MethodPropParamDecoratorFactory.createMethodPropParamDecorator;\n\nvar factories = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\ntslib_1.__exportStar(ArgsIterator_1, exports);\ntslib_1.__exportStar(DecoratorType_1, exports);\ntslib_1.__exportStar(DecoratorFactory, exports);\ntslib_1.__exportStar(ClassDecoratorFactory, exports);\ntslib_1.__exportStar(MethodDecoratorFactory, exports);\ntslib_1.__exportStar(ParamDecoratorFactory, exports);\ntslib_1.__exportStar(PropertyDecoratorFactory, exports);\ntslib_1.__exportStar(ParamPropDecoratorFactory, exports);\ntslib_1.__exportStar(ClassMethodDecoratorFactory, exports);\ntslib_1.__exportStar(MethodPropDecoratorFactory, exports);\ntslib_1.__exportStar(MethodPropParamDecoratorFactory, exports);\n\n\n\n\n});\n\nunwrapExports(factories);\n\nvar BindProviderAction_1 = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n\n\n\n/**\n * bind provider action. for binding a factory to an token.\n *\n * @export\n * @class BindProviderAction\n * @extends {ActionComposite}\n */\nvar BindProviderAction = /** @class */ (function (_super) {\n    tslib_1.__extends(BindProviderAction, _super);\n    function BindProviderAction() {\n        return _super.call(this, CoreActions_1.CoreActions.bindProvider) || this;\n    }\n    BindProviderAction.prototype.working = function (container, data) {\n        var type = data.targetType;\n        var lifeScope = container.getLifeScope();\n        var matchs = lifeScope.getClassDecorators(function (surm) { return surm.actions.includes(CoreActions_1.CoreActions.bindProvider) && factories.hasOwnClassMetadata(surm.name, type); });\n        var provides = [];\n        var raiseContainer = data.raiseContainer || container;\n        matchs.forEach(function (surm) {\n            var metadata = factories.getOwnTypeMetadata(surm.name, type);\n            if (Array.isArray(metadata) && metadata.length > 0) {\n                // bind all provider.\n                metadata.forEach(function (c) {\n                    if (c && c.provide) {\n                        var provideKey = raiseContainer.getTokenKey(c.provide, c.alias);\n                        provides.push(provideKey);\n                        raiseContainer.bindProvider(provideKey, c.type);\n                    }\n                });\n            }\n        });\n        data.execResult = provides;\n    };\n    BindProviderAction.classAnnations = { \"name\": \"BindProviderAction\", \"params\": { \"constructor\": [], \"working\": [\"container\", \"data\"] } };\n    return BindProviderAction;\n}(ActionComposite_1.ActionComposite));\nexports.BindProviderAction = BindProviderAction;\n\n\n\n\n});\n\nunwrapExports(BindProviderAction_1);\nvar BindProviderAction_2 = BindProviderAction_1.BindProviderAction;\n\nvar BindParameterTypeAction_1 = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n\n\n\n\n/**\n * bind parameter type action.\n *\n * @export\n * @class BindParameterTypeAction\n * @extends {ActionComposite}\n */\nvar BindParameterTypeAction = /** @class */ (function (_super) {\n    tslib_1.__extends(BindParameterTypeAction, _super);\n    function BindParameterTypeAction() {\n        return _super.call(this, CoreActions_1.CoreActions.bindParameterType) || this;\n    }\n    BindParameterTypeAction.prototype.working = function (container, data) {\n        if (data.raiseContainer && data.raiseContainer !== container) {\n            return;\n        }\n        var target = data.target;\n        var type = data.targetType;\n        var propertyKey = data.propertyKey;\n        var lifeScope = container.getLifeScope();\n        var designParams;\n        if (target && propertyKey) {\n            designParams = Reflect.getMetadata('design:paramtypes', target, propertyKey) || [];\n        }\n        else {\n            designParams = Reflect.getMetadata('design:paramtypes', type) || [];\n        }\n        designParams = designParams.slice(0);\n        designParams.forEach(function (dtype) {\n            if (lifeScope.isVaildDependence(dtype)) {\n                if (!container.has(dtype)) {\n                    container.register(dtype);\n                }\n            }\n        });\n        var matchs = lifeScope.getParameterDecorators((function (surm) {\n            return surm.actions.includes(CoreActions_1.CoreActions.bindParameterType) && ((target || propertyKey !== 'constructor') ? factories.hasParamMetadata(surm.name, target, propertyKey)\n                : factories.hasOwnParamMetadata(surm.name, type));\n        }));\n        matchs.forEach(function (surm) {\n            var parameters = (target || propertyKey !== 'constructor') ? factories.getParamMetadata(surm.name, target, propertyKey) : factories.getOwnParamMetadata(surm.name, type);\n            if (utils.isArray(parameters) && parameters.length) {\n                parameters.forEach(function (params) {\n                    var parm = (utils.isArray(params) && params.length > 0) ? params[0] : null;\n                    if (parm && parm.index >= 0) {\n                        if (lifeScope.isVaildDependence(parm.provider)) {\n                            if (!container.has(parm.provider, parm.alias)) {\n                                container.register(container.getToken(parm.provider, parm.alias));\n                            }\n                        }\n                        if (lifeScope.isVaildDependence(parm.type)) {\n                            if (!container.has(parm.type)) {\n                                container.register(parm.type);\n                            }\n                        }\n                        var token = parm.provider ? container.getTokenKey(parm.provider, parm.alias) : parm.type;\n                        if (token) {\n                            designParams[parm.index] = token;\n                        }\n                    }\n                });\n            }\n        });\n        data.execResult = designParams;\n    };\n    BindParameterTypeAction.classAnnations = { \"name\": \"BindParameterTypeAction\", \"params\": { \"constructor\": [], \"working\": [\"container\", \"data\"] } };\n    return BindParameterTypeAction;\n}(ActionComposite_1.ActionComposite));\nexports.BindParameterTypeAction = BindParameterTypeAction;\n\n\n\n\n});\n\nunwrapExports(BindParameterTypeAction_1);\nvar BindParameterTypeAction_2 = BindParameterTypeAction_1.BindParameterTypeAction;\n\nvar BindPropertyTypeAction_1 = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n\n\n\n/**\n * bind property type action. to get the property autowride token of Type calss.\n *\n * @export\n * @class SetPropAction\n * @extends {ActionComposite}\n */\nvar BindPropertyTypeAction = /** @class */ (function (_super) {\n    tslib_1.__extends(BindPropertyTypeAction, _super);\n    function BindPropertyTypeAction() {\n        return _super.call(this, CoreActions_1.CoreActions.bindPropertyType) || this;\n    }\n    BindPropertyTypeAction.prototype.working = function (container, data) {\n        if (data.raiseContainer && data.raiseContainer !== container) {\n            return;\n        }\n        var type = data.targetType;\n        var lifeScope = container.getLifeScope();\n        var matchs = lifeScope.getPropertyDecorators(function (surm) { return surm.actions.includes(CoreActions_1.CoreActions.bindPropertyType) && factories.hasPropertyMetadata(surm.name, type); });\n        var list = [];\n        matchs.forEach(function (surm) {\n            var propMetadata = factories.getPropertyMetadata(surm.name, type);\n            for (var n in propMetadata) {\n                list = list.concat(propMetadata[n]);\n            }\n            list = list.filter(function (n) { return !!n; });\n            list.forEach(function (prop) {\n                if (lifeScope.isVaildDependence(prop.provider)) {\n                    if (!container.has(prop.provider, prop.alias)) {\n                        container.register(container.getToken(prop.provider, prop.alias));\n                    }\n                }\n                if (lifeScope.isVaildDependence(prop.type)) {\n                    if (!container.has(prop.type)) {\n                        container.register(prop.type);\n                    }\n                }\n            });\n        });\n        data.execResult = list;\n    };\n    BindPropertyTypeAction.classAnnations = { \"name\": \"BindPropertyTypeAction\", \"params\": { \"constructor\": [], \"working\": [\"container\", \"data\"] } };\n    return BindPropertyTypeAction;\n}(ActionComposite_1.ActionComposite));\nexports.BindPropertyTypeAction = BindPropertyTypeAction;\n\n\n\n\n});\n\nunwrapExports(BindPropertyTypeAction_1);\nvar BindPropertyTypeAction_2 = BindPropertyTypeAction_1.BindPropertyTypeAction;\n\nvar InjectPropertyAction_1 = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n\n\n/**\n * inject property value action, to inject property value for resolve instance.\n *\n * @export\n * @class SetPropAction\n * @extends {ActionComposite}\n */\nvar InjectPropertyAction = /** @class */ (function (_super) {\n    tslib_1.__extends(InjectPropertyAction, _super);\n    function InjectPropertyAction() {\n        return _super.call(this, CoreActions_1.CoreActions.injectProperty) || this;\n    }\n    InjectPropertyAction.prototype.working = function (container, data) {\n        if (!data.execResult) {\n            this.parent.find(function (act) { return act.name === CoreActions_1.CoreActions.bindPropertyType; }).execute(container, data);\n        }\n        if (data.target && data.execResult && data.execResult.length) {\n            var providerMap_1 = data.providerMap;\n            data.execResult.reverse().forEach(function (prop, idx) {\n                if (prop) {\n                    var token = prop.provider ? container.getToken(prop.provider, prop.alias) : prop.type;\n                    if (providerMap_1 && providerMap_1.has(token)) {\n                        data.target[prop.propertyKey] = providerMap_1.resolve(token, providerMap_1);\n                    }\n                    else if (container.has(token)) {\n                        data.target[prop.propertyKey] = container.resolve(token, providerMap_1);\n                    }\n                }\n            });\n        }\n    };\n    InjectPropertyAction.classAnnations = { \"name\": \"InjectPropertyAction\", \"params\": { \"constructor\": [], \"working\": [\"container\", \"data\"] } };\n    return InjectPropertyAction;\n}(ActionComposite_1.ActionComposite));\nexports.InjectPropertyAction = InjectPropertyAction;\n\n\n\n\n});\n\nunwrapExports(InjectPropertyAction_1);\nvar InjectPropertyAction_2 = InjectPropertyAction_1.InjectPropertyAction;\n\nvar BindParameterProviderAction_1 = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n\n\n\n\n/**\n * bind parameters action.\n *\n * @export\n * @class BindParameterProviderAction\n * @extends {ActionComposite}\n */\nvar BindParameterProviderAction = /** @class */ (function (_super) {\n    tslib_1.__extends(BindParameterProviderAction, _super);\n    function BindParameterProviderAction() {\n        return _super.call(this, CoreActions_1.CoreActions.bindParameterProviders) || this;\n    }\n    BindParameterProviderAction.prototype.working = function (container, data) {\n        if (data.raiseContainer && data.raiseContainer !== container) {\n            return;\n        }\n        var type = data.targetType;\n        var propertyKey = data.propertyKey;\n        var lifeScope = container.getLifeScope();\n        var matchs = lifeScope.getMethodDecorators(function (surm) { return surm.actions.includes(CoreActions_1.CoreActions.bindParameterProviders) && factories.hasOwnMethodMetadata(surm.name, type); });\n        var providers = [];\n        matchs.forEach(function (surm) {\n            var methodmtas = factories.getOwnMethodMetadata(surm.name, type);\n            var metadatas = methodmtas[propertyKey];\n            if (metadatas && utils.isArray(metadatas) && metadatas.length > 0) {\n                metadatas.forEach(function (meta) {\n                    if (meta.providers && meta.providers.length > 0) {\n                        providers = providers.concat(meta.providers);\n                    }\n                });\n            }\n        });\n        data.execResult = providers;\n    };\n    BindParameterProviderAction.classAnnations = { \"name\": \"BindParameterProviderAction\", \"params\": { \"constructor\": [], \"working\": [\"container\", \"data\"] } };\n    return BindParameterProviderAction;\n}(ActionComposite_1.ActionComposite));\nexports.BindParameterProviderAction = BindParameterProviderAction;\n\n\n\n\n});\n\nunwrapExports(BindParameterProviderAction_1);\nvar BindParameterProviderAction_2 = BindParameterProviderAction_1.BindParameterProviderAction;\n\nvar ComponentBeforeInitAction_1 = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n\n\n\n/**\n * component before init action, to run @Component decorator class before init hooks.\n *\n * @export\n * @class ComponentBeforeInitAction\n * @extends {ActionComposite}\n */\nvar ComponentBeforeInitAction = /** @class */ (function (_super) {\n    tslib_1.__extends(ComponentBeforeInitAction, _super);\n    function ComponentBeforeInitAction() {\n        return _super.call(this, CoreActions_1.CoreActions.componentBeforeInit) || this;\n    }\n    ComponentBeforeInitAction.prototype.working = function (container, data) {\n        if (data.raiseContainer && data.raiseContainer !== container) {\n            return;\n        }\n        if (data.targetType && data.target) {\n            var component = data.target;\n            if (utils.isFunction(component.beforeInit)) {\n                container.syncInvoke(data.targetType, 'beforeInit', data.target);\n            }\n        }\n    };\n    ComponentBeforeInitAction.classAnnations = { \"name\": \"ComponentBeforeInitAction\", \"params\": { \"constructor\": [], \"working\": [\"container\", \"data\"] } };\n    return ComponentBeforeInitAction;\n}(ActionComposite_1.ActionComposite));\nexports.ComponentBeforeInitAction = ComponentBeforeInitAction;\n\n\n\n\n});\n\nunwrapExports(ComponentBeforeInitAction_1);\nvar ComponentBeforeInitAction_2 = ComponentBeforeInitAction_1.ComponentBeforeInitAction;\n\nvar ComponentInitAction_1 = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n\n\n\n/**\n * component before init action, to run @Component decorator class before init hooks.\n *\n * @export\n * @class ComponentInitAction\n * @extends {ActionComposite}\n */\nvar ComponentInitAction = /** @class */ (function (_super) {\n    tslib_1.__extends(ComponentInitAction, _super);\n    function ComponentInitAction() {\n        return _super.call(this, CoreActions_1.CoreActions.componentInit) || this;\n    }\n    ComponentInitAction.prototype.working = function (container, data) {\n        if (data.raiseContainer && data.raiseContainer !== container) {\n            return;\n        }\n        if (data.targetType && data.target) {\n            var component = data.target;\n            if (utils.isFunction(component.onInit)) {\n                container.syncInvoke(data.targetType, 'onInit', data.target);\n            }\n        }\n    };\n    ComponentInitAction.classAnnations = { \"name\": \"ComponentInitAction\", \"params\": { \"constructor\": [], \"working\": [\"container\", \"data\"] } };\n    return ComponentInitAction;\n}(ActionComposite_1.ActionComposite));\nexports.ComponentInitAction = ComponentInitAction;\n\n\n\n\n});\n\nunwrapExports(ComponentInitAction_1);\nvar ComponentInitAction_2 = ComponentInitAction_1.ComponentInitAction;\n\nvar ComponentAfterInitAction_1 = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n\n\n\n/**\n * component after init action, to run @Component decorator class after init hooks.\n *\n * @export\n * @class ComponentAfterInitAction\n * @extends {ActionComposite}\n */\nvar ComponentAfterInitAction = /** @class */ (function (_super) {\n    tslib_1.__extends(ComponentAfterInitAction, _super);\n    function ComponentAfterInitAction() {\n        return _super.call(this, CoreActions_1.CoreActions.componentAfterInit) || this;\n    }\n    ComponentAfterInitAction.prototype.working = function (container, data) {\n        if (data.raiseContainer && data.raiseContainer !== container) {\n            return;\n        }\n        if (data.targetType && data.target) {\n            var component = data.target;\n            if (utils.isFunction(component.afterInit)) {\n                container.syncInvoke(data.targetType, 'afterInit', data.target);\n            }\n        }\n    };\n    ComponentAfterInitAction.classAnnations = { \"name\": \"ComponentAfterInitAction\", \"params\": { \"constructor\": [], \"working\": [\"container\", \"data\"] } };\n    return ComponentAfterInitAction;\n}(ActionComposite_1.ActionComposite));\nexports.ComponentAfterInitAction = ComponentAfterInitAction;\n\n\n\n\n});\n\nunwrapExports(ComponentAfterInitAction_1);\nvar ComponentAfterInitAction_2 = ComponentAfterInitAction_1.ComponentAfterInitAction;\n\nvar ICacheManager = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n/**\n * ICacheManager interface token.\n * it is a token id, you can register yourself ICacheManager for this.\n */\nexports.CacheManagerToken = new InjectToken_1.InjectToken('DI_ICacheManager');\n\n\n\n\n});\n\nunwrapExports(ICacheManager);\nvar ICacheManager_1 = ICacheManager.CacheManagerToken;\n\nvar CacheAction_1 = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n\n\n\n\n\n/**\n * cache action. To cache instance of Token. define cache expires in decorator.\n *\n * @export\n * @class CacheAction\n * @extends {ActionComposite}\n */\nvar CacheAction = /** @class */ (function (_super) {\n    tslib_1.__extends(CacheAction, _super);\n    function CacheAction() {\n        return _super.call(this, CoreActions_1.CoreActions.cache) || this;\n    }\n    CacheAction.prototype.working = function (container, data) {\n        if (data.raiseContainer && data.raiseContainer !== container) {\n            return data;\n        }\n        if (data.singleton || !data.targetType || !utils.isClass(data.targetType)) {\n            return data;\n        }\n        var cacheManager = container.get(ICacheManager.CacheManagerToken);\n        if (data.target) {\n            if (!cacheManager.hasCache(data.targetType)) {\n                var cacheMetadata = this.getCacheMetadata(container, data);\n                if (cacheMetadata) {\n                    cacheManager.cache(data.targetType, data.target, cacheMetadata.expires);\n                }\n            }\n        }\n        else {\n            var target = cacheManager.get(data.targetType);\n            if (target) {\n                var cacheMetadata = this.getCacheMetadata(container, data);\n                if (cacheMetadata) {\n                    cacheManager.cache(data.targetType, target, cacheMetadata.expires);\n                    data.execResult = target;\n                }\n            }\n        }\n        return data;\n    };\n    CacheAction.prototype.getCacheMetadata = function (container, data) {\n        var lifeScope = container.getLifeScope();\n        var matchs = lifeScope.getClassDecorators(function (surm) { return factories.hasOwnClassMetadata(surm.name, data.targetType); });\n        var cacheMetadata;\n        for (var i = 0; i < matchs.length; i++) {\n            var surm = matchs[i];\n            var metadata = factories.getOwnTypeMetadata(surm.name, data.targetType);\n            if (Array.isArray(metadata) && metadata.length > 0) {\n                cacheMetadata = metadata.find(function (c) { return c && utils.isNumber(c.expires) && c.expires > 0; });\n                if (cacheMetadata) {\n                    break;\n                }\n            }\n        }\n        return cacheMetadata;\n    };\n    CacheAction.classAnnations = { \"name\": \"CacheAction\", \"params\": { \"constructor\": [], \"working\": [\"container\", \"data\"], \"getCacheMetadata\": [\"container\", \"data\"] } };\n    return CacheAction;\n}(ActionComposite_1.ActionComposite));\nexports.CacheAction = CacheAction;\n\n\n\n\n});\n\nunwrapExports(CacheAction_1);\nvar CacheAction_2 = CacheAction_1.CacheAction;\n\nvar SingletonAction = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n\n\n/**\n * singleton action, to set the factory of Token as singleton.\n *\n * @export\n * @class SingletionAction\n * @extends {ActionComposite}\n */\nvar SingletionAction = /** @class */ (function (_super) {\n    tslib_1.__extends(SingletionAction, _super);\n    function SingletionAction() {\n        return _super.call(this, CoreActions_1.CoreActions.singletion) || this;\n    }\n    SingletionAction.prototype.working = function (container, data) {\n        if (data.raiseContainer && data.raiseContainer !== container) {\n            return;\n        }\n        if (data.tokenKey && data.target && data.singleton) {\n            container.registerValue(data.tokenKey, data.target);\n        }\n    };\n    SingletionAction.classAnnations = { \"name\": \"SingletionAction\", \"params\": { \"constructor\": [], \"working\": [\"container\", \"data\"] } };\n    return SingletionAction;\n}(ActionComposite_1.ActionComposite));\nexports.SingletionAction = SingletionAction;\n\n\n\n\n});\n\nunwrapExports(SingletonAction);\nvar SingletonAction_1 = SingletonAction.SingletionAction;\n\nvar Component = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n/**\n * Component decorator, define for class. use to define the class. it can setting provider to some token, singleton or not. it will execute  [`ComponentLifecycle`]\n *\n * @Component\n */\nexports.Component = factories.createClassDecorator('Component');\n\n\n\n\n});\n\nunwrapExports(Component);\nvar Component_1 = Component.Component;\n\nvar Injectable = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n/**\n * Injectable decorator, define for class.  use to define the class. it can setting provider to some token, singleton or not.\n *\n * @Injectable\n */\nexports.Injectable = factories.createClassDecorator('Injectable');\n\n\n\n\n});\n\nunwrapExports(Injectable);\nvar Injectable_1 = Injectable.Injectable;\n\nvar Inject = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n/**\n * Inject decorator, for property or param, use to auto wried type instance or value to the instance of one class with the decorator.\n *\n * @Inject\n */\nexports.Inject = factories.createParamPropDecorator('Inject');\n\n\n\n\n});\n\nunwrapExports(Inject);\nvar Inject_1 = Inject.Inject;\n\nvar AutoWried = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n/**\n * AutoWired decorator, for property or param. use to auto wried type instance or value to the instance of one class with the decorator.\n *\n * @AutoWired\n */\nexports.AutoWired = factories.createParamPropDecorator('AutoWired');\n\n\n\n\n});\n\nunwrapExports(AutoWried);\nvar AutoWried_1 = AutoWried.AutoWired;\n\nvar Param = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n/**\n * param decorator, define for parameter. use to auto wried type instance or value to the instance of one class with the decorator.\n *\n * @Param\n */\nexports.Param = factories.createParamDecorator('Param');\n\n\n\n\n});\n\nunwrapExports(Param);\nvar Param_1 = Param.Param;\n\nvar Method = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n/**\n * method decorator.\n *\n * @Method\n */\nexports.Method = factories.createMethodDecorator('Method');\n\n\n\n\n});\n\nunwrapExports(Method);\nvar Method_1 = Method.Method;\n\nvar Singleton = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n/**\n * Singleton decorator, for class. use to define the class is singleton.\n *\n * @Singleton\n */\nexports.Singleton = factories.createClassDecorator('Singleton', null, function (metadata) {\n    metadata.singleton = true;\n    return metadata;\n});\n\n\n\n\n});\n\nunwrapExports(Singleton);\nvar Singleton_1 = Singleton.Singleton;\n\nvar Abstract = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n/**\n * Abstract decorator. define for class.\n *\n * @Abstract\n */\nexports.Abstract = factories.createClassDecorator('Abstract');\n\n\n\n\n});\n\nunwrapExports(Abstract);\nvar Abstract_1 = Abstract.Abstract;\n\nvar AutoRun = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n\n/**\n * Autorun decorator, for class or method.  use to define the class auto run (via a method or not) after registered.\n *\n * @Autorun\n */\nexports.Autorun = factories.createClassMethodDecorator('Autorun', function (args) {\n    args.next({\n        isMetadata: function (arg) { return utils.isClassMetadata(arg, ['autorun']); },\n        match: function (arg) { return utils.isString(arg) || utils.isNumber(arg); },\n        setMetadata: function (metadata, arg) {\n            if (utils.isString(arg)) {\n                metadata.autorun = arg;\n            }\n            else {\n                metadata.order = arg;\n            }\n        }\n    });\n}, function (metadata) {\n    metadata.singleton = true;\n    return metadata;\n});\n\n\n\n\n});\n\nunwrapExports(AutoRun);\nvar AutoRun_1 = AutoRun.Autorun;\n\nvar IocExt = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n\n/**\n * IocExt decorator. define for class, use to define the class is Ioc extends module. it will auto run after registered to helper your to setup module.\n *\n * @IocExt\n */\nexports.IocExt = factories.createClassDecorator('IocExt', function (args) {\n    args.next({\n        isMetadata: function (arg) { return utils.isClassMetadata(arg, ['autorun']); },\n        match: function (arg) { return utils.isString(arg); },\n        setMetadata: function (metadata, arg) {\n            metadata.autorun = arg;\n        }\n    });\n}, function (metadata) {\n    metadata.singleton = true;\n    return metadata;\n});\nexports.IocModule = exports.IocExt;\n\n\n\n\n});\n\nunwrapExports(IocExt);\nvar IocExt_1 = IocExt.IocExt;\nvar IocExt_2 = IocExt.IocModule;\n\nvar decorators = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\ntslib_1.__exportStar(Component, exports);\ntslib_1.__exportStar(Injectable, exports);\ntslib_1.__exportStar(Inject, exports);\ntslib_1.__exportStar(AutoWried, exports);\ntslib_1.__exportStar(Param, exports);\ntslib_1.__exportStar(Method, exports);\ntslib_1.__exportStar(Singleton, exports);\ntslib_1.__exportStar(Abstract, exports);\ntslib_1.__exportStar(AutoRun, exports);\ntslib_1.__exportStar(IocExt, exports);\n\n\n\n\n});\n\nunwrapExports(decorators);\n\nvar AutorunAction_1 = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n\n\n\n\n\n/**\n * Inject DrawType action.\n *\n * @export\n * @class SetPropAction\n * @extends {ActionComposite}\n */\nvar AutorunAction = /** @class */ (function (_super) {\n    tslib_1.__extends(AutorunAction, _super);\n    function AutorunAction() {\n        return _super.call(this, CoreActions_1.CoreActions.autorun) || this;\n    }\n    AutorunAction.prototype.getDecorator = function () {\n        return [decorators.IocExt, decorators.Autorun];\n    };\n    AutorunAction.prototype.working = function (container, data) {\n        if (data.raiseContainer && data.raiseContainer !== container) {\n            return;\n        }\n        if (data.tokenKey && data.targetType) {\n            var decorators$$1 = this.getDecorator();\n            decorators$$1.forEach(function (decorator) {\n                if (factories.hasClassMetadata(decorator, data.targetType)) {\n                    var metas = factories.getTypeMetadata(decorator, data.targetType);\n                    var meta = metas.find(function (it) { return !!it.autorun; });\n                    if (!meta && metas.length) {\n                        meta = metas[0];\n                    }\n                    if (meta) {\n                        var instance = container.get(data.tokenKey);\n                        if (instance && meta.autorun && utils.isFunction(instance[meta.autorun])) {\n                            container.syncInvoke(data.tokenKey, meta.autorun, instance);\n                        }\n                    }\n                }\n            });\n        }\n    };\n    AutorunAction.classAnnations = { \"name\": \"AutorunAction\", \"params\": { \"constructor\": [], \"getDecorator\": [], \"working\": [\"container\", \"data\"] } };\n    return AutorunAction;\n}(ActionComposite_1.ActionComposite));\nexports.AutorunAction = AutorunAction;\n\n\n\n\n});\n\nunwrapExports(AutorunAction_1);\nvar AutorunAction_2 = AutorunAction_1.AutorunAction;\n\nvar actions = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\ntslib_1.__exportStar(ActionComposite_1, exports);\ntslib_1.__exportStar(LifeState_1, exports);\ntslib_1.__exportStar(CoreActions_1, exports);\ntslib_1.__exportStar(NullAction, exports);\ntslib_1.__exportStar(BindProviderAction_1, exports);\ntslib_1.__exportStar(BindParameterTypeAction_1, exports);\ntslib_1.__exportStar(BindPropertyTypeAction_1, exports);\ntslib_1.__exportStar(InjectPropertyAction_1, exports);\ntslib_1.__exportStar(BindParameterProviderAction_1, exports);\ntslib_1.__exportStar(ComponentBeforeInitAction_1, exports);\ntslib_1.__exportStar(ComponentInitAction_1, exports);\ntslib_1.__exportStar(ComponentAfterInitAction_1, exports);\ntslib_1.__exportStar(CacheAction_1, exports);\ntslib_1.__exportStar(SingletonAction, exports);\ntslib_1.__exportStar(AutorunAction_1, exports);\n\n\n\n\n});\n\nunwrapExports(actions);\n\nvar ProviderMap_1 = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n\nexports.ProviderMapToken = new InjectToken_1.InjectToken('DI_ProviderMap');\n/**\n * Provider Map\n *\n * @export\n * @class Providers\n */\nvar ProviderMap = /** @class */ (function () {\n    function ProviderMap(container) {\n        this.container = container;\n        this.maps = new utils.MapSet();\n    }\n    ProviderMap.prototype.has = function (provide) {\n        return this.maps.has(provide);\n    };\n    ProviderMap.prototype.get = function (provide) {\n        return this.maps.get(provide);\n    };\n    ProviderMap.prototype.add = function (provide, provider) {\n        var _this = this;\n        if (utils.isUndefined(provide)) {\n            return this;\n        }\n        var factory;\n        if (utils.isToken(provider) && this.container.has(provider)) {\n            factory = function () {\n                var providers = [];\n                for (var _i = 0; _i < arguments.length; _i++) {\n                    providers[_i] = arguments[_i];\n                }\n                var _a;\n                return (_a = _this.container).resolve.apply(_a, [provider].concat(providers));\n            };\n        }\n        else {\n            if (utils.isFunction(provider)) {\n                factory = function () {\n                    var providers = [];\n                    for (var _i = 0; _i < arguments.length; _i++) {\n                        providers[_i] = arguments[_i];\n                    }\n                    return provider.apply(void 0, [_this.container].concat(providers));\n                };\n            }\n            else {\n                factory = function () {\n                    return provider;\n                };\n            }\n        }\n        this.maps.set(provide, factory);\n        return this;\n    };\n    ProviderMap.prototype.remove = function (provide) {\n        if (this.maps.has(provide)) {\n            this.maps.delete(provide);\n        }\n        return this;\n    };\n    ProviderMap.prototype.resolve = function (provide) {\n        var providers = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            providers[_i - 1] = arguments[_i];\n        }\n        var _a, _b;\n        if (!this.maps.has(provide)) {\n            return (!utils.isNumber(provide) && this.container.has(provide)) ? (_a = this.container).resolve.apply(_a, [provide].concat(providers)) : null;\n        }\n        var provider = this.maps.get(provide);\n        return utils.isToken(provider) ? (_b = this.container).resolve.apply(_b, [provider].concat(providers)) : provider.apply(void 0, providers);\n    };\n    ProviderMap.prototype.forEach = function (express) {\n        this.maps.forEach(express);\n    };\n    ProviderMap.prototype.copy = function (map) {\n        var _this = this;\n        if (!map) {\n            return;\n        }\n        map.forEach(function (val, token) {\n            _this.maps.set(token, val);\n        });\n    };\n    ProviderMap.classAnnations = { \"name\": \"ProviderMap\", \"params\": { \"constructor\": [\"container\"], \"has\": [\"provide\"], \"get\": [\"provide\"], \"add\": [\"provide\", \"provider\"], \"remove\": [\"provide\"], \"resolve\": [\"provide\", \"providers\"], \"forEach\": [\"express\"], \"copy\": [\"map\"] } };\n    return ProviderMap;\n}());\nexports.ProviderMap = ProviderMap;\n\n\n\n\n});\n\nunwrapExports(ProviderMap_1);\nvar ProviderMap_2 = ProviderMap_1.ProviderMapToken;\nvar ProviderMap_3 = ProviderMap_1.ProviderMap;\n\nvar Provider_1 = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n\n/**\n *  provider, to dynamic resovle instance of params in run time.\n *\n * @export\n * @class Provider\n */\nvar Provider = /** @class */ (function () {\n    function Provider(type, value) {\n        this.type = type;\n        this.value = value;\n    }\n    /**\n     * resolve provider value.\n     *\n     * @template T\n     * @param {IContainer} container\n     * @param {Providers[]} providers\n     * @returns {T}\n     * @memberof Provider\n     */\n    Provider.prototype.resolve = function (container) {\n        var providers = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            providers[_i - 1] = arguments[_i];\n        }\n        if (utils.isUndefined(this.value)) {\n            return container.has(this.type) ? container.resolve.apply(container, [this.type].concat(providers)) : null;\n        }\n        else {\n            return this.value; // isFunction(this.value) ? this.value(container) : this.value;\n        }\n    };\n    /**\n     * create provider.\n     *\n     * @static\n     * @param {Token<any>} type\n     * @param {(any)} value\n     * @returns Provider\n     * @memberof Provider\n     */\n    Provider.create = function (type, value) {\n        return new Provider(type, value);\n    };\n    /**\n     * create extends provider.\n     *\n     * @static\n     * @param {Token<any>} token\n     * @param {(any)} value\n     * @param {Express2<any, ExtendsProvider, void>} [extendsTarget]\n     * @returns {ExtendsProvider}\n     * @memberof Provider\n     */\n    Provider.createExtends = function (token, value, extendsTarget) {\n        return new ExtendsProvider(token, value, extendsTarget);\n    };\n    // /**\n    //  * create custom provider.\n    //  *\n    //  * @static\n    //  * @param {Token<any>} [type]\n    //  * @param {ToInstance<any>} [toInstance]\n    //  * @param {*} [value]\n    //  * @returns {CustomProvider}\n    //  * @memberof Provider\n    //  */\n    // static createCustom(type?: Token<any>, toInstance?: ToInstance<any>, value?: any): CustomProvider {\n    //     return new CustomProvider(type, toInstance, value);\n    // }\n    /**\n     * create invoked provider.\n     *\n     * @static\n     * @param {Token<any>} token\n     * @param {string} method\n     * @param {(any)} [value]\n     * @returns {InvokeProvider}\n     * @memberof Provider\n     */\n    Provider.createInvoke = function (token, method, value) {\n        return new InvokeProvider(token, method, value);\n    };\n    /**\n     * create param provider.\n     *\n     * @static\n     * @param {Token<any>} token\n     * @param {(any)} value\n     * @param {number} [index]\n     * @param {string} [method]\n     * @returns {ParamProvider}\n     * @memberof Provider\n     */\n    Provider.createParam = function (token, value, index, method) {\n        return new ParamProvider(token, value, index, method);\n    };\n    // /**\n    //  * create async param provider.\n    //  *\n    //  * @static\n    //  * @param {(string | string[])} files\n    //  * @param {Token<any>} token\n    //  * @param {number} [index]\n    //  * @param {string} [method]\n    //  * @param {(any)} [value]\n    //  * @returns {AsyncParamProvider}\n    //  * @memberof Provider\n    //  */\n    // static createAsyncParam(files: string | string[], token: Token<any>, index?: number, method?: string, value?: any): AsyncParamProvider {\n    //     return new AsyncParamProvider(files, token, index, method, value)\n    // }\n    Provider.classAnnations = { \"name\": \"Provider\", \"params\": { \"constructor\": [\"type\", \"value\"], \"resolve\": [\"container\", \"providers\"], \"create\": [\"type\", \"value\"], \"createExtends\": [\"token\", \"value\", \"extendsTarget\"], \"createInvoke\": [\"token\", \"method\", \"value\"], \"createParam\": [\"token\", \"value\", \"index\", \"method\"] } };\n    return Provider;\n}());\nexports.Provider = Provider;\n/**\n * InvokeProvider\n *\n * @export\n * @class InvokeProvider\n * @extends {Provider}\n */\nvar InvokeProvider = /** @class */ (function (_super) {\n    tslib_1.__extends(InvokeProvider, _super);\n    function InvokeProvider(type, method, value) {\n        var _this = _super.call(this, type, value) || this;\n        _this.method = method;\n        return _this;\n    }\n    InvokeProvider.prototype.resolve = function (container) {\n        var providers = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            providers[_i - 1] = arguments[_i];\n        }\n        if (this.method) {\n            return container.syncInvoke.apply(container, [this.type, this.method].concat(providers));\n        }\n        return _super.prototype.resolve.apply(this, [container].concat(providers));\n    };\n    InvokeProvider.classAnnations = { \"name\": \"InvokeProvider\", \"params\": { \"constructor\": [\"type\", \"method\", \"value\"], \"resolve\": [\"container\", \"providers\"] } };\n    return InvokeProvider;\n}(Provider));\nexports.InvokeProvider = InvokeProvider;\n/**\n * param provider.\n *\n * @export\n * @interface ParamProvider\n */\nvar ParamProvider = /** @class */ (function (_super) {\n    tslib_1.__extends(ParamProvider, _super);\n    function ParamProvider(token, value, index, method) {\n        var _this = _super.call(this, token, method, value) || this;\n        _this.index = index;\n        return _this;\n    }\n    ParamProvider.prototype.resolve = function (container) {\n        var providers = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            providers[_i - 1] = arguments[_i];\n        }\n        return _super.prototype.resolve.apply(this, [container].concat(providers));\n    };\n    ParamProvider.classAnnations = { \"name\": \"ParamProvider\", \"params\": { \"constructor\": [\"token\", \"value\", \"index\", \"method\"], \"resolve\": [\"container\", \"providers\"] } };\n    return ParamProvider;\n}(InvokeProvider));\nexports.ParamProvider = ParamProvider;\n/**\n * Provider enable exntends target with provider in dynamic.\n *\n * @export\n * @class ExtendsProvider\n * @extends {Provider}\n */\nvar ExtendsProvider = /** @class */ (function (_super) {\n    tslib_1.__extends(ExtendsProvider, _super);\n    function ExtendsProvider(token, value, extendsTarget) {\n        var _this = _super.call(this, token, value) || this;\n        _this.extendsTarget = extendsTarget;\n        return _this;\n    }\n    ExtendsProvider.prototype.resolve = function (container) {\n        var providers = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            providers[_i - 1] = arguments[_i];\n        }\n        return _super.prototype.resolve.apply(this, [container].concat(providers));\n    };\n    ExtendsProvider.prototype.extends = function (target) {\n        if (utils.isObject(target) && utils.isFunction(this.extendsTarget)) {\n            this.extendsTarget(target, this);\n        }\n    };\n    ExtendsProvider.classAnnations = { \"name\": \"ExtendsProvider\", \"params\": { \"constructor\": [\"token\", \"value\", \"extendsTarget\"], \"resolve\": [\"container\", \"providers\"], \"extends\": [\"target\"] } };\n    return ExtendsProvider;\n}(Provider));\nexports.ExtendsProvider = ExtendsProvider;\n\n\n\n\n});\n\nunwrapExports(Provider_1);\nvar Provider_2 = Provider_1.Provider;\nvar Provider_3 = Provider_1.InvokeProvider;\nvar Provider_4 = Provider_1.ParamProvider;\nvar Provider_5 = Provider_1.ExtendsProvider;\n\nvar providers = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n\n\ntslib_1.__exportStar(Provider_1, exports);\n// export * from './ExtendsProvider';\ntslib_1.__exportStar(ProviderMap_1, exports);\n// export * from './InvokeProvider';\n// export * from './ParamProvider';\n// export * from './AsyncParamProvider';\n/**\n * object is provider map or not.\n *\n * @export\n * @param {object} target\n * @returns {target is ProviderMap}\n */\nfunction isProviderMap(target) {\n    if (!utils.isObject(target)) {\n        return false;\n    }\n    return target instanceof ProviderMap_1.ProviderMap;\n}\nexports.isProviderMap = isProviderMap;\n\n\n\n\n});\n\nunwrapExports(providers);\nvar providers_1 = providers.isProviderMap;\n\nvar IRecognizer = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n/**\n * IRecognizer interface token.\n * it is a token id, you can register yourself IRecognizer for this.\n */\nexports.RecognizerToken = new InjectToken_1.InjectToken('DI_IRecognizer');\n\n\n\n\n});\n\nunwrapExports(IRecognizer);\nvar IRecognizer_1 = IRecognizer.RecognizerToken;\n\nvar IProviderMatcher = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n/**\n * Providers match interface symbol.\n * it is a symbol id, you can register yourself MethodAccessor for this.\n */\nexports.ProviderMatcherToken = new InjectToken_1.InjectToken('DI_IProviderMatcher');\n\n\n\n\n});\n\nunwrapExports(IProviderMatcher);\nvar IProviderMatcher_1 = IProviderMatcher.ProviderMatcherToken;\n\nvar MethodAutorun_1 = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n\n\n\n\n\n/**\n * Inject DrawType action.\n *\n * @export\n * @class SetPropAction\n * @extends {ActionComposite}\n */\nvar MethodAutorun = /** @class */ (function (_super) {\n    tslib_1.__extends(MethodAutorun, _super);\n    function MethodAutorun() {\n        return _super.call(this, CoreActions_1.CoreActions.methodAutorun) || this;\n    }\n    MethodAutorun.prototype.working = function (container, data) {\n        if (data.raiseContainer && data.raiseContainer !== container) {\n            return;\n        }\n        if (data.target && data.targetType) {\n            if (factories.hasMethodMetadata(decorators.Autorun, data.targetType)) {\n                var metas = factories.getMethodMetadata(decorators.Autorun, data.targetType);\n                var lastmetas_1 = [];\n                var idx_1 = utils.lang.keys(metas).length;\n                utils.lang.forIn(metas, function (mm, key) {\n                    if (mm && mm.length) {\n                        var m = mm[0];\n                        m.autorun = key;\n                        idx_1++;\n                        if (!utils.isNumber(m.order)) {\n                            m.order = idx_1;\n                        }\n                        lastmetas_1.push(m);\n                    }\n                });\n                lastmetas_1.sort(function (au1, au2) {\n                    return au1.order - au1.order;\n                }).forEach(function (aut) {\n                    container.syncInvoke(data.targetType, aut.autorun, data.target);\n                });\n            }\n        }\n    };\n    MethodAutorun.classAnnations = { \"name\": \"MethodAutorun\", \"params\": { \"constructor\": [], \"working\": [\"container\", \"data\"] } };\n    return MethodAutorun;\n}(ActionComposite_1.ActionComposite));\nexports.MethodAutorun = MethodAutorun;\n\n\n\n\n});\n\nunwrapExports(MethodAutorun_1);\nvar MethodAutorun_2 = MethodAutorun_1.MethodAutorun;\n\nvar ActionFactory_1 = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n\n/**\n * action factory.\n *\n * @export\n * @class ActionFactory\n */\nvar ActionFactory = /** @class */ (function () {\n    function ActionFactory() {\n    }\n    /**\n     * create action by action type. type in 'CoreActions'\n     *\n     * @param {string} type\n     * @returns {ActionComponent}\n     * @memberof ActionFactory\n     */\n    ActionFactory.prototype.create = function (type) {\n        var action;\n        switch (type) {\n            case actions.CoreActions.bindParameterType:\n                action = new actions.BindParameterTypeAction();\n                break;\n            case actions.CoreActions.bindPropertyType:\n                action = new actions.BindPropertyTypeAction();\n                break;\n            case actions.CoreActions.injectProperty:\n                action = new actions.InjectPropertyAction();\n                break;\n            case actions.CoreActions.bindProvider:\n                action = new actions.BindProviderAction();\n                break;\n            case actions.CoreActions.bindParameterProviders:\n                action = new actions.BindParameterProviderAction();\n                break;\n            case actions.CoreActions.componentInit:\n                action = new actions.ComponentInitAction();\n                break;\n            case actions.CoreActions.componentBeforeInit:\n                action = new actions.ComponentBeforeInitAction();\n                break;\n            case actions.CoreActions.componentAfterInit:\n                action = new actions.ComponentAfterInitAction();\n                break;\n            case actions.CoreActions.cache:\n                action = new actions.CacheAction();\n                break;\n            case actions.CoreActions.singletion:\n                action = new actions.SingletionAction();\n                break;\n            case actions.CoreActions.autorun:\n                action = new actions.AutorunAction();\n                break;\n            case actions.CoreActions.methodAutorun:\n                action = new MethodAutorun_1.MethodAutorun();\n                break;\n            default:\n                action = new actions.ActionComposite(type);\n                break;\n        }\n        return action;\n    };\n    ActionFactory.classAnnations = { \"name\": \"ActionFactory\", \"params\": { \"create\": [\"type\"] } };\n    return ActionFactory;\n}());\nexports.ActionFactory = ActionFactory;\n\n\n\n\n});\n\nunwrapExports(ActionFactory_1);\nvar ActionFactory_2 = ActionFactory_1.ActionFactory;\n\nvar DefaultLifeScope_1 = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n\n\n\n\n\n/**\n * default implement life scope.\n *\n * @export\n * @class DefaultLifeScope\n * @implements {LifeScope}\n */\nvar DefaultLifeScope = /** @class */ (function () {\n    function DefaultLifeScope(container) {\n        this.container = container;\n        this.decorators = [];\n        this.buildAction();\n    }\n    DefaultLifeScope.prototype.addAction = function (action) {\n        var nodepaths = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            nodepaths[_i - 1] = arguments[_i];\n        }\n        var parent = this.action;\n        nodepaths.forEach(function (pathname) {\n            parent = parent.find(function (act) { return act.name === pathname; });\n        });\n        if (parent) {\n            parent.add(action);\n        }\n        return this;\n    };\n    DefaultLifeScope.prototype.registerDecorator = function (decorator) {\n        var actions$$2 = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            actions$$2[_i - 1] = arguments[_i];\n        }\n        var type = this.getDecoratorType(decorator);\n        return this.registerCustomDecorator.apply(this, [decorator, type].concat(actions$$2));\n    };\n    DefaultLifeScope.prototype.registerCustomDecorator = function (decorator, type) {\n        var actions$$2 = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            actions$$2[_i - 2] = arguments[_i];\n        }\n        var types$$2 = this.toActionName(type);\n        var name = decorator.toString();\n        if (!this.decorators.some(function (d) { return d.name === name; })) {\n            this.decorators.push({\n                name: name,\n                types: types$$2,\n                actions: actions$$2\n            });\n        }\n        return this;\n    };\n    DefaultLifeScope.prototype.execute = function (data) {\n        var names = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            names[_i - 1] = arguments[_i];\n        }\n        names = names.filter(function (n) { return !!n; });\n        var act = this.action;\n        names.forEach(function (name) {\n            act = act.find(function (itm) { return itm.name === name; });\n        });\n        if (act) {\n            act.execute(this.container, data);\n        }\n    };\n    DefaultLifeScope.prototype.routeExecute = function (data) {\n        var names = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            names[_i - 1] = arguments[_i];\n        }\n        var _a;\n        this.execute.apply(this, [data].concat(names));\n        var container = this.container.parent;\n        while (container) {\n            (_a = container.getLifeScope()).execute.apply(_a, [utils.lang.assign({}, data)].concat(names));\n            container = container.parent;\n        }\n    };\n    DefaultLifeScope.prototype.getClassDecorators = function (match) {\n        return this.getTypeDecorators(this.toActionName(factories.DecoratorType.Class), match);\n    };\n    DefaultLifeScope.prototype.getMethodDecorators = function (match) {\n        return this.getTypeDecorators(this.toActionName(factories.DecoratorType.Method), match);\n    };\n    DefaultLifeScope.prototype.getPropertyDecorators = function (match) {\n        return this.getTypeDecorators(this.toActionName(factories.DecoratorType.Property), match);\n    };\n    DefaultLifeScope.prototype.getParameterDecorators = function (match) {\n        return this.getTypeDecorators(this.toActionName(factories.DecoratorType.Parameter), match);\n    };\n    DefaultLifeScope.prototype.getDecoratorType = function (decirator) {\n        return decirator.decoratorType || factories.DecoratorType.All;\n    };\n    /**\n     * is vaildate dependence type or not. dependence type must with class decorator.\n     *\n     * @template T\n     * @param {Type<T>} target\n     * @returns {boolean}\n     * @memberof Container\n     */\n    DefaultLifeScope.prototype.isVaildDependence = function (target) {\n        if (!target) {\n            return false;\n        }\n        if (!utils.isClass(target)) {\n            return false;\n        }\n        if (utils.isAbstractDecoratorClass(target)) {\n            return false;\n        }\n        return this.getClassDecorators().some(function (act) { return factories.hasOwnClassMetadata(act.name, target); });\n    };\n    DefaultLifeScope.prototype.getAtionByName = function (name) {\n        return this.action.find(function (action) { return action.name === name; });\n    };\n    DefaultLifeScope.prototype.getClassAction = function () {\n        return this.getAtionByName(this.toActionName(factories.DecoratorType.Class));\n    };\n    DefaultLifeScope.prototype.getMethodAction = function () {\n        return this.getAtionByName(this.toActionName(factories.DecoratorType.Method));\n    };\n    DefaultLifeScope.prototype.getPropertyAction = function () {\n        return this.getAtionByName(this.toActionName(factories.DecoratorType.Property));\n    };\n    DefaultLifeScope.prototype.getParameterAction = function () {\n        return this.getAtionByName(this.toActionName(factories.DecoratorType.Parameter));\n    };\n    /**\n     * get constructor parameters metadata.\n     *\n     * @template T\n     * @param {Type<T>} type\n     * @returns {IParameter[]}\n     * @memberof IContainer\n     */\n    DefaultLifeScope.prototype.getConstructorParameters = function (type) {\n        return this.getParameters(type);\n    };\n    /**\n     * get method params metadata.\n     *\n     * @template T\n     * @param {Type<T>} type\n     * @param {T} instance\n     * @param {(string | symbol)} propertyKey\n     * @returns {IParameter[]}\n     * @memberof IContainer\n     */\n    DefaultLifeScope.prototype.getMethodParameters = function (type, instance, propertyKey) {\n        return this.getParameters(type, instance, propertyKey);\n    };\n    /**\n     * get paramerter names.\n     *\n     * @template T\n     * @param {Type<T>} type\n     * @param {string} propertyKey\n     * @returns {string[]}\n     * @memberof DefaultLifeScope\n     */\n    DefaultLifeScope.prototype.getParamerterNames = function (type, propertyKey) {\n        var metadata = factories.getOwnParamerterNames(type);\n        var paramNames = [];\n        if (metadata && metadata.hasOwnProperty(propertyKey)) {\n            paramNames = metadata[propertyKey];\n        }\n        if (!utils.isArray(paramNames)) {\n            paramNames = [];\n        }\n        return paramNames;\n    };\n    DefaultLifeScope.prototype.isSingletonType = function (type) {\n        if (factories.hasOwnClassMetadata(decorators.Singleton, type)) {\n            return true;\n        }\n        return this.getClassDecorators().some(function (surm) {\n            var metadatas = factories.getOwnTypeMetadata(surm.name, type) || [];\n            if (utils.isArray(metadatas)) {\n                return metadatas.some(function (m) { return m.singleton === true; });\n            }\n            return false;\n        });\n    };\n    DefaultLifeScope.prototype.getMethodMetadatas = function (type, propertyKey) {\n        var metadatas = [];\n        this.getMethodDecorators().forEach(function (dec) {\n            var metas = factories.getOwnMethodMetadata(dec.name, type);\n            if (metas.hasOwnProperty(propertyKey)) {\n                metadatas = metadatas.concat(metas[propertyKey] || []);\n            }\n        });\n        return metadatas;\n    };\n    DefaultLifeScope.prototype.filerDecorators = function (express) {\n        return this.decorators.filter(express);\n    };\n    DefaultLifeScope.prototype.getParameters = function (type, instance, propertyKey) {\n        propertyKey = propertyKey || 'constructor';\n        var data = {\n            target: instance,\n            targetType: type,\n            propertyKey: propertyKey\n        };\n        this.execute(data, actions.LifeState.onInit, actions.CoreActions.bindParameterType);\n        var paramNames = this.getParamerterNames(type, propertyKey);\n        if (data.execResult.length) {\n            return data.execResult.map(function (typ, idx) {\n                return {\n                    type: typ,\n                    name: paramNames[idx]\n                };\n            });\n        }\n        else {\n            return paramNames.map(function (name) {\n                return {\n                    name: name,\n                    type: undefined\n                };\n            });\n        }\n    };\n    DefaultLifeScope.prototype.getTypeDecorators = function (decType, match) {\n        return this.filerDecorators(function (value) {\n            var flag = (value.types || '').indexOf(decType) >= 0;\n            if (flag && match) {\n                flag = match(value);\n            }\n            return flag;\n        });\n    };\n    DefaultLifeScope.prototype.buildAction = function () {\n        var factory = new ActionFactory_1.ActionFactory();\n        var action = factory.create('');\n        action\n            .add(factory.create(types.IocState.design)\n            .add(factory.create(actions.CoreActions.bindProvider))\n            .add(factory.create(actions.CoreActions.autorun)))\n            .add(factory.create(types.IocState.runtime)\n            .add(factory.create(actions.LifeState.beforeCreateArgs))\n            .add(factory.create(actions.LifeState.beforeConstructor))\n            .add(factory.create(actions.LifeState.afterConstructor))\n            .add(factory.create(actions.LifeState.onInit)\n            .add(factory.create(actions.CoreActions.componentBeforeInit))\n            .add(factory.create(this.toActionName(factories.DecoratorType.Class)))\n            .add(factory.create(this.toActionName(factories.DecoratorType.Method)))\n            .add(factory.create(this.toActionName(factories.DecoratorType.Property))\n            .add(factory.create(actions.CoreActions.bindPropertyType))\n            .add(factory.create(actions.CoreActions.injectProperty)))\n            .add(factory.create(this.toActionName(factories.DecoratorType.Parameter))\n            .add(factory.create(actions.CoreActions.bindParameterType))\n            .add(factory.create(actions.CoreActions.bindParameterProviders)))\n            .add(factory.create(actions.CoreActions.componentInit)))\n            .add(factory.create(actions.LifeState.AfterInit)\n            .add(factory.create(actions.CoreActions.singletion))\n            .add(factory.create(actions.CoreActions.componentAfterInit))\n            .add(factory.create(actions.CoreActions.methodAutorun))))\n            .add(factory.create(actions.CoreActions.cache));\n        this.action = action;\n    };\n    DefaultLifeScope.prototype.toActionName = function (type) {\n        var types$$2 = [];\n        if (type & factories.DecoratorType.Class) {\n            types$$2.push('ClassDecorator');\n        }\n        if (type & factories.DecoratorType.Method) {\n            types$$2.push('MethodDecorator');\n        }\n        if (type & factories.DecoratorType.Property) {\n            types$$2.push('PropertyDecorator');\n        }\n        if (type & factories.DecoratorType.Parameter) {\n            types$$2.push('ParameterDecorator');\n        }\n        return types$$2.join(',');\n    };\n    DefaultLifeScope.classAnnations = { \"name\": \"DefaultLifeScope\", \"params\": { \"constructor\": [\"container\"], \"addAction\": [\"action\", \"nodepaths\"], \"registerDecorator\": [\"decorator\", \"actions\"], \"registerCustomDecorator\": [\"decorator\", \"type\", \"actions\"], \"execute\": [\"data\", \"names\"], \"routeExecute\": [\"data\", \"names\"], \"getClassDecorators\": [\"match\"], \"getMethodDecorators\": [\"match\"], \"getPropertyDecorators\": [\"match\"], \"getParameterDecorators\": [\"match\"], \"getDecoratorType\": [\"decirator\"], \"isVaildDependence\": [\"target\"], \"getAtionByName\": [\"name\"], \"getClassAction\": [], \"getMethodAction\": [], \"getPropertyAction\": [], \"getParameterAction\": [], \"getConstructorParameters\": [\"type\"], \"getMethodParameters\": [\"type\", \"instance\", \"propertyKey\"], \"getParamerterNames\": [\"type\", \"propertyKey\"], \"isSingletonType\": [\"type\"], \"getMethodMetadatas\": [\"type\", \"propertyKey\"], \"filerDecorators\": [\"express\"], \"getParameters\": [\"type\", \"instance\", \"propertyKey\"], \"getTypeDecorators\": [\"decType\", \"match\"], \"buildAction\": [], \"toActionName\": [\"type\"] } };\n    return DefaultLifeScope;\n}());\nexports.DefaultLifeScope = DefaultLifeScope;\n\n\n\n\n});\n\nunwrapExports(DefaultLifeScope_1);\nvar DefaultLifeScope_2 = DefaultLifeScope_1.DefaultLifeScope;\n\nvar ProviderMatcher_1 = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n\n/**\n * provider matcher. use to find custome providers in resolve.\n *\n * @export\n * @class ProviderMatcher\n * @implements {IProviderMatcher}\n */\nvar ProviderMatcher = /** @class */ (function () {\n    function ProviderMatcher(container) {\n        this.container = container;\n    }\n    ProviderMatcher.prototype.toProviderMap = function () {\n        var _this = this;\n        var providers$$1 = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            providers$$1[_i] = arguments[_i];\n        }\n        if (providers$$1.length === 1 && providers.isProviderMap(providers$$1[0])) {\n            return providers$$1[0];\n        }\n        var map = this.container.resolve(providers.ProviderMapToken);\n        providers$$1.forEach(function (p, index) {\n            if (utils.isUndefined(p) || utils.isNull(p)) {\n                return;\n            }\n            if (providers.isProviderMap(p)) {\n                map.copy(p);\n            }\n            else if (p instanceof providers.Provider) {\n                if (p instanceof providers.ParamProvider) {\n                    if (!p.type && utils.isNumber(p.index)) {\n                        map.add(p.index, function () {\n                            var providers$$1 = [];\n                            for (var _i = 0; _i < arguments.length; _i++) {\n                                providers$$1[_i] = arguments[_i];\n                            }\n                            return p.resolve.apply(p, [_this.container].concat(providers$$1));\n                        });\n                    }\n                    else {\n                        map.add(p.type, function () {\n                            var providers$$1 = [];\n                            for (var _i = 0; _i < arguments.length; _i++) {\n                                providers$$1[_i] = arguments[_i];\n                            }\n                            return p.resolve.apply(p, [_this.container].concat(providers$$1));\n                        });\n                    }\n                }\n                else {\n                    map.add(p.type, function () {\n                        var providers$$1 = [];\n                        for (var _i = 0; _i < arguments.length; _i++) {\n                            providers$$1[_i] = arguments[_i];\n                        }\n                        return p.resolve.apply(p, [_this.container].concat(providers$$1));\n                    });\n                }\n            }\n            else if (utils.isClass(p)) {\n                if (!_this.container.has(p)) {\n                    _this.container.register(p);\n                }\n                map.add(p, p);\n            }\n            else if (utils.isBaseObject(p)) {\n                var pr_1 = p;\n                var isobjMap = false;\n                if (utils.isToken(pr_1.provide)) {\n                    if (utils.isArray(pr_1.deps) && pr_1.deps.length) {\n                        pr_1.deps.forEach(function (d) {\n                            if (utils.isClass(d) && !_this.container.has(d)) {\n                                _this.container.register(d);\n                            }\n                        });\n                    }\n                    if (!utils.isUndefined(pr_1.useValue)) {\n                        map.add(pr_1.provide, function () { return pr_1.useValue; });\n                    }\n                    else if (utils.isClass(pr_1.useClass)) {\n                        if (!_this.container.has(pr_1.useClass)) {\n                            _this.container.register(pr_1.useClass);\n                        }\n                        map.add(pr_1.provide, pr_1.useClass);\n                    }\n                    else if (utils.isFunction(pr_1.useFactory)) {\n                        map.add(pr_1.provide, function () {\n                            var args = [];\n                            if (utils.isArray(pr_1.deps) && pr_1.deps.length) {\n                                args = pr_1.deps.map(function (d) {\n                                    if (utils.isClass(d)) {\n                                        return _this.container.get(d);\n                                    }\n                                    else {\n                                        return d;\n                                    }\n                                });\n                            }\n                            return pr_1.useFactory.apply(pr_1, args);\n                        });\n                    }\n                    else if (utils.isToken(pr_1.useExisting)) {\n                        if (_this.container.has(pr_1.useExisting)) {\n                            map.add(pr_1.provide, function () { return _this.container.resolve(pr_1.useExisting); });\n                        }\n                        else {\n                            console.log('has not register:', pr_1.useExisting);\n                        }\n                    }\n                    else {\n                        isobjMap = true;\n                    }\n                }\n                else {\n                    isobjMap = true;\n                }\n                if (isobjMap) {\n                    utils.lang.forIn(p, function (val, name) {\n                        if (!utils.isUndefined(val)) {\n                            if (utils.isClass(val)) {\n                                map.add(name, val);\n                            }\n                            else if (utils.isFunction(val) || utils.isString(val)) {\n                                map.add(name, function () { return val; });\n                            }\n                            else {\n                                map.add(name, val);\n                            }\n                        }\n                    });\n                }\n            }\n            else if (utils.isFunction(p)) {\n                map.add(name, function () { return p; });\n            }\n            else {\n                map.add(index, p);\n            }\n        });\n        return map;\n    };\n    ProviderMatcher.prototype.matchProviders = function (params) {\n        var providers$$1 = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            providers$$1[_i - 1] = arguments[_i];\n        }\n        return this.match(params, this.toProviderMap.apply(this, providers$$1));\n    };\n    ProviderMatcher.prototype.match = function (params, providers$$1) {\n        var _this = this;\n        var map = this.container.resolve(providers.ProviderMapToken);\n        if (!params.length) {\n            return map;\n        }\n        params.forEach(function (param, index) {\n            if (!param.name) {\n                return;\n            }\n            if (providers$$1.has(param.name)) {\n                map.add(param.name, providers$$1.get(param.name));\n            }\n            else if (utils.isToken(param.type)) {\n                if (providers$$1.has(param.type)) {\n                    map.add(param.name, providers$$1.get(param.type));\n                }\n                else if (_this.container.has(param.type)) {\n                    map.add(param.name, param.type);\n                }\n            }\n            else if (providers$$1.has(index)) {\n                map.add(param.name, providers$$1.get(index));\n            }\n        });\n        return map;\n    };\n    ProviderMatcher.classAnnations = { \"name\": \"ProviderMatcher\", \"params\": { \"constructor\": [\"container\"], \"toProviderMap\": [\"providers\"], \"matchProviders\": [\"params\", \"providers\"], \"match\": [\"params\", \"providers\"] } };\n    return ProviderMatcher;\n}());\nexports.ProviderMatcher = ProviderMatcher;\n\n\n\n\n});\n\nunwrapExports(ProviderMatcher_1);\nvar ProviderMatcher_2 = ProviderMatcher_1.ProviderMatcher;\n\nvar MethodAccessor_1 = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n\n\n\n/**\n * method accessor\n *\n * @export\n * @class MethodAccessor\n * @implements {IMethodAccessor}\n */\nvar MethodAccessor = /** @class */ (function () {\n    function MethodAccessor(container) {\n        this.container = container;\n    }\n    MethodAccessor.prototype.getMatcher = function () {\n        return this.container.get(IProviderMatcher.ProviderMatcherToken);\n    };\n    MethodAccessor.prototype.invoke = function (token, propertyKey, target) {\n        var providers = [];\n        for (var _i = 3; _i < arguments.length; _i++) {\n            providers[_i - 3] = arguments[_i];\n        }\n        return tslib_1.__awaiter(this, void 0, void 0, function () {\n            var _a, targetClass, actionData, lifeScope, parameters, paramInstances;\n            return tslib_1.__generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        if (!target) {\n                            target = (_a = this.container).resolve.apply(_a, [token].concat(providers));\n                        }\n                        targetClass = this.container.getTokenImpl(token);\n                        if (!targetClass) {\n                            throw Error(token.toString() + ' is not implements by any class.');\n                        }\n                        if (!(target && utils.isFunction(target[propertyKey]))) return [3 /*break*/, 2];\n                        actionData = {\n                            target: target,\n                            targetType: targetClass,\n                            propertyKey: propertyKey,\n                        };\n                        lifeScope = this.container.getLifeScope();\n                        lifeScope.execute(actionData, actions.LifeState.onInit, actions.CoreActions.bindParameterProviders);\n                        providers = providers.concat(actionData.execResult);\n                        parameters = lifeScope.getMethodParameters(targetClass, target, propertyKey);\n                        return [4 /*yield*/, this.createParams.apply(this, [parameters].concat(providers))];\n                    case 1:\n                        paramInstances = _b.sent();\n                        return [2 /*return*/, target[propertyKey].apply(target, paramInstances)];\n                    case 2: throw new Error(\"type: \" + targetClass + \" has no method \" + propertyKey.toString() + \".\");\n                }\n            });\n        });\n    };\n    MethodAccessor.prototype.syncInvoke = function (token, propertyKey, target) {\n        var providers = [];\n        for (var _i = 3; _i < arguments.length; _i++) {\n            providers[_i - 3] = arguments[_i];\n        }\n        var _a;\n        if (!target) {\n            target = (_a = this.container).resolve.apply(_a, [token].concat(providers));\n        }\n        var targetClass = this.container.getTokenImpl(token);\n        if (!targetClass) {\n            throw Error(token.toString() + ' is not implements by any class.');\n        }\n        if (target && utils.isFunction(target[propertyKey])) {\n            var actionData = {\n                target: target,\n                targetType: targetClass,\n                propertyKey: propertyKey,\n            };\n            var lifeScope = this.container.getLifeScope();\n            lifeScope.execute(actionData, actions.LifeState.onInit, actions.CoreActions.bindParameterProviders);\n            providers = providers.concat(actionData.execResult);\n            var parameters = lifeScope.getMethodParameters(targetClass, target, propertyKey);\n            var paramInstances = this.createSyncParams.apply(this, [parameters].concat(providers));\n            return target[propertyKey].apply(target, paramInstances);\n        }\n        else {\n            throw new Error(\"type: \" + targetClass + \" has no method \" + propertyKey.toString() + \".\");\n        }\n    };\n    MethodAccessor.prototype.createSyncParams = function (params) {\n        var _this = this;\n        var providers = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            providers[_i - 1] = arguments[_i];\n        }\n        var _a;\n        var providerMap = (_a = this.getMatcher()).matchProviders.apply(_a, [params].concat(providers));\n        return params.map(function (param, index) {\n            var _a;\n            if (param.name && providerMap.has(param.name)) {\n                return providerMap.resolve(param.name);\n            }\n            else if (utils.isToken(param.type)) {\n                return (_a = _this.container).resolve.apply(_a, [param.type].concat(providers));\n            }\n            else {\n                return undefined;\n            }\n        });\n    };\n    MethodAccessor.prototype.createParams = function (params) {\n        var _this = this;\n        var providers = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            providers[_i - 1] = arguments[_i];\n        }\n        var _a;\n        var providerMap = (_a = this.getMatcher()).matchProviders.apply(_a, [params].concat(providers));\n        return Promise.all(params.map(function (param, index) {\n            var _a;\n            if (param.name && providerMap.has(param.name)) {\n                return providerMap.resolve(param.name);\n            }\n            else if (utils.isToken(param.type)) {\n                return (_a = _this.container).resolve.apply(_a, [param.type].concat(providers));\n            }\n            else {\n                return undefined;\n            }\n        }));\n    };\n    MethodAccessor.classAnnations = { \"name\": \"MethodAccessor\", \"params\": { \"constructor\": [\"container\"], \"getMatcher\": [], \"invoke\": [\"token\", \"propertyKey\", \"target\", \"providers\"], \"syncInvoke\": [\"token\", \"propertyKey\", \"target\", \"providers\"], \"createSyncParams\": [\"params\", \"providers\"], \"createParams\": [\"params\", \"providers\"] } };\n    return MethodAccessor;\n}());\nexports.MethodAccessor = MethodAccessor;\n\n\n\n\n});\n\nunwrapExports(MethodAccessor_1);\nvar MethodAccessor_2 = MethodAccessor_1.MethodAccessor;\n\nvar CacheManager_1 = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n/**\n * cache manager.\n *\n * @export\n * @class CacheManager\n * @implements {ICacheManager}\n */\nvar CacheManager = /** @class */ (function () {\n    function CacheManager(container) {\n        this.container = container;\n        this.cacheTokens = new utils.MapSet();\n    }\n    CacheManager.prototype.isChecking = function () {\n        return !!this.timeout;\n    };\n    CacheManager.prototype.hasCache = function (targetType) {\n        return this.cacheTokens.has(targetType);\n    };\n    CacheManager.prototype.cache = function (targetType, target, expires) {\n        var cache;\n        if (this.hasCache(targetType)) {\n            cache = this.cacheTokens.get(targetType);\n            cache.expires = Date.now() + expires;\n        }\n        else {\n            cache = {\n                target: target,\n                expires: Date.now() + expires\n            };\n        }\n        this.cacheTokens.set(targetType, cache);\n        if (!this.isChecking()) {\n            this.checkExpires();\n        }\n    };\n    CacheManager.prototype.get = function (targetType, expires) {\n        var result = null;\n        if (!this.cacheTokens.has(targetType)) {\n            return null;\n        }\n        var cache = this.cacheTokens.get(targetType);\n        if (cache.expires <= Date.now()) {\n            result = cache.target;\n            if (utils.isNumber(expires) && expires > 0) {\n                cache.expires = Date.now() + expires;\n                this.cacheTokens.set(targetType, cache);\n            }\n        }\n        else {\n            this.destroy(targetType, cache.target);\n        }\n        return result;\n    };\n    CacheManager.prototype.checkExpires = function () {\n        var _this = this;\n        if (this.timeout) {\n            clearTimeout(this.timeout);\n            this.timeout = 0;\n        }\n        if (this.cacheTokens.size > 0) {\n            var timeoutCaches_1 = [];\n            this.cacheTokens.forEach(function (cache, targetType) {\n                if (cache.expires >= Date.now()) {\n                    timeoutCaches_1.push(targetType);\n                }\n            });\n            if (timeoutCaches_1.length) {\n                timeoutCaches_1.forEach(function (targetType) {\n                    _this.destroy(targetType, _this.cacheTokens.get(targetType).target);\n                });\n            }\n            this.timeout = setTimeout(function () {\n                _this.checkExpires();\n            }, 60000);\n        }\n    };\n    CacheManager.prototype.destroy = function (targetType, target) {\n        if (!this.hasCache(targetType)) {\n            return;\n        }\n        if (!target) {\n            target = this.cacheTokens.get(targetType).target;\n        }\n        try {\n            var component = target;\n            if (utils.isFunction(component.onDestroy)) {\n                this.container.syncInvoke(targetType, 'onDestroy', target);\n            }\n            this.cacheTokens.delete(targetType);\n        }\n        catch (err) {\n            console.error && console.error(err);\n        }\n    };\n    CacheManager.classAnnations = { \"name\": \"CacheManager\", \"params\": { \"constructor\": [\"container\"], \"isChecking\": [], \"hasCache\": [\"targetType\"], \"cache\": [\"targetType\", \"target\", \"expires\"], \"get\": [\"targetType\", \"expires\"], \"checkExpires\": [], \"destroy\": [\"targetType\", \"target\"] } };\n    return CacheManager;\n}());\nexports.CacheManager = CacheManager;\n\n\n\n\n});\n\nunwrapExports(CacheManager_1);\nvar CacheManager_2 = CacheManager_1.CacheManager;\n\nvar core = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\ntslib_1.__exportStar(actions, exports);\ntslib_1.__exportStar(decorators, exports);\ntslib_1.__exportStar(factories, exports);\ntslib_1.__exportStar(providers, exports);\ntslib_1.__exportStar(IRecognizer, exports);\ntslib_1.__exportStar(IProviderMatcher, exports);\ntslib_1.__exportStar(ActionFactory_1, exports);\ntslib_1.__exportStar(DefaultLifeScope_1, exports);\ntslib_1.__exportStar(ProviderMatcher_1, exports);\ntslib_1.__exportStar(MethodAccessor_1, exports);\ntslib_1.__exportStar(CacheManager_1, exports);\n\n\n\n\n});\n\nunwrapExports(core);\n\nvar LifeScope = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n/**\n * life scope interface symbol.\n * it is a symbol id, you can register yourself MethodAccessor for this.\n */\nexports.LifeScopeToken = new InjectToken_1.InjectToken('DI_LifeScope');\n\n\n\n\n});\n\nunwrapExports(LifeScope);\nvar LifeScope_1 = LifeScope.LifeScopeToken;\n\nvar IContainerBuilder = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n/**\n * ContainerBuilder interface token.\n * it is a token id, you can register yourself IContainerBuilder for this.\n */\nexports.ContainerBuilderToken = new InjectToken_1.InjectToken('DI_IContainerBuilder');\n\n\n\n\n});\n\nunwrapExports(IContainerBuilder);\nvar IContainerBuilder_1 = IContainerBuilder.ContainerBuilderToken;\n\nvar ResolverChain_1 = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n\n\nexports.ResolverChainToken = new InjectToken_1.InjectToken('di_ResolverChain');\nvar ResolverChain = /** @class */ (function () {\n    function ResolverChain(container) {\n        this.container = container;\n        this.resolvers = [];\n    }\n    ResolverChain.prototype.next = function (resolver) {\n        if (!this.hasResolver(resolver)) {\n            this.resolvers.push(resolver);\n        }\n    };\n    ResolverChain.prototype.toArray = function () {\n        return [this.container].concat(this.resolvers);\n    };\n    ResolverChain.prototype.hasResolver = function (resolver) {\n        if (resolver instanceof Container_1.Container) {\n            return this.resolvers.indexOf(resolver) >= 0;\n        }\n        else {\n            return this.resolvers.some(function (a) {\n                if (a instanceof Container_1.Container) {\n                    return false;\n                }\n                else {\n                    if (!a.type || !resolver.type) {\n                        return false;\n                    }\n                    return a.type === resolver.type;\n                }\n            });\n        }\n    };\n    ResolverChain.prototype.hasToken = function (resolver, token) {\n        var _this = this;\n        if (!token) {\n            return false;\n        }\n        if (resolver instanceof Container_1.Container) {\n            return resolver.hasRegister(token);\n        }\n        else {\n            if (resolver.type === token || this.container.getTokenKey(resolver.token) === token) {\n                return true;\n            }\n            var exps_1 = resolver.exports || [];\n            return exps_1.concat(resolver.providers || []).some(function (t) {\n                if (_this.container.getTokenKey(t) === token) {\n                    return true;\n                }\n                else if (!utils.isClass(token)) {\n                    if (resolver.container.hasRegister(token)) {\n                        var type = resolver.container.getTokenImpl(token);\n                        return exps_1.indexOf(type) >= 0;\n                    }\n                }\n                return false;\n            });\n        }\n    };\n    ResolverChain.prototype.resolve = function (token) {\n        var _this = this;\n        var providers = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            providers[_i - 1] = arguments[_i];\n        }\n        var _a, _b;\n        var resolver = this.toArray().find(function (r) { return _this.hasToken(r, token); });\n        if (!resolver && !this.container.parent) {\n            console.log('have not register', token);\n            return null;\n        }\n        if (resolver) {\n            if (resolver instanceof Container_1.Container) {\n                return resolver.resolveValue.apply(resolver, [token].concat(providers));\n            }\n            else {\n                return (_a = resolver.container).resolveValue.apply(_a, [token].concat(providers));\n            }\n        }\n        else {\n            return (_b = this.container.parent).resolve.apply(_b, [token].concat(providers));\n        }\n    };\n    ResolverChain.prototype.unregister = function (token) {\n        var _this = this;\n        var resolver = this.toArray().find(function (r) { return _this.hasToken(r, token); });\n        if (resolver) {\n            if (resolver instanceof Container_1.Container) {\n                resolver.unregister(token, false);\n            }\n            else {\n                var idx = this.resolvers.indexOf(resolver);\n                if (idx >= 0 && idx < this.resolvers.length) {\n                    this.resolvers.splice(idx, 1);\n                }\n            }\n        }\n        else if (this.container.parent) {\n            this.container.parent.unregister(token);\n        }\n    };\n    ResolverChain.prototype.getTokenImpl = function (token) {\n        var _this = this;\n        var resolver = this.toArray().find(function (r) { return _this.hasToken(r, token); });\n        if (resolver) {\n            if (resolver instanceof Container_1.Container) {\n                return resolver.getTokenImpl(token, false);\n            }\n            else {\n                return resolver.container.getTokenImpl(token, false);\n            }\n        }\n        else if (this.container.parent) {\n            return this.container.parent.getTokenImpl(token);\n        }\n        else {\n            return null;\n        }\n    };\n    ResolverChain.prototype.hasRegister = function (token) {\n        var _this = this;\n        if (this.container.hasRegister(token)) {\n            return true;\n        }\n        if (this.resolvers.length) {\n            return this.resolvers.some(function (r) { return _this.hasToken(r, token); });\n        }\n        return false;\n    };\n    ResolverChain.prototype.has = function (token) {\n        if (this.hasRegister(token)) {\n            return true;\n        }\n        if (this.container.parent) {\n            return this.container.parent.has(token);\n        }\n        return false;\n    };\n    ResolverChain.classAnnations = { \"name\": \"ResolverChain\", \"params\": { \"constructor\": [\"container\"], \"next\": [\"resolver\"], \"toArray\": [], \"hasResolver\": [\"resolver\"], \"hasToken\": [\"resolver\", \"token\"], \"resolve\": [\"token\", \"providers\"], \"unregister\": [\"token\"], \"getTokenImpl\": [\"token\"], \"hasRegister\": [\"token\"], \"has\": [\"token\"] } };\n    return ResolverChain;\n}());\nexports.ResolverChain = ResolverChain;\n\n\n\n\n});\n\nunwrapExports(ResolverChain_1);\nvar ResolverChain_2 = ResolverChain_1.ResolverChainToken;\nvar ResolverChain_3 = ResolverChain_1.ResolverChain;\n\nvar resolves = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\ntslib_1.__exportStar(ResolverChain_1, exports);\n\n\n\n\n});\n\nunwrapExports(resolves);\n\nvar registerCores_1 = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n\n\n\n\n\n\n\n\n/**\n * register core for container.\n *\n * @export\n * @param {IContainer} container\n */\nfunction registerCores(container) {\n    container.registerSingleton(LifeScope.LifeScopeToken, function () { return new DefaultLifeScope_1.DefaultLifeScope(container); });\n    container.registerSingleton(ICacheManager.CacheManagerToken, function () { return new core.CacheManager(container); });\n    container.registerSingleton(resolves.ResolverChainToken, function () { return new resolves.ResolverChain(container); });\n    container.register(core.ProviderMapToken, function () { return new core.ProviderMap(container); });\n    container.bindProvider(core.ProviderMap, core.ProviderMapToken);\n    container.registerSingleton(core.ProviderMatcherToken, function () { return new core.ProviderMatcher(container); });\n    container.registerSingleton(IMethodAccessor.MethodAccessorToken, function () { return new MethodAccessor_1.MethodAccessor(container); });\n    var lifeScope = container.get(LifeScope.LifeScopeToken);\n    lifeScope.registerDecorator(decorators.Injectable, actions.CoreActions.bindProvider, actions.CoreActions.cache);\n    lifeScope.registerDecorator(decorators.Component, actions.CoreActions.bindProvider, actions.CoreActions.cache, actions.CoreActions.componentBeforeInit, actions.CoreActions.componentInit, actions.CoreActions.componentAfterInit);\n    lifeScope.registerDecorator(decorators.Singleton, actions.CoreActions.bindProvider);\n    lifeScope.registerDecorator(decorators.Abstract, actions.CoreActions.bindProvider, actions.CoreActions.cache);\n    lifeScope.registerDecorator(decorators.AutoWired, actions.CoreActions.bindParameterType, actions.CoreActions.bindPropertyType);\n    lifeScope.registerDecorator(decorators.Inject, actions.CoreActions.bindParameterType, actions.CoreActions.bindPropertyType);\n    lifeScope.registerDecorator(decorators.Param, actions.CoreActions.bindParameterType, actions.CoreActions.bindPropertyType);\n    lifeScope.registerDecorator(decorators.Method, actions.CoreActions.bindParameterProviders);\n    lifeScope.registerDecorator(decorators.Autorun, actions.CoreActions.autorun, actions.CoreActions.methodAutorun);\n    lifeScope.registerDecorator(decorators.IocExt, actions.CoreActions.autorun, actions.CoreActions.componentBeforeInit, actions.CoreActions.componentInit, actions.CoreActions.componentAfterInit);\n    container.register(Date, function () { return new Date(); });\n    container.register(String, function () { return ''; });\n    container.register(Number, function () { return Number.NaN; });\n    container.register(Boolean, function () { return undefined; });\n}\nexports.registerCores = registerCores;\n\n\n\n\n});\n\nunwrapExports(registerCores_1);\nvar registerCores_2 = registerCores_1.registerCores;\n\nvar Container_1 = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Container\n *\n * @export\n * @class Container\n * @implements {IContainer}\n */\nvar Container = /** @class */ (function () {\n    function Container() {\n        this.init();\n    }\n    Container.prototype.getRoot = function () {\n        var root = this;\n        while (root.parent) {\n            root = root.parent;\n        }\n        return root;\n    };\n    Container.prototype.getBuilder = function () {\n        return this.resolveValue(IContainerBuilder.ContainerBuilderToken);\n    };\n    /**\n     * Retrieves an instance from the container based on the provided token.\n     *\n     * @template T\n     * @param {Token<T>} token\n     * @param {string} [alias]\n     * @param {...Providers[]} providers\n     * @returns {T}\n     * @memberof Container\n     */\n    Container.prototype.get = function (token, alias) {\n        var providers = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            providers[_i - 2] = arguments[_i];\n        }\n        return this.resolve.apply(this, [alias ? this.getTokenKey(token, alias) : token].concat(providers));\n    };\n    Object.defineProperty(Container.prototype, \"resolvers\", {\n        /**\n        * resolve token value in this container only.\n        *\n        * @template T\n        * @param {Token<T>} token\n        * @param {...Providers[]} providers\n        * @returns {T}\n        * @memberof Container\n        */\n        get: function () {\n            return this.resolveValue(resolves.ResolverChainToken);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * resolve type instance with token and param provider.\n     *\n     * @template T\n     * @param {Token<T>} token\n     * @param {T} [notFoundValue]\n     * @param {...Providers[]} providers\n     * @memberof Container\n     */\n    Container.prototype.resolve = function (token) {\n        var providers = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            providers[_i - 1] = arguments[_i];\n        }\n        var _a;\n        var key = this.getTokenKey(token);\n        return (_a = this.resolvers).resolve.apply(_a, [key].concat(providers));\n    };\n    /**\n     * resolve token value in this container only.\n     *\n     * @template T\n     * @param {Token<T>} token\n     * @param {...Providers[]} providers\n     * @returns {T}\n     * @memberof IContainer\n     */\n    Container.prototype.resolveValue = function (token) {\n        var providers = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            providers[_i - 1] = arguments[_i];\n        }\n        var key = this.getTokenKey(token);\n        if (!this.hasRegister(key)) {\n            return null;\n        }\n        var factory = this.factories.get(key);\n        return factory.apply(void 0, providers);\n    };\n    /**\n     * clear cache.\n     *\n     * @param {Type<any>} targetType\n     * @memberof IContainer\n     */\n    Container.prototype.clearCache = function (targetType) {\n        this.resolveValue(ICacheManager.CacheManagerToken).destroy(targetType);\n    };\n    /**\n     * get token.\n     *\n     * @template T\n     * @param {Token<T>} token\n     * @param {string} [alias]\n     * @returns {Token<T>}\n     * @memberof Container\n     */\n    Container.prototype.getToken = function (token, alias) {\n        if (alias) {\n            return new Registration_1.Registration(token, alias);\n        }\n        return token;\n    };\n    /**\n     * get tocken key.\n     *\n     * @template T\n     * @param {Token<T>} token\n     * @param {string} [alias]\n     * @returns {SymbolType<T>}\n     * @memberof Container\n     */\n    Container.prototype.getTokenKey = function (token, alias) {\n        if (alias) {\n            return new Registration_1.Registration(token, alias).toString();\n        }\n        else if (token instanceof Registration_1.Registration) {\n            return token.toString();\n        }\n        return token;\n    };\n    /**\n     * register type.\n     * @abstract\n     * @template T\n     * @param {Token<T>} token\n     * @param {T} [value]\n     * @returns {this}\n     * @memberOf Container\n     */\n    Container.prototype.register = function (token, value) {\n        this.registerFactory(token, value);\n        return this;\n    };\n    /**\n     * has register the token or not.\n     *\n     * @template T\n     * @param {Token<T>} token\n     * @param {string} [alias]\n     * @returns {boolean}\n     * @memberof Container\n     */\n    Container.prototype.has = function (token, alias) {\n        var key = this.getTokenKey(token, alias);\n        return this.resolvers.has(key);\n    };\n    /**\n     * has register type.\n     *\n     * @template T\n     * @param {SymbolType<T>} key\n     * @returns\n     * @memberof Container\n     */\n    Container.prototype.hasRegister = function (key) {\n        return this.factories.has(key);\n    };\n    /**\n     * unregister the token\n     *\n     * @template T\n     * @param {Token<T>} token\n     * @returns {this}\n     * @memberof Container\n     */\n    Container.prototype.unregister = function (token, inchain) {\n        var key = this.getTokenKey(token);\n        if (inchain === false) {\n            if (this.hasRegister(key)) {\n                this.factories.delete(key);\n                if (this.provideTypes.has(key)) {\n                    this.provideTypes.delete(key);\n                }\n                if (utils.isClass(key)) {\n                    this.clearCache(key);\n                }\n            }\n        }\n        else {\n            this.resolvers.unregister(key);\n        }\n        return this;\n    };\n    /**\n     * register stingleton type.\n     * @abstract\n     * @template T\n     * @param {Token<T>} token\n     * @param {Factory<T>} [value]\n     * @returns {this}\n     * @memberOf Container\n     */\n    Container.prototype.registerSingleton = function (token, value) {\n        this.registerFactory(token, value, true);\n        return this;\n    };\n    /**\n     * register value.\n     *\n     * @template T\n     * @param {Token<T>} token\n     * @param {T} value\n     * @returns {this}\n     * @memberof Container\n     */\n    Container.prototype.registerValue = function (token, value) {\n        var _this = this;\n        var key = this.getTokenKey(token);\n        this.singleton.set(key, value);\n        if (!this.factories.has(key)) {\n            this.factories.set(key, function () {\n                return _this.singleton.get(key);\n            });\n        }\n        return this;\n    };\n    /**\n     * bind provider.\n     *\n     * @template T\n     * @param {Token<T>} provide\n     * @param {Token<T>} provider\n     * @returns {this}\n     * @memberof Container\n     */\n    Container.prototype.bindProvider = function (provide, provider) {\n        var _this = this;\n        var provideKey = this.getTokenKey(provide);\n        var factory;\n        if (utils.isToken(provider)) {\n            factory = function () {\n                var providers = [];\n                for (var _i = 0; _i < arguments.length; _i++) {\n                    providers[_i] = arguments[_i];\n                }\n                return _this.resolve.apply(_this, [provider].concat(providers));\n            };\n        }\n        else {\n            if (utils.isFunction(provider)) {\n                factory = function () {\n                    var providers = [];\n                    for (var _i = 0; _i < arguments.length; _i++) {\n                        providers[_i] = arguments[_i];\n                    }\n                    return provider.apply(void 0, [_this].concat(providers));\n                };\n            }\n            else {\n                factory = function () {\n                    return provider;\n                };\n            }\n        }\n        if (utils.isClass(provider)) {\n            if (!this.has(provider)) {\n                this.register(provider);\n            }\n            this.provideTypes.set(provideKey, provider);\n        }\n        else if (utils.isToken(provider)) {\n            var token = provider;\n            while (this.provideTypes.has(token) && !utils.isClass(token)) {\n                token = this.provideTypes.get(token);\n                if (utils.isClass(token)) {\n                    this.provideTypes.set(provideKey, token);\n                    break;\n                }\n            }\n        }\n        this.factories.set(provideKey, factory);\n        return this;\n    };\n    /**\n     * get token implements class type.\n     *\n     * @template T\n     * @param {Token<T>} token\n     * @param {boolean} [inchain]\n     * @returns {Type<T>}\n     * @memberof Container\n     */\n    Container.prototype.getTokenImpl = function (token, inchain) {\n        var tokenKey = this.getTokenKey(token);\n        if (inchain === false) {\n            if (utils.isClass(token)) {\n                return token;\n            }\n            if (this.provideTypes.has(tokenKey)) {\n                return this.provideTypes.get(tokenKey);\n            }\n            return null;\n        }\n        else {\n            return this.resolvers.getTokenImpl(tokenKey);\n        }\n    };\n    /**\n     * get token implement class and base classes.\n     *\n     * @param {Token<any>} token\n     * @returns {Token<any>[]}\n     * @memberof Container\n     */\n    Container.prototype.getTokenExtendsChain = function (token) {\n        if (utils.isClass(token)) {\n            return this.getBaseClasses(token);\n        }\n        else {\n            return this.getBaseClasses(this.getTokenImpl(token)).concat([token]);\n        }\n    };\n    Container.prototype.getBaseClasses = function (target) {\n        var types$$1 = [];\n        while (utils.isClass(target) && target !== Object) {\n            types$$1.push(target);\n            target = utils.lang.getParentClass(target);\n        }\n        return types$$1;\n    };\n    /**\n    * get life scope of container.\n    *\n    * @returns {LifeScope}\n    * @memberof IContainer\n    */\n    Container.prototype.getLifeScope = function () {\n        return this.get(LifeScope.LifeScopeToken);\n    };\n    /**\n     * use modules.\n     *\n     * @param {...Modules[]} modules\n     * @returns {this}\n     * @memberof Container\n     */\n    Container.prototype.use = function () {\n        var modules = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            modules[_i] = arguments[_i];\n        }\n        var _a;\n        (_a = this.getBuilder()).syncLoadModule.apply(_a, [this].concat(modules));\n        return this;\n    };\n    /**\n     * async use modules.\n     *\n     * @param {...LoadType[]} modules load modules.\n     * @returns {Promise<Type<any>[]>}  types loaded.\n     * @memberof IContainer\n     */\n    Container.prototype.loadModule = function () {\n        var modules = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            modules[_i] = arguments[_i];\n        }\n        var _a;\n        return (_a = this.getBuilder()).loadModule.apply(_a, [this].concat(modules));\n    };\n    /**\n     * invoke method async.\n     *\n     * @template T\n     * @param {Token<any>} token\n     * @param {string} propertyKey\n     * @param {*} [instance]\n     * @param {...Providers[]} providers\n     * @returns {Promise<T>}\n     * @memberof Container\n     */\n    Container.prototype.invoke = function (token, propertyKey, instance) {\n        var providers = [];\n        for (var _i = 3; _i < arguments.length; _i++) {\n            providers[_i - 3] = arguments[_i];\n        }\n        var _a;\n        return (_a = this.resolveValue(IMethodAccessor.MethodAccessorToken)).invoke.apply(_a, [token, propertyKey, instance].concat(providers));\n    };\n    /**\n     * invoke method.\n     *\n     * @template T\n     * @param {Token<any>} token\n     * @param {string} propertyKey\n     * @param {*} [instance]\n     * @param {...Providers[]} providers\n     * @returns {T}\n     * @memberof Container\n     */\n    Container.prototype.syncInvoke = function (token, propertyKey, instance) {\n        var providers = [];\n        for (var _i = 3; _i < arguments.length; _i++) {\n            providers[_i - 3] = arguments[_i];\n        }\n        var _a;\n        return (_a = this.resolveValue(IMethodAccessor.MethodAccessorToken)).syncInvoke.apply(_a, [token, propertyKey, instance].concat(providers));\n    };\n    Container.prototype.createSyncParams = function (params) {\n        var providers = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            providers[_i - 1] = arguments[_i];\n        }\n        var _a;\n        return (_a = this.resolveValue(IMethodAccessor.MethodAccessorToken)).createSyncParams.apply(_a, [params].concat(providers));\n    };\n    Container.prototype.createParams = function (params) {\n        var providers = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            providers[_i - 1] = arguments[_i];\n        }\n        var _a;\n        return (_a = this.resolveValue(IMethodAccessor.MethodAccessorToken)).createParams.apply(_a, [params].concat(providers));\n    };\n    Container.prototype.cacheDecorator = function (map, action) {\n        if (!map.has(action.name)) {\n            map.set(action.name, action);\n        }\n    };\n    Container.prototype.init = function () {\n        var _this = this;\n        this.factories = new utils.MapSet();\n        this.singleton = new utils.MapSet();\n        this.provideTypes = new utils.MapSet();\n        this.bindProvider(IContainer.ContainerToken, function () { return _this; });\n        registerCores_1.registerCores(this);\n    };\n    Container.prototype.registerFactory = function (token, value, singleton) {\n        var key = this.getTokenKey(token);\n        if (this.factories.has(key)) {\n            return;\n        }\n        var classFactory;\n        if (!utils.isUndefined(value)) {\n            if (utils.isFunction(value)) {\n                if (utils.isClass(value)) {\n                    this.bindTypeFactory(key, value, singleton);\n                }\n                else {\n                    classFactory = this.createCustomFactory(key, value, singleton);\n                }\n            }\n            else if (singleton && value !== undefined) {\n                classFactory = this.createCustomFactory(key, function () { return value; }, singleton);\n            }\n        }\n        else if (!utils.isString(token) && !utils.isSymbol(token)) {\n            var ClassT = (token instanceof Registration_1.Registration) ? token.getClass() : token;\n            if (utils.isClass(ClassT)) {\n                this.bindTypeFactory(key, ClassT, singleton);\n            }\n        }\n        if (classFactory) {\n            this.factories.set(key, classFactory);\n        }\n    };\n    Container.prototype.createCustomFactory = function (key, factory, singleton) {\n        var _this = this;\n        return singleton ?\n            function () {\n                var providers = [];\n                for (var _i = 0; _i < arguments.length; _i++) {\n                    providers[_i] = arguments[_i];\n                }\n                if (_this.singleton.has(key)) {\n                    return _this.singleton.get(key);\n                }\n                var instance = factory.apply(void 0, [_this].concat(providers));\n                _this.singleton.set(key, instance);\n                return instance;\n            }\n            : function () {\n                var providers = [];\n                for (var _i = 0; _i < arguments.length; _i++) {\n                    providers[_i] = arguments[_i];\n                }\n                return factory.apply(void 0, [_this].concat(providers));\n            };\n    };\n    Container.prototype.bindTypeFactory = function (key, ClassT, singleton) {\n        var _this = this;\n        if (!Reflect.isExtensible(ClassT)) {\n            return;\n        }\n        var lifeScope = this.getLifeScope();\n        var parameters = lifeScope.getConstructorParameters(ClassT);\n        if (!singleton) {\n            singleton = lifeScope.isSingletonType(ClassT);\n        }\n        var factory = function () {\n            var providers = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                providers[_i] = arguments[_i];\n            }\n            var _a;\n            if (singleton && _this.singleton.has(key)) {\n                return _this.singleton.get(key);\n            }\n            if (providers.length < 1) {\n                var lifecycleData = {\n                    tokenKey: key,\n                    targetType: ClassT,\n                    // raiseContainer: this,\n                    singleton: singleton\n                };\n                lifeScope.execute(lifecycleData, core.CoreActions.cache);\n                if (lifecycleData.execResult && lifecycleData.execResult instanceof ClassT) {\n                    return lifecycleData.execResult;\n                }\n            }\n            var providerMap = (_a = _this.get(core.ProviderMatcherToken)).toProviderMap.apply(_a, providers);\n            lifeScope.execute({\n                tokenKey: key,\n                targetType: ClassT,\n                raiseContainer: _this,\n                params: parameters,\n                providers: providers,\n                providerMap: providerMap,\n                singleton: singleton\n            }, types.IocState.runtime, core.LifeState.beforeCreateArgs);\n            var args = _this.createSyncParams(parameters, providerMap);\n            lifeScope.routeExecute({\n                tokenKey: key,\n                targetType: ClassT,\n                raiseContainer: _this,\n                args: args,\n                params: parameters,\n                providers: providers,\n                providerMap: providerMap,\n                singleton: singleton\n            }, types.IocState.runtime, core.LifeState.beforeConstructor);\n            var instance = new (ClassT.bind.apply(ClassT, [void 0].concat(args)))();\n            lifeScope.routeExecute({\n                tokenKey: key,\n                target: instance,\n                targetType: ClassT,\n                raiseContainer: _this,\n                args: args,\n                params: parameters,\n                providers: providers,\n                providerMap: providerMap,\n                singleton: singleton\n            }, types.IocState.runtime, core.LifeState.afterConstructor);\n            lifeScope.execute({\n                tokenKey: key,\n                target: instance,\n                targetType: ClassT,\n                raiseContainer: _this,\n                args: args,\n                params: parameters,\n                providers: providers,\n                providerMap: providerMap,\n                singleton: singleton\n            }, types.IocState.runtime, core.LifeState.onInit);\n            lifeScope.routeExecute({\n                tokenKey: key,\n                target: instance,\n                targetType: ClassT,\n                raiseContainer: _this,\n                args: args,\n                params: parameters,\n                providers: providers,\n                providerMap: providerMap,\n                singleton: singleton\n            }, types.IocState.runtime, core.LifeState.AfterInit);\n            lifeScope.execute({\n                tokenKey: key,\n                target: instance,\n                targetType: ClassT,\n                raiseContainer: _this\n            }, core.CoreActions.cache);\n            return instance;\n        };\n        this.factories.set(key, factory);\n        lifeScope.routeExecute({\n            tokenKey: key,\n            targetType: ClassT,\n            raiseContainer: this\n        }, types.IocState.design);\n    };\n    Container.classAnnations = { \"name\": \"Container\", \"params\": { \"constructor\": [], \"getRoot\": [], \"getBuilder\": [], \"get\": [\"token\", \"alias\", \"providers\"], \"resolve\": [\"token\", \"providers\"], \"resolveValue\": [\"token\", \"providers\"], \"clearCache\": [\"targetType\"], \"getToken\": [\"token\", \"alias\"], \"getTokenKey\": [\"token\", \"alias\"], \"register\": [\"token\", \"value\"], \"has\": [\"token\", \"alias\"], \"hasRegister\": [\"key\"], \"unregister\": [\"token\", \"inchain\"], \"registerSingleton\": [\"token\", \"value\"], \"registerValue\": [\"token\", \"value\"], \"bindProvider\": [\"provide\", \"provider\"], \"getTokenImpl\": [\"token\", \"inchain\"], \"getTokenExtendsChain\": [\"token\"], \"getBaseClasses\": [\"target\"], \"getLifeScope\": [], \"use\": [\"modules\"], \"loadModule\": [\"modules\"], \"invoke\": [\"token\", \"propertyKey\", \"instance\", \"providers\"], \"syncInvoke\": [\"token\", \"propertyKey\", \"instance\", \"providers\"], \"createSyncParams\": [\"params\", \"providers\"], \"createParams\": [\"params\", \"providers\"], \"cacheDecorator\": [\"map\", \"action\"], \"init\": [], \"registerFactory\": [\"token\", \"value\", \"singleton\"], \"createCustomFactory\": [\"key\", \"factory\", \"singleton\"], \"bindTypeFactory\": [\"key\", \"ClassT\", \"singleton\"] } };\n    return Container;\n}());\nexports.Container = Container;\n\n\n\n\n});\n\nunwrapExports(Container_1);\nvar Container_2 = Container_1.Container;\n\nvar IModuleLoader = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n/**\n * module loader token.\n */\nexports.ModuleLoaderToken = new InjectToken_1.InjectToken('DI_ModuleLoader');\n\n\n\n\n});\n\nunwrapExports(IModuleLoader);\nvar IModuleLoader_1 = IModuleLoader.ModuleLoaderToken;\n\nvar DefaultModuleLoader_1 = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n\n/**\n * default module loader.\n *\n * @export\n * @class DefaultModuleLoader\n * @implements {IModuleLoader}\n */\nvar DefaultModuleLoader = /** @class */ (function () {\n    function DefaultModuleLoader() {\n    }\n    DefaultModuleLoader.prototype.getLoader = function () {\n        if (!this._loader) {\n            this._loader = this.createLoader();\n        }\n        return this._loader;\n    };\n    /**\n     * load module.\n     *\n     * @param {...LoadType[]} modules\n     * @returns {Promise<Modules[]>}\n     * @memberof DefaultModuleLoader\n     */\n    DefaultModuleLoader.prototype.load = function (modules) {\n        var _this = this;\n        if (modules.length) {\n            return Promise.all(modules.map(function (mdty) {\n                if (utils.isString(mdty)) {\n                    return _this.isFile(mdty) ? _this.loadFile(mdty) : _this.loadModule(mdty);\n                }\n                else if (utils.isObject(mdty) && (mdty['modules'] || mdty['files'])) {\n                    return _this.loadPathModule(mdty);\n                }\n                else {\n                    return mdty ? [mdty] : [];\n                }\n            }))\n                .then(function (allms) {\n                var rmodules = [];\n                allms.forEach(function (ms) {\n                    rmodules = rmodules.concat(ms);\n                });\n                return rmodules;\n            });\n        }\n        else {\n            return Promise.resolve([]);\n        }\n    };\n    /**\n     * load types from module.\n     *\n     * @param {...LoadType[]} modules\n     * @returns {Promise<Type<any>[]>}\n     * @memberof IContainerBuilder\n     */\n    DefaultModuleLoader.prototype.loadTypes = function (modules) {\n        return tslib_1.__awaiter(this, void 0, void 0, function () {\n            var mdls;\n            return tslib_1.__generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.load(modules)];\n                    case 1:\n                        mdls = _a.sent();\n                        return [2 /*return*/, this.getTypes(mdls)];\n                }\n            });\n        });\n    };\n    /**\n     * get all class type in modules.\n     *\n     * @param {Modules[]} modules\n     * @param {...Express<Type<any>, boolean>[]} filters\n     * @returns {Type<any>[]}\n     * @memberof DefaultModuleLoader\n     */\n    DefaultModuleLoader.prototype.getTypes = function (modules) {\n        var _this = this;\n        var regModules = [];\n        modules.forEach(function (m) {\n            var types = _this.getContentTypes(m);\n            regModules.push(types);\n        });\n        return regModules;\n    };\n    DefaultModuleLoader.prototype.loadFile = function (files, basePath) {\n        var loader = this.getLoader();\n        var fRes;\n        if (utils.isArray(files)) {\n            fRes = Promise.all(files.map(function (f) { return loader(f); }))\n                .then(function (allms) {\n                var rms = [];\n                allms.forEach(function (ms) {\n                    rms = rms.concat(ms);\n                });\n                return rms;\n            });\n        }\n        else {\n            fRes = loader(files);\n        }\n        return fRes.then(function (ms) { return ms.filter(function (it) { return !!it; }); });\n    };\n    DefaultModuleLoader.prototype.isFile = function (str) {\n        return str && /\\/((\\w|%|\\.))+\\.\\w+$/.test(str.replace(/\\\\\\\\/gi, '/'));\n    };\n    DefaultModuleLoader.prototype.loadModule = function (moduleName) {\n        var loader = this.getLoader();\n        return loader(moduleName).then(function (ms) { return ms.filter(function (it) { return !!it; }); });\n    };\n    DefaultModuleLoader.prototype.loadPathModule = function (pmd) {\n        return tslib_1.__awaiter(this, void 0, void 0, function () {\n            var modules;\n            var _this = this;\n            return tslib_1.__generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        modules = [];\n                        if (!pmd.files) return [3 /*break*/, 2];\n                        return [4 /*yield*/, this.loadFile(pmd.files, pmd.basePath)\n                                .then(function (allmoduls) {\n                                allmoduls.forEach(function (ms) {\n                                    modules = modules.concat(ms);\n                                });\n                                return modules;\n                            })];\n                    case 1:\n                        _a.sent();\n                        _a.label = 2;\n                    case 2:\n                        if (!pmd.modules) return [3 /*break*/, 4];\n                        return [4 /*yield*/, Promise.all(pmd.modules.map(function (nmd) {\n                                return utils.isString(nmd) ? _this.loadModule(nmd) : nmd;\n                            })).then(function (ms) {\n                                modules = modules.concat(ms);\n                                return modules;\n                            })];\n                    case 3:\n                        _a.sent();\n                        _a.label = 4;\n                    case 4: return [2 /*return*/, modules];\n                }\n            });\n        });\n    };\n    DefaultModuleLoader.prototype.createLoader = function () {\n        if (typeof commonjsRequire !== 'undefined') {\n            return function (modulepath) {\n                return new Promise(function (resolve, reject) {\n                    commonjsRequire([modulepath], function (mud) {\n                        resolve(mud);\n                    }, function (err) {\n                        reject(err);\n                    });\n                });\n            };\n        }\n        else {\n            throw new Error('has not module loader');\n        }\n    };\n    DefaultModuleLoader.prototype.getContentTypes = function (regModule) {\n        var regModules = [];\n        if (utils.isClass(regModule)) {\n            regModules.push(regModule);\n        }\n        else {\n            var rmodules = regModule['exports'] ? regModule['exports'] : regModule;\n            for (var p in rmodules) {\n                var type = rmodules[p];\n                if (utils.isClass(type)) {\n                    regModules.push(type);\n                }\n            }\n        }\n        return regModules;\n    };\n    DefaultModuleLoader.classAnnations = { \"name\": \"DefaultModuleLoader\", \"params\": { \"constructor\": [], \"getLoader\": [], \"load\": [\"modules\"], \"loadTypes\": [\"modules\"], \"getTypes\": [\"modules\"], \"loadFile\": [\"files\", \"basePath\"], \"isFile\": [\"str\"], \"loadModule\": [\"moduleName\"], \"loadPathModule\": [\"pmd\"], \"createLoader\": [], \"getContentTypes\": [\"regModule\"] } };\n    return DefaultModuleLoader;\n}());\nexports.DefaultModuleLoader = DefaultModuleLoader;\n\n\n\n\n});\n\nunwrapExports(DefaultModuleLoader_1);\nvar DefaultModuleLoader_2 = DefaultModuleLoader_1.DefaultModuleLoader;\n\nvar IModuleValidate = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n\n\n/**\n * inject module validate token.\n *\n * @export\n * @class InjectModuleValidateToken\n * @extends {Registration<T>}\n * @template T\n */\nvar InjectModuleValidateToken = /** @class */ (function (_super) {\n    tslib_1.__extends(InjectModuleValidateToken, _super);\n    function InjectModuleValidateToken(desc) {\n        return _super.call(this, 'DI_ModuleValidate', desc) || this;\n    }\n    InjectModuleValidateToken.classAnnations = { \"name\": \"InjectModuleValidateToken\", \"params\": { \"constructor\": [\"desc\"] } };\n    return InjectModuleValidateToken;\n}(Registration_1.Registration));\nexports.InjectModuleValidateToken = InjectModuleValidateToken;\n/**\n * Module Validate Token\n */\nexports.ModuleValidateToken = new InjectToken_1.InjectToken('DI_ModuleValidate');\n\n\n\n\n});\n\nunwrapExports(IModuleValidate);\nvar IModuleValidate_1 = IModuleValidate.InjectModuleValidateToken;\nvar IModuleValidate_2 = IModuleValidate.ModuleValidateToken;\n\nvar IMetaAccessor = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n\n/**\n * application service token.\n *\n * @export\n * @class InjectMetaAccessorToken\n * @extends {Registration<MetaAccessor<T>>}\n * @template T\n */\nvar InjectMetaAccessorToken = /** @class */ (function (_super) {\n    tslib_1.__extends(InjectMetaAccessorToken, _super);\n    function InjectMetaAccessorToken(type) {\n        return _super.call(this, type, 'boot__metaAccessor') || this;\n    }\n    InjectMetaAccessorToken.classAnnations = { \"name\": \"InjectMetaAccessorToken\", \"params\": { \"constructor\": [\"type\"] } };\n    return InjectMetaAccessorToken;\n}(Registration_1.Registration));\nexports.InjectMetaAccessorToken = InjectMetaAccessorToken;\n/**\n * default MetaAccessor token.\n */\nexports.DefaultMetaAccessorToken = new InjectMetaAccessorToken('default');\n/**\n * Annotation MetaAccessor token.\n */\nexports.AnnotationMetaAccessorToken = new InjectMetaAccessorToken('Annotation');\n\n\n\n\n});\n\nunwrapExports(IMetaAccessor);\nvar IMetaAccessor_1 = IMetaAccessor.InjectMetaAccessorToken;\nvar IMetaAccessor_2 = IMetaAccessor.DefaultMetaAccessorToken;\nvar IMetaAccessor_3 = IMetaAccessor.AnnotationMetaAccessorToken;\n\nvar ModuleValidate = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n\n\n\n\n/**\n * base module validate.\n *\n * @export\n * @abstract\n * @class BaseModuelValidate\n * @implements {IModuleValidate}\n */\nvar BaseModuelValidate = /** @class */ (function () {\n    function BaseModuelValidate() {\n    }\n    BaseModuelValidate.prototype.validate = function (type) {\n        if (!utils.isClass(type)) {\n            return false;\n        }\n        var decorator = this.getDecorator();\n        if (utils.isString(decorator)) {\n            return core.hasOwnClassMetadata(decorator, type);\n        }\n        else if (utils.isArray(decorator)) {\n            if (decorator.length > 0) {\n                return decorator.some(function (decor) { return core.hasOwnClassMetadata(decor, type); });\n            }\n        }\n        return false;\n    };\n    BaseModuelValidate.prototype.getMetaConfig = function (token, container) {\n        if (utils.isToken(token)) {\n            var accessor = this.getMetaAccessor(container);\n            return accessor.getMetadata(token, container);\n        }\n        return {};\n    };\n    BaseModuelValidate.prototype.getMetaAccessor = function (container) {\n        var decorator = this.getDecorator();\n        return container.resolve(IMetaAccessor.AnnotationMetaAccessorToken, { decorator: decorator });\n    };\n    BaseModuelValidate.classAnnations = { \"name\": \"BaseModuelValidate\", \"params\": { \"constructor\": [], \"validate\": [\"type\"], \"getMetaConfig\": [\"token\", \"container\"], \"getMetaAccessor\": [\"container\"], \"getDecorator\": [] } };\n    return BaseModuelValidate;\n}());\nexports.BaseModuelValidate = BaseModuelValidate;\n/**\n * IocExt module validate token.\n */\nexports.IocExtModuleValidateToken = new IModuleValidate.InjectModuleValidateToken(core.IocExt.toString());\n/**\n * IocExt module validate.\n *\n * @export\n * @class IocExtModuleValidate\n * @extends {BaseModuelValidate}\n * @implements {IModuleValidate}\n */\nvar IocExtModuleValidate = /** @class */ (function (_super) {\n    tslib_1.__extends(IocExtModuleValidate, _super);\n    function IocExtModuleValidate() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    IocExtModuleValidate.prototype.getDecorator = function () {\n        return core.IocExt.toString();\n    };\n    IocExtModuleValidate.classAnnations = { \"name\": \"IocExtModuleValidate\", \"params\": { \"getDecorator\": [] } };\n    return IocExtModuleValidate;\n}(BaseModuelValidate));\nexports.IocExtModuleValidate = IocExtModuleValidate;\n\n\n\n\n});\n\nunwrapExports(ModuleValidate);\nvar ModuleValidate_1 = ModuleValidate.BaseModuelValidate;\nvar ModuleValidate_2 = ModuleValidate.IocExtModuleValidateToken;\nvar ModuleValidate_3 = ModuleValidate.IocExtModuleValidate;\n\nvar MetaAccessor_1 = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n\n\n\nvar MetaAccessor = /** @class */ (function () {\n    function MetaAccessor(decorator) {\n        this.decorators = utils.isArray(decorator) ? decorator : [decorator];\n    }\n    MetaAccessor.prototype.getDecorators = function () {\n        return this.decorators;\n    };\n    MetaAccessor.prototype.getMetadata = function (token, container) {\n        var type = utils.isClass(token) ? token : container.getTokenImpl(token);\n        if (utils.isClass(type)) {\n            var decorators = this.getDecorators();\n            var firstDecor = decorators.find(function (decor) { return core.hasOwnClassMetadata(decor, type); });\n            var metas = core.getTypeMetadata(firstDecor, type);\n            if (metas && metas.length) {\n                var meta = metas[0];\n                return meta;\n            }\n        }\n        return {};\n    };\n    MetaAccessor.classAnnations = { \"name\": \"MetaAccessor\", \"params\": { \"constructor\": [\"decorator\"], \"getDecorators\": [], \"getMetadata\": [\"token\", \"container\"] } };\n    MetaAccessor = tslib_1.__decorate([\n        core.Injectable(IMetaAccessor.DefaultMetaAccessorToken),\n        tslib_1.__metadata(\"design:paramtypes\", [Object])\n    ], MetaAccessor);\n    return MetaAccessor;\n}());\nexports.MetaAccessor = MetaAccessor;\n/**\n * Annotation MetaAccessor.\n *\n * @export\n * @class AnnotationMetaAccessor\n * @implements {IMetaAccessor<any>}\n */\nvar AnnotationMetaAccessor = /** @class */ (function () {\n    function AnnotationMetaAccessor(decorator) {\n        this.decorators = utils.isArray(decorator) ? decorator : [decorator];\n    }\n    AnnotationMetaAccessor.prototype.getDecorators = function () {\n        return this.decorators;\n    };\n    AnnotationMetaAccessor.prototype.getMetadata = function (token, container) {\n        if (utils.isToken(token)) {\n            var accessor_1;\n            var provider_1 = { decorator: this.getDecorators() };\n            container.getTokenExtendsChain(token).forEach(function (tk) {\n                if (accessor_1) {\n                    return false;\n                }\n                var accToken = new IMetaAccessor.InjectMetaAccessorToken(tk);\n                if (container.has(accToken)) {\n                    accessor_1 = container.resolve(accToken, provider_1);\n                }\n                return true;\n            });\n            if (!accessor_1) {\n                accessor_1 = this.getDefaultMetaAccessor(container, provider_1);\n            }\n            if (accessor_1) {\n                return accessor_1.getMetadata(token, container);\n            }\n            else {\n                return {};\n            }\n        }\n        return {};\n    };\n    AnnotationMetaAccessor.prototype.getDefaultMetaAccessor = function (container) {\n        var providers = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            providers[_i - 1] = arguments[_i];\n        }\n        return container.resolve.apply(container, [IMetaAccessor.DefaultMetaAccessorToken].concat(providers));\n    };\n    AnnotationMetaAccessor.classAnnations = { \"name\": \"AnnotationMetaAccessor\", \"params\": { \"constructor\": [\"decorator\"], \"getDecorators\": [], \"getMetadata\": [\"token\", \"container\"], \"getDefaultMetaAccessor\": [\"container\", \"providers\"] } };\n    AnnotationMetaAccessor = tslib_1.__decorate([\n        core.Injectable(IMetaAccessor.AnnotationMetaAccessorToken),\n        tslib_1.__metadata(\"design:paramtypes\", [Object])\n    ], AnnotationMetaAccessor);\n    return AnnotationMetaAccessor;\n}());\nexports.AnnotationMetaAccessor = AnnotationMetaAccessor;\n\n\n\n\n});\n\nunwrapExports(MetaAccessor_1);\nvar MetaAccessor_2 = MetaAccessor_1.MetaAccessor;\nvar MetaAccessor_3 = MetaAccessor_1.AnnotationMetaAccessor;\n\nvar IModuleInjector = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n\n/**\n *  inject module injector token.\n */\nvar InjectModuleInjectorToken = /** @class */ (function (_super) {\n    tslib_1.__extends(InjectModuleInjectorToken, _super);\n    function InjectModuleInjectorToken(desc, sync) {\n        if (sync === void 0) { sync = false; }\n        return _super.call(this, sync ? 'DI_SyncModuleInjector' : 'DI_ModuleInjector', desc) || this;\n    }\n    InjectModuleInjectorToken.classAnnations = { \"name\": \"InjectModuleInjectorToken\", \"params\": { \"constructor\": [\"desc\", \"sync\"] } };\n    return InjectModuleInjectorToken;\n}(Registration_1.Registration));\nexports.InjectModuleInjectorToken = InjectModuleInjectorToken;\n/**\n * async module injector token.\n */\nexports.ModuleInjectorToken = new InjectModuleInjectorToken('');\n/**\n * Sync module injector token.\n */\nexports.SyncModuleInjectorToken = new InjectModuleInjectorToken('', true);\n\n\n\n\n});\n\nunwrapExports(IModuleInjector);\nvar IModuleInjector_1 = IModuleInjector.InjectModuleInjectorToken;\nvar IModuleInjector_2 = IModuleInjector.ModuleInjectorToken;\nvar IModuleInjector_3 = IModuleInjector.SyncModuleInjectorToken;\n\nvar ModuleInjector_1 = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n\n\n\n/**\n * base module injector. abstract class.\n *\n * @export\n * @abstract\n * @class BaseModuleInjector\n * @implements {IModuleInjector}\n */\nvar BaseModuleInjector = /** @class */ (function () {\n    /**\n     *Creates an instance of BaseModuleInjector.\n     * @param {IModuleValidate} [validate]\n     * @param {boolean} [skipNext] skip next when has match module to injector.\n     * @memberof BaseModuleInjector\n     */\n    function BaseModuleInjector(validate, skipNext) {\n        this.validate = validate;\n        this.skipNext = skipNext;\n    }\n    BaseModuleInjector.prototype.filter = function (modules) {\n        var _this = this;\n        modules = modules || [];\n        return this.validate ? modules.filter(function (md) { return _this.validate.validate(md); }) : modules;\n    };\n    BaseModuleInjector.prototype.next = function (all, filtered) {\n        if (filtered.length === 0) {\n            return all;\n        }\n        if (this.skipNext) {\n            return null;\n        }\n        if (filtered.length === all.length) {\n            return null;\n        }\n        return all.filter(function (it) { return filtered.indexOf(it) < 0; });\n    };\n    BaseModuleInjector.prototype.setup = function (container, type) {\n        container.register(type);\n    };\n    BaseModuleInjector.classAnnations = { \"name\": \"BaseModuleInjector\", \"params\": { \"constructor\": [\"validate\", \"skipNext\"], \"inject\": [\"container\", \"modules\"], \"filter\": [\"modules\"], \"next\": [\"all\", \"filtered\"], \"setup\": [\"container\", \"type\"] } };\n    return BaseModuleInjector;\n}());\nexports.BaseModuleInjector = BaseModuleInjector;\n/**\n * sync module injector.\n *\n * @export\n * @class SyncModuleInjector\n * @extends {BaseModuleInjector}\n * @implements {IModuleInjector}\n */\nvar SyncModuleInjector = /** @class */ (function (_super) {\n    tslib_1.__extends(SyncModuleInjector, _super);\n    function SyncModuleInjector(validate, skipNext) {\n        var _this = _super.call(this, validate, skipNext) || this;\n        _this.validate = validate;\n        return _this;\n    }\n    SyncModuleInjector.prototype.inject = function (container, modules) {\n        var _this = this;\n        var types = this.filter(modules);\n        if (types.length) {\n            types.forEach(function (ty) {\n                _this.setup(container, ty);\n            });\n        }\n        var next = this.next(modules, types);\n        return { injected: types, next: next };\n    };\n    SyncModuleInjector.classAnnations = { \"name\": \"SyncModuleInjector\", \"params\": { \"constructor\": [\"validate\", \"skipNext\"], \"inject\": [\"container\", \"modules\"] } };\n    SyncModuleInjector = tslib_1.__decorate([\n        core.Injectable(IModuleInjector.SyncModuleInjectorToken),\n        tslib_1.__metadata(\"design:paramtypes\", [Object, Boolean])\n    ], SyncModuleInjector);\n    return SyncModuleInjector;\n}(BaseModuleInjector));\nexports.SyncModuleInjector = SyncModuleInjector;\n/**\n * module injector.\n *\n * @export\n * @class ModuleInjector\n * @extends {BaseModuleInjector}\n * @implements {IModuleInjector}\n */\nvar ModuleInjector = /** @class */ (function (_super) {\n    tslib_1.__extends(ModuleInjector, _super);\n    function ModuleInjector(validate, skipNext) {\n        var _this = _super.call(this, validate, skipNext) || this;\n        _this.validate = validate;\n        return _this;\n    }\n    ModuleInjector.prototype.inject = function (container, modules) {\n        return tslib_1.__awaiter(this, void 0, void 0, function () {\n            var types, next;\n            var _this = this;\n            return tslib_1.__generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        types = this.filter(modules);\n                        if (!types.length) return [3 /*break*/, 2];\n                        return [4 /*yield*/, utils.PromiseUtil.step(types.map(function (ty) {\n                                return _this.setup(container, ty);\n                            }))];\n                    case 1:\n                        _a.sent();\n                        _a.label = 2;\n                    case 2:\n                        next = this.next(modules, types);\n                        return [2 /*return*/, { injected: types, next: next }];\n                }\n            });\n        });\n    };\n    ModuleInjector.classAnnations = { \"name\": \"ModuleInjector\", \"params\": { \"constructor\": [\"validate\", \"skipNext\"], \"inject\": [\"container\", \"modules\"] } };\n    ModuleInjector = tslib_1.__decorate([\n        core.Injectable(IModuleInjector.ModuleInjectorToken),\n        tslib_1.__metadata(\"design:paramtypes\", [Object, Boolean])\n    ], ModuleInjector);\n    return ModuleInjector;\n}(BaseModuleInjector));\nexports.ModuleInjector = ModuleInjector;\n\n\n\n\n});\n\nunwrapExports(ModuleInjector_1);\nvar ModuleInjector_2 = ModuleInjector_1.BaseModuleInjector;\nvar ModuleInjector_3 = ModuleInjector_1.SyncModuleInjector;\nvar ModuleInjector_4 = ModuleInjector_1.ModuleInjector;\n\nvar IModuleInjectorChain = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n/**\n * module fileter token. mast use as singlton.\n */\nexports.ModuleInjectorChainToken = new InjectToken_1.InjectToken('DI_ModuleInjectorChain');\n\n\n\n\n});\n\nunwrapExports(IModuleInjectorChain);\nvar IModuleInjectorChain_1 = IModuleInjectorChain.ModuleInjectorChainToken;\n\nvar ModuleInjectorChain_1 = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n\n\n/**\n * Module Injector chain, base injector chain.\n *\n * @export\n * @class ModuleInjectorChain\n * @implements {IModuleInjectorChain}\n */\nvar ModuleInjectorChain = /** @class */ (function () {\n    function ModuleInjectorChain() {\n        this._injectors = [];\n    }\n    Object.defineProperty(ModuleInjectorChain.prototype, \"injectors\", {\n        get: function () {\n            return this._injectors;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    ModuleInjectorChain.prototype.first = function (injector) {\n        if (this.isInjector(injector)) {\n            this._injectors.unshift(injector);\n        }\n        return this;\n    };\n    ModuleInjectorChain.prototype.next = function (injector) {\n        if (this.isInjector(injector)) {\n            this._injectors.push(injector);\n        }\n        return this;\n    };\n    ModuleInjectorChain.prototype.isInjector = function (injector) {\n        return injector instanceof ModuleInjector_1.ModuleInjector || injector instanceof ModuleInjector_1.SyncModuleInjector;\n    };\n    ModuleInjectorChain.prototype.inject = function (container, modules) {\n        return tslib_1.__awaiter(this, void 0, void 0, function () {\n            var types;\n            return tslib_1.__generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        types = [];\n                        return [4 /*yield*/, utils.PromiseUtil.forEach(this.injectors.map(function (jtor) { return function (ijrt) { return jtor.inject(container, ijrt.next); }; }), function (result) {\n                                types = types.concat(result.injected || []);\n                                return result.next && result.next.length > 0;\n                            }, { injected: [], next: modules }).catch(function (err) { return []; })];\n                    case 1:\n                        _a.sent();\n                        return [2 /*return*/, types];\n                }\n            });\n        });\n    };\n    ModuleInjectorChain.prototype.syncInject = function (container, modules) {\n        var types = [];\n        var completed = false;\n        this.injectors.forEach(function (jtor) {\n            if (completed) {\n                return false;\n            }\n            if (jtor instanceof ModuleInjector_1.SyncModuleInjector) {\n                var result = jtor.inject(container, modules);\n                types = types.concat(result.injected);\n                completed = (!result.next || result.next.length < 1);\n            }\n            return true;\n        });\n        return types;\n    };\n    ModuleInjectorChain.classAnnations = { \"name\": \"ModuleInjectorChain\", \"params\": { \"constructor\": [], \"first\": [\"injector\"], \"next\": [\"injector\"], \"isInjector\": [\"injector\"], \"inject\": [\"container\", \"modules\"], \"syncInject\": [\"container\", \"modules\"] } };\n    return ModuleInjectorChain;\n}());\nexports.ModuleInjectorChain = ModuleInjectorChain;\n\n\n\n\n});\n\nunwrapExports(ModuleInjectorChain_1);\nvar ModuleInjectorChain_2 = ModuleInjectorChain_1.ModuleInjectorChain;\n\nvar injectors = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\ntslib_1.__exportStar(IModuleLoader, exports);\ntslib_1.__exportStar(DefaultModuleLoader_1, exports);\ntslib_1.__exportStar(IModuleValidate, exports);\ntslib_1.__exportStar(ModuleValidate, exports);\ntslib_1.__exportStar(IMetaAccessor, exports);\ntslib_1.__exportStar(MetaAccessor_1, exports);\ntslib_1.__exportStar(IModuleInjector, exports);\ntslib_1.__exportStar(ModuleInjector_1, exports);\ntslib_1.__exportStar(IModuleInjectorChain, exports);\ntslib_1.__exportStar(ModuleInjectorChain_1, exports);\n\n\n\n\n});\n\nunwrapExports(injectors);\n\nvar DefaultContainerBuilder_1 = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n\n\n\n\n/**\n * default container builder.\n *\n * @export\n * @class DefaultContainerBuilder\n * @implements {IContainerBuilder}\n */\nvar DefaultContainerBuilder = /** @class */ (function () {\n    function DefaultContainerBuilder(loader) {\n        this._loader = loader;\n    }\n    Object.defineProperty(DefaultContainerBuilder.prototype, \"loader\", {\n        get: function () {\n            if (!this._loader) {\n                this._loader = new injectors.DefaultModuleLoader();\n            }\n            return this._loader;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    DefaultContainerBuilder.prototype.create = function () {\n        var _this = this;\n        var container = new Container_1.Container();\n        container.bindProvider(IContainerBuilder.ContainerBuilderToken, function () { return _this; });\n        container.bindProvider(injectors.ModuleLoaderToken, function () { return _this.loader; });\n        return container;\n    };\n    /**\n     * build container.\n     *\n     * @param {...LoadType[]} [modules]\n     * @returns\n     * @memberof DefaultContainerBuilder\n     */\n    DefaultContainerBuilder.prototype.build = function () {\n        var modules = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            modules[_i] = arguments[_i];\n        }\n        return tslib_1.__awaiter(this, void 0, void 0, function () {\n            var container;\n            return tslib_1.__generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        container = this.create();\n                        if (!modules.length) return [3 /*break*/, 2];\n                        return [4 /*yield*/, this.loadModule.apply(this, [container].concat(modules))];\n                    case 1:\n                        _a.sent();\n                        _a.label = 2;\n                    case 2: return [2 /*return*/, container];\n                }\n            });\n        });\n    };\n    /**\n     * load modules for container.\n     *\n     * @param {IContainer} container\n     * @param {...LoadType[]} modules\n     * @returns {Promise<Type<any>[]>}\n     * @memberof DefaultContainerBuilder\n     */\n    DefaultContainerBuilder.prototype.loadModule = function (container) {\n        var modules = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            modules[_i - 1] = arguments[_i];\n        }\n        return tslib_1.__awaiter(this, void 0, void 0, function () {\n            var regModules, injTypes, injChain_1;\n            var _this = this;\n            return tslib_1.__generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.loader.loadTypes(modules)];\n                    case 1:\n                        regModules = _a.sent();\n                        injTypes = [];\n                        if (!(regModules && regModules.length)) return [3 /*break*/, 3];\n                        injChain_1 = this.getInjectorChain(container);\n                        return [4 /*yield*/, utils.PromiseUtil.step(regModules.map(function (typs) { return tslib_1.__awaiter(_this, void 0, void 0, function () {\n                                var ityps;\n                                return tslib_1.__generator(this, function (_a) {\n                                    switch (_a.label) {\n                                        case 0: return [4 /*yield*/, injChain_1.inject(container, typs)];\n                                        case 1:\n                                            ityps = _a.sent();\n                                            injTypes = injTypes.concat(ityps);\n                                            return [2 /*return*/];\n                                    }\n                                });\n                            }); }))];\n                    case 2:\n                        _a.sent();\n                        _a.label = 3;\n                    case 3: return [2 /*return*/, injTypes];\n                }\n            });\n        });\n    };\n    DefaultContainerBuilder.prototype.syncBuild = function () {\n        var modules = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            modules[_i] = arguments[_i];\n        }\n        var container = this.create();\n        if (modules.length) {\n            this.syncLoadModule.apply(this, [container].concat(modules));\n        }\n        return container;\n    };\n    DefaultContainerBuilder.prototype.syncLoadModule = function (container) {\n        var modules = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            modules[_i - 1] = arguments[_i];\n        }\n        var regModules = this.loader.getTypes(modules);\n        var injTypes = [];\n        if (regModules && regModules.length) {\n            var injChain_2 = this.getInjectorChain(container);\n            regModules.forEach(function (typs) {\n                var ityps = injChain_2.syncInject(container, typs);\n                injTypes = injTypes.concat(ityps);\n            });\n        }\n        return injTypes;\n    };\n    DefaultContainerBuilder.prototype.getInjectorChain = function (container) {\n        if (!container.has(injectors.ModuleInjectorChainToken)) {\n            container.register(injectors.SyncModuleInjector)\n                .register(injectors.ModuleInjector)\n                .register(injectors.MetaAccessor)\n                .register(injectors.AnnotationMetaAccessor)\n                .bindProvider(injectors.IocExtModuleValidateToken, new injectors.IocExtModuleValidate())\n                .bindProvider(injectors.ModuleInjectorChainToken, new injectors.ModuleInjectorChain());\n        }\n        var currChain = container.get(injectors.ModuleInjectorChainToken);\n        if (this.injectorChain !== currChain) {\n            this.injectorChain = null;\n        }\n        if (!this.injectorChain) {\n            this.injectorChain = currChain;\n            this.injectorChain\n                .next(container.resolve(injectors.SyncModuleInjectorToken, { validate: container.get(injectors.IocExtModuleValidateToken), skipNext: true }))\n                .next(container.resolve(injectors.SyncModuleInjectorToken));\n        }\n        return this.injectorChain;\n    };\n    DefaultContainerBuilder.classAnnations = { \"name\": \"DefaultContainerBuilder\", \"params\": { \"constructor\": [\"loader\"], \"create\": [], \"build\": [\"modules\"], \"loadModule\": [\"container\", \"modules\"], \"syncBuild\": [\"modules\"], \"syncLoadModule\": [\"container\", \"modules\"], \"getInjectorChain\": [\"container\"] } };\n    return DefaultContainerBuilder;\n}());\nexports.DefaultContainerBuilder = DefaultContainerBuilder;\n\n\n\n\n});\n\nunwrapExports(DefaultContainerBuilder_1);\nvar DefaultContainerBuilder_2 = DefaultContainerBuilder_1.DefaultContainerBuilder;\n\nvar D__workspace_github_tsioc_packages_core_lib = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\ntslib_1.__exportStar(IContainer, exports);\ntslib_1.__exportStar(Container_1, exports);\ntslib_1.__exportStar(types, exports);\ntslib_1.__exportStar(Registration_1, exports);\ntslib_1.__exportStar(InjectToken_1, exports);\ntslib_1.__exportStar(IContainerBuilder, exports);\ntslib_1.__exportStar(IMethodAccessor, exports);\ntslib_1.__exportStar(ICacheManager, exports);\ntslib_1.__exportStar(LifeScope, exports);\ntslib_1.__exportStar(DefaultContainerBuilder_1, exports);\ntslib_1.__exportStar(utils, exports);\ntslib_1.__exportStar(components, exports);\ntslib_1.__exportStar(core, exports);\ntslib_1.__exportStar(injectors, exports);\ntslib_1.__exportStar(resolves, exports);\n\n\n\n\n});\n\nvar index$9 = unwrapExports(D__workspace_github_tsioc_packages_core_lib);\n\nreturn index$9;\n\n})));\n\n//# sourceMappingURL=sourcemaps/core.umd.js.map\n\n//# sourceMappingURL=sourcemaps/core.umd.js.map\n"]}