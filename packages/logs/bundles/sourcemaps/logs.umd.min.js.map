{"version":3,"sources":["logs.umd.min.js"],"names":["global","factory","exports","module","require","define","amd","logs","umd","js","tslib_1","this","core_1","aop_1","unwrapExports","x","__esModule","Object","prototype","hasOwnProperty","call","createCommonjsModule","fn","Level_1","Level","Levels","defineProperty","value","ILoggerManager","LoggerManagerToken","InjectToken","IConfigureLoggerManager","ConfigureLoggerManagerToken","LogConfigure","LogConfigureToken","ConfigureLoggerManger_1","ConfigureLoggerManger","container","config","setLogConfigure","get","_config","has","resolve","adapter","enumerable","configurable","isClass","register","_logManger","cfg","token","isString","Registration","configure","logManger","getLogger","name","classAnnations","params","constructor","__decorate","NonePointcut","Injectable","__param","Inject","ContainerToken","__metadata","ConsoleLogManager_1","ConsoleLogManager","logger","ConsoleLog","level","Singleton","log","message","args","_i","arguments","length","console","apply","concat","trace","debug","info","warn","error","fatal","LogFormater_1","LogFormaterToken","LogFormater","format","joinPoint","pointMsg","state","JoinpointState","Before","Pointcut","fullName","stringifyArgs","After","AfterReturning","stringify","returningValue","AfterThrowing","throwing","joinMessage","_this","argsStr","map","p","idx","arg","type","join","messgs","separator","filter","a","toString","stringifyArray","target","isArray","isBaseType","getClassName","isFunction","isDate","isSymbol","isObject","JSON","_a","LoggerAspect_1","LoggerAspect","_logger","processLog","annotation","forEach","logmeta","canlog","express","writeLog","logname","formatMessage","foramter","formatStr","Abstract","AnnotationLogerAspect_1","AnnotationLogerAspect","_super","__extends","logging","Function","Joinpoint","Array","Aspect","Logger","createClassMethodDecorator","next","isMetadata","isClassMetadata","match","setMetadata","metadata","LogModule_1","LogModule","setup","AopModule","LifeScopeToken","registerDecorator","LifeState","onInit","CoreActions","bindParameterProviders","IocExt","__exportStar"],"mappings":"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","file":"../logs.umd.min.js","sourcesContent":["(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory(require('tslib'), require('@ts-ioc/core'), require('@ts-ioc/aop')) :\n\ttypeof define === 'function' && define.amd ? define(['tslib', '@ts-ioc/core', '@ts-ioc/aop'], factory) :\n\t(global.logs = global.logs || {}, global.logs.umd = global.logs.umd || {}, global.logs.umd.js = factory(global.tslib_1,global['@ts-ioc/core'],global['@ts-ioc/aop']));\n}(this, (function (tslib_1,core_1,aop_1) { 'use strict';\n\ntslib_1 = tslib_1 && tslib_1.hasOwnProperty('default') ? tslib_1['default'] : tslib_1;\ncore_1 = core_1 && core_1.hasOwnProperty('default') ? core_1['default'] : core_1;\naop_1 = aop_1 && aop_1.hasOwnProperty('default') ? aop_1['default'] : aop_1;\n\nfunction unwrapExports (x) {\n\treturn x && x.__esModule && Object.prototype.hasOwnProperty.call(x, 'default') ? x['default'] : x;\n}\n\nfunction createCommonjsModule(fn, module) {\n\treturn module = { exports: {} }, fn(module, module.exports), module.exports;\n}\n\nvar Level_1 = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * log level items.\n *\n * @export\n * @enum {number}\n */\nvar Level;\n(function (Level) {\n    Level[\"log\"] = \"log\";\n    Level[\"trace\"] = \"trace\";\n    Level[\"debug\"] = \"debug\";\n    Level[\"info\"] = \"info\";\n    Level[\"warn\"] = \"warn\";\n    Level[\"error\"] = \"error\";\n    Level[\"fatal\"] = \"fatal\";\n})(Level = exports.Level || (exports.Level = {}));\n/**\n * log levels\n *\n * @export\n * @enum {number}\n */\nvar Levels;\n(function (Levels) {\n    Levels[Levels[\"trace\"] = 0] = \"trace\";\n    Levels[Levels[\"debug\"] = 1] = \"debug\";\n    Levels[Levels[\"info\"] = 2] = \"info\";\n    Levels[Levels[\"warn\"] = 3] = \"warn\";\n    Levels[Levels[\"error\"] = 4] = \"error\";\n    Levels[Levels[\"fatal\"] = 5] = \"fatal\";\n})(Levels = exports.Levels || (exports.Levels = {}));\n\n\n\n\n});\n\nunwrapExports(Level_1);\nvar Level_2 = Level_1.Level;\nvar Level_3 = Level_1.Levels;\n\nvar ILoggerManager = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n/**\n * LoggerManger interface token.\n * it is a token id, you can register yourself LoggerManger for this.\n */\nexports.LoggerManagerToken = new core_1.InjectToken('DI_ILoggerManager');\n\n\n\n\n});\n\nunwrapExports(ILoggerManager);\nvar ILoggerManager_1 = ILoggerManager.LoggerManagerToken;\n\nvar IConfigureLoggerManager = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n/**\n * IConfigureLoggerManager interface token.\n * it is a token id, you can register yourself IConfigureLoggerManager for this.\n */\nexports.ConfigureLoggerManagerToken = new core_1.InjectToken('DI_IConfigureLoggerManager');\n\n\n\n\n});\n\nunwrapExports(IConfigureLoggerManager);\nvar IConfigureLoggerManager_1 = IConfigureLoggerManager.ConfigureLoggerManagerToken;\n\nvar LogConfigure = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n/**\n * Log configure interface symbol.\n * it is a symbol id, you can register yourself LogConfigure for this.\n */\nexports.LogConfigureToken = new core_1.InjectToken('DI_LogConfigure');\n\n\n\n\n});\n\nunwrapExports(LogConfigure);\nvar LogConfigure_1 = LogConfigure.LogConfigureToken;\n\nvar ConfigureLoggerManger_1 = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n\n\n\n\n\n/**\n * Configure logger manger. use to get configed logger manger.\n *\n * @export\n * @class LoggerManger\n * @implements {IConfigureLoggerManager}\n */\nvar ConfigureLoggerManger = /** @class */ (function () {\n    function ConfigureLoggerManger(container, config) {\n        this.container = container;\n        this.setLogConfigure(config);\n    }\n    Object.defineProperty(ConfigureLoggerManger.prototype, \"config\", {\n        get: function () {\n            if (!this._config) {\n                if (this.container.has(LogConfigure.LogConfigureToken)) {\n                    this._config = this.container.resolve(LogConfigure.LogConfigureToken);\n                }\n                else {\n                    this._config = { adapter: 'console' };\n                }\n            }\n            return this._config;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    ConfigureLoggerManger.prototype.setLogConfigure = function (config) {\n        if (!config) {\n            return;\n        }\n        if (core_1.isClass(config)) {\n            if (!this.container.has(LogConfigure.LogConfigureToken)) {\n                this.container.register(LogConfigure.LogConfigureToken, config);\n                this._config = this.container.get(LogConfigure.LogConfigureToken);\n            }\n            else if (!this.container.has(config)) {\n                this.container.register(config);\n                this._config = this.container.get(config);\n            }\n        }\n        else {\n            this._config = config;\n        }\n        this._logManger = null;\n    };\n    Object.defineProperty(ConfigureLoggerManger.prototype, \"logManger\", {\n        get: function () {\n            if (!this._logManger) {\n                var cfg = this.config || {};\n                var adapter = cfg.adapter || 'console';\n                var token = void 0;\n                if (core_1.isString(adapter)) {\n                    token = new core_1.Registration(ILoggerManager.LoggerManagerToken, adapter);\n                }\n                else {\n                    token = adapter;\n                }\n                this._logManger = this.container.get(token);\n                if (cfg.config) {\n                    this._logManger.configure(cfg.config);\n                }\n            }\n            return this._logManger;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    ConfigureLoggerManger.prototype.configure = function (config) {\n        this.logManger.configure(config);\n    };\n    ConfigureLoggerManger.prototype.getLogger = function (name) {\n        return this.logManger.getLogger(name);\n    };\n    ConfigureLoggerManger.classAnnations = { \"name\": \"ConfigureLoggerManger\", \"params\": { \"constructor\": [\"container\", \"config\"], \"setLogConfigure\": [\"config\"], \"configure\": [\"config\"], \"getLogger\": [\"name\"] } };\n    ConfigureLoggerManger = tslib_1.__decorate([\n        aop_1.NonePointcut(),\n        core_1.Injectable(IConfigureLoggerManager.ConfigureLoggerManagerToken),\n        tslib_1.__param(0, core_1.Inject(core_1.ContainerToken)),\n        tslib_1.__metadata(\"design:paramtypes\", [Object, Object])\n    ], ConfigureLoggerManger);\n    return ConfigureLoggerManger;\n}());\nexports.ConfigureLoggerManger = ConfigureLoggerManger;\n\n\n\n\n});\n\nunwrapExports(ConfigureLoggerManger_1);\nvar ConfigureLoggerManger_2 = ConfigureLoggerManger_1.ConfigureLoggerManger;\n\nvar ConsoleLogManager_1 = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n\n\n\n\nvar ConsoleLogManager = /** @class */ (function () {\n    function ConsoleLogManager() {\n        this.logger = new ConsoleLog();\n    }\n    ConsoleLogManager.prototype.configure = function (config) {\n        if (config && config.level) {\n            this.logger.level = config.level;\n        }\n    };\n    ConsoleLogManager.prototype.getLogger = function (name) {\n        return this.logger;\n    };\n    ConsoleLogManager.classAnnations = { \"name\": \"ConsoleLogManager\", \"params\": { \"constructor\": [], \"configure\": [\"config\"], \"getLogger\": [\"name\"] } };\n    ConsoleLogManager = tslib_1.__decorate([\n        aop_1.NonePointcut(),\n        core_1.Singleton(),\n        core_1.Injectable(ILoggerManager.LoggerManagerToken, 'console'),\n        tslib_1.__metadata(\"design:paramtypes\", [])\n    ], ConsoleLogManager);\n    return ConsoleLogManager;\n}());\nexports.ConsoleLogManager = ConsoleLogManager;\nvar ConsoleLog = /** @class */ (function () {\n    function ConsoleLog() {\n    }\n    ConsoleLog.prototype.log = function (message) {\n        var args = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments[_i];\n        }\n        console.log.apply(console, [message].concat(args));\n    };\n    ConsoleLog.prototype.trace = function (message) {\n        var args = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments[_i];\n        }\n        if (!this.level || Level_1.Levels[this.level] === 0) {\n            console.debug.apply(console, [message].concat(args));\n        }\n    };\n    ConsoleLog.prototype.debug = function (message) {\n        var args = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments[_i];\n        }\n        // console.debug in nuix will not console.\n        if (!this.level || Level_1.Levels[this.level] <= 1) {\n            console.debug.apply(console, [message].concat(args));\n        }\n    };\n    ConsoleLog.prototype.info = function (message) {\n        var args = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments[_i];\n        }\n        if (!this.level || Level_1.Levels[this.level] <= 2) {\n            console.info.apply(console, [message].concat(args));\n        }\n    };\n    ConsoleLog.prototype.warn = function (message) {\n        var args = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments[_i];\n        }\n        if (!this.level || Level_1.Levels[this.level] <= 3) {\n            console.warn.apply(console, [message].concat(args));\n        }\n    };\n    ConsoleLog.prototype.error = function (message) {\n        var args = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments[_i];\n        }\n        if (!this.level || Level_1.Levels[this.level] <= 4) {\n            console.error.apply(console, [message].concat(args));\n        }\n    };\n    ConsoleLog.prototype.fatal = function (message) {\n        var args = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments[_i];\n        }\n        if (!this.level || Level_1.Levels[this.level] <= 5) {\n            console.error.apply(console, [message].concat(args));\n        }\n    };\n    ConsoleLog.classAnnations = { \"name\": \"ConsoleLog\", \"params\": { \"constructor\": [], \"log\": [\"message\", \"args\"], \"trace\": [\"message\", \"args\"], \"debug\": [\"message\", \"args\"], \"info\": [\"message\", \"args\"], \"warn\": [\"message\", \"args\"], \"error\": [\"message\", \"args\"], \"fatal\": [\"message\", \"args\"] } };\n    return ConsoleLog;\n}());\n\n\n\n\n});\n\nunwrapExports(ConsoleLogManager_1);\nvar ConsoleLogManager_2 = ConsoleLogManager_1.ConsoleLogManager;\n\nvar LogFormater_1 = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n\n\n/**\n * Log formater interface token.\n * it is a token id, you can register yourself formater for log.\n */\nexports.LogFormaterToken = new core_1.InjectToken('DI_LogFormater');\nvar LogFormater = /** @class */ (function () {\n    function LogFormater() {\n    }\n    LogFormater.prototype.format = function (joinPoint, message) {\n        var pointMsg;\n        switch (joinPoint.state) {\n            case aop_1.JoinpointState.Before:\n            case aop_1.JoinpointState.Pointcut:\n                pointMsg = joinPoint.state + \" invoke method \\\"\" + joinPoint.fullName + \"\\\" with args \" + this.stringifyArgs(joinPoint.params, joinPoint.args) + \".\";\n                break;\n            case aop_1.JoinpointState.After:\n                pointMsg = joinPoint.state + \"  invoke method \\\"\" + joinPoint.fullName + \"\\\".\";\n                break;\n            case aop_1.JoinpointState.AfterReturning:\n                pointMsg = \"Invoke method \\\"\" + joinPoint.fullName + \"\\\" returning value \" + this.stringify(joinPoint.returningValue) + \".\";\n                break;\n            case aop_1.JoinpointState.AfterThrowing:\n                pointMsg = \"Invoke method \\\"\" + joinPoint.fullName + \"\\\" throw error \" + this.stringify(joinPoint.throwing) + \".\";\n                break;\n            default:\n                pointMsg = '';\n                break;\n        }\n        return this.joinMessage([pointMsg, message]);\n    };\n    LogFormater.prototype.stringifyArgs = function (params, args) {\n        var _this = this;\n        var argsStr = params.map(function (p, idx) {\n            var arg = args.length >= idx ? args[idx] : null;\n            return \"<param name: \\\"\" + (p.name || '') + \"\\\", param type: \\\"\" + _this.stringify(p.type) + \"\\\"> \" + _this.stringify(arg);\n        }).join(', ');\n        if (argsStr) {\n            return this.joinMessage(['[', argsStr, ']'], ' ');\n        }\n        else {\n            return '[]';\n        }\n    };\n    LogFormater.prototype.joinMessage = function (messgs, separator) {\n        if (separator === void 0) { separator = '; '; }\n        return messgs.filter(function (a) { return a; }).map(function (a) { return core_1.isString(a) ? a : a.toString(); }).join(separator);\n    };\n    LogFormater.prototype.stringifyArray = function (args) {\n        var _this = this;\n        if (!args.length) {\n            return '[]';\n        }\n        return '[ ' + args.map(function (arg) { return _this.stringify(arg); }).join(', ') + ' ]';\n    };\n    LogFormater.prototype.stringify = function (target) {\n        if (core_1.isString(target)) {\n            return target;\n        }\n        else if (core_1.isArray(target)) {\n            return this.stringifyArray(target);\n        }\n        else if (core_1.isBaseType(target)) {\n            return target;\n        }\n        else if (core_1.isClass(target)) {\n            return \"[class \" + core_1.getClassName(target) + \"]\";\n        }\n        else if (core_1.isFunction(target) || core_1.isDate(target) || core_1.isSymbol(target)) {\n            return target.toString();\n        }\n        else if (core_1.isObject(target)) {\n            try {\n                return JSON.stringify(target);\n            }\n            catch (_a) {\n                if (core_1.isFunction(target.toString)) {\n                    return target.toString();\n                }\n            }\n        }\n        return '';\n    };\n    LogFormater.classAnnations = { \"name\": \"LogFormater\", \"params\": { \"constructor\": [], \"format\": [\"joinPoint\", \"message\"], \"stringifyArgs\": [\"params\", \"args\"], \"joinMessage\": [\"messgs\", \"separator\"], \"stringifyArray\": [\"args\"], \"stringify\": [\"target\"] } };\n    LogFormater = tslib_1.__decorate([\n        aop_1.NonePointcut(),\n        core_1.Singleton(exports.LogFormaterToken, 'default'),\n        tslib_1.__metadata(\"design:paramtypes\", [])\n    ], LogFormater);\n    return LogFormater;\n}());\nexports.LogFormater = LogFormater;\n\n\n\n\n});\n\nunwrapExports(LogFormater_1);\nvar LogFormater_2 = LogFormater_1.LogFormaterToken;\nvar LogFormater_3 = LogFormater_1.LogFormater;\n\nvar LoggerAspect_1 = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n\n\n\n\n/**\n * base looger aspect. for extends your logger aspect.\n *\n * @export\n * @class LoggerAspect\n */\nvar LoggerAspect = /** @class */ (function () {\n    function LoggerAspect(container, config) {\n        this.container = container;\n        this.config = config;\n    }\n    Object.defineProperty(LoggerAspect.prototype, \"logger\", {\n        get: function () {\n            if (!this._logger) {\n                this._logger = this.logManger.getLogger();\n            }\n            return this._logger;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(LoggerAspect.prototype, \"logManger\", {\n        get: function () {\n            if (!this._logManger) {\n                this._logManger = this.container.resolve(IConfigureLoggerManager.ConfigureLoggerManagerToken, { config: this.config });\n            }\n            return this._logManger;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    LoggerAspect.prototype.processLog = function (joinPoint, annotation, message, level) {\n        var _this = this;\n        if (annotation && annotation.length) {\n            annotation.forEach(function (logmeta) {\n                var canlog = false;\n                if (logmeta.express && logmeta.express(joinPoint)) {\n                    canlog = true;\n                }\n                else if (!logmeta.express) {\n                    canlog = true;\n                }\n                if (canlog) {\n                    _this.writeLog(logmeta.logname ? _this.logManger.getLogger(logmeta.logname) : _this.logger, joinPoint, _this.joinMessage(message, logmeta.message), logmeta.level || level);\n                }\n            });\n        }\n        else {\n            this.writeLog(this.logger, joinPoint, message, level);\n        }\n    };\n    LoggerAspect.prototype.formatMessage = function (joinPoint, message) {\n        var config = this.logManger.config;\n        if (core_1.isClass(config.format)) {\n            if (!this.container.has(config.format)) {\n                this.container.register(config.format);\n            }\n            return this.container.resolve(config.format).format(joinPoint, message);\n        }\n        else if (core_1.isFunction(config.format)) {\n            return config.format(joinPoint, message);\n        }\n        else if (core_1.isObject(config.format) && core_1.isFunction(config.format)) {\n            return config.format.format(joinPoint, message);\n        }\n        else {\n            var token = core_1.isString(config.format) ? config.format : '';\n            var foramter = this.container.resolve(new core_1.Registration(LogFormater_1.LogFormaterToken, token || 'default'));\n            if (foramter) {\n                return foramter.format(joinPoint, message);\n            }\n        }\n        return '';\n    };\n    LoggerAspect.prototype.joinMessage = function () {\n        var messgs = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            messgs[_i] = arguments[_i];\n        }\n        return messgs.filter(function (a) { return a; }).map(function (a) { return core_1.isString(a) ? a : a.toString(); }).join('; ');\n    };\n    LoggerAspect.prototype.writeLog = function (logger, joinPoint, message, level) {\n        var formatStr = this.formatMessage(joinPoint, message);\n        if (level) {\n            logger[level](formatStr);\n        }\n        else {\n            switch (joinPoint.state) {\n                case aop_1.JoinpointState.Before:\n                case aop_1.JoinpointState.After:\n                case aop_1.JoinpointState.AfterReturning:\n                    logger.debug(formatStr);\n                    break;\n                case aop_1.JoinpointState.Pointcut:\n                    logger.info(formatStr);\n                    break;\n                case aop_1.JoinpointState.AfterThrowing:\n                    logger.error(formatStr);\n                    break;\n            }\n        }\n    };\n    LoggerAspect.classAnnations = { \"name\": \"LoggerAspect\", \"params\": { \"constructor\": [\"container\", \"config\"], \"processLog\": [\"joinPoint\", \"annotation\", \"message\", \"level\"], \"formatMessage\": [\"joinPoint\", \"message\"], \"joinMessage\": [\"messgs\"], \"writeLog\": [\"logger\", \"joinPoint\", \"message\", \"level\"] } };\n    LoggerAspect = tslib_1.__decorate([\n        core_1.Abstract(),\n        tslib_1.__metadata(\"design:paramtypes\", [Object, Object])\n    ], LoggerAspect);\n    return LoggerAspect;\n}());\nexports.LoggerAspect = LoggerAspect;\n\n\n\n\n});\n\nunwrapExports(LoggerAspect_1);\nvar LoggerAspect_2 = LoggerAspect_1.LoggerAspect;\n\nvar AnnotationLogerAspect_1 = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n\n\n\n/**\n * Annotation logger aspect. log for class or method with @Logger decorator.\n *\n * @export\n * @class AnnotationLogerAspect\n * @extends {LoggerAspect}\n */\nvar AnnotationLogerAspect = /** @class */ (function (_super) {\n    tslib_1.__extends(AnnotationLogerAspect, _super);\n    function AnnotationLogerAspect(container) {\n        return _super.call(this, container) || this;\n    }\n    AnnotationLogerAspect.prototype.logging = function (joinPoint, annotation) {\n        this.processLog(joinPoint, annotation);\n    };\n    AnnotationLogerAspect.classAnnations = { \"name\": \"AnnotationLogerAspect\", \"params\": { \"constructor\": [\"container\"], \"logging\": [\"joinPoint\", \"annotation\"] } };\n    tslib_1.__decorate([\n        aop_1.Pointcut('@annotation(Logger)', 'annotation'),\n        tslib_1.__metadata(\"design:type\", Function),\n        tslib_1.__metadata(\"design:paramtypes\", [aop_1.Joinpoint, Array]),\n        tslib_1.__metadata(\"design:returntype\", void 0)\n    ], AnnotationLogerAspect.prototype, \"logging\", null);\n    AnnotationLogerAspect = tslib_1.__decorate([\n        core_1.Singleton(),\n        aop_1.Aspect(),\n        tslib_1.__param(0, core_1.Inject(core_1.ContainerToken)),\n        tslib_1.__metadata(\"design:paramtypes\", [Object])\n    ], AnnotationLogerAspect);\n    return AnnotationLogerAspect;\n}(LoggerAspect_1.LoggerAspect));\nexports.AnnotationLogerAspect = AnnotationLogerAspect;\n\n\n\n\n});\n\nunwrapExports(AnnotationLogerAspect_1);\nvar AnnotationLogerAspect_2 = AnnotationLogerAspect_1.AnnotationLogerAspect;\n\nvar Logger = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n\n/**\n * Logger decorator, for method or class.\n *\n * @Logger\n */\nexports.Logger = core_1.createClassMethodDecorator('Logger', function (adapter) {\n    adapter.next({\n        isMetadata: function (arg) { return core_1.isClassMetadata(arg, ['logname']); },\n        match: function (arg) { return core_1.isString(arg); },\n        setMetadata: function (metadata, arg) {\n            metadata.logname = arg;\n        }\n    });\n    adapter.next({\n        match: function (arg) { return core_1.isFunction(arg); },\n        setMetadata: function (metadata, arg) {\n            metadata.express = arg;\n        }\n    });\n    adapter.next({\n        match: function (arg) { return core_1.isString(arg); },\n        setMetadata: function (metadata, arg) {\n            metadata.message = arg;\n        }\n    });\n    adapter.next({\n        match: function (arg) { return core_1.isString(arg); },\n        setMetadata: function (metadata, arg) {\n            metadata.level = Level_1.Level[arg];\n        }\n    });\n});\n\n\n\n\n});\n\nunwrapExports(Logger);\nvar Logger_1 = Logger.Logger;\n\nvar LogModule_1 = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n\n\n\n\n\n\n\n/**\n * aop logs ext for Ioc. auto run setup after registered.\n * with @IocExt('setup') decorator.\n * @export\n * @class LogModule\n */\nvar LogModule = /** @class */ (function () {\n    function LogModule(container) {\n        this.container = container;\n    }\n    /**\n     * register aop for container.\n     *\n     * @memberof AopModule\n     */\n    LogModule.prototype.setup = function () {\n        var container = this.container;\n        if (!container.has(aop_1.AopModule)) {\n            container.register(aop_1.AopModule);\n        }\n        var lifeScope = container.get(core_1.LifeScopeToken);\n        lifeScope.registerDecorator(Logger.Logger, core_1.LifeState.onInit, core_1.CoreActions.bindParameterProviders);\n        container.register(ConfigureLoggerManger_1.ConfigureLoggerManger);\n        container.register(AnnotationLogerAspect_1.AnnotationLogerAspect);\n        container.register(LogFormater_1.LogFormater);\n        container.register(ConsoleLogManager_1.ConsoleLogManager);\n    };\n    LogModule.classAnnations = { \"name\": \"LogModule\", \"params\": { \"constructor\": [\"container\"], \"setup\": [] } };\n    LogModule = tslib_1.__decorate([\n        core_1.IocExt('setup'),\n        tslib_1.__param(0, core_1.Inject(core_1.ContainerToken)),\n        tslib_1.__metadata(\"design:paramtypes\", [Object])\n    ], LogModule);\n    return LogModule;\n}());\nexports.LogModule = LogModule;\n\n\n\n\n});\n\nunwrapExports(LogModule_1);\nvar LogModule_2 = LogModule_1.LogModule;\n\nvar D__workspace_github_tsioc_packages_logs_lib = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n// export * from './tokens';\ntslib_1.__exportStar(Level_1, exports);\ntslib_1.__exportStar(ILoggerManager, exports);\ntslib_1.__exportStar(IConfigureLoggerManager, exports);\ntslib_1.__exportStar(ConfigureLoggerManger_1, exports);\ntslib_1.__exportStar(ConsoleLogManager_1, exports);\ntslib_1.__exportStar(LogConfigure, exports);\ntslib_1.__exportStar(LogFormater_1, exports);\ntslib_1.__exportStar(LoggerAspect_1, exports);\ntslib_1.__exportStar(AnnotationLogerAspect_1, exports);\ntslib_1.__exportStar(Logger, exports);\ntslib_1.__exportStar(LogModule_1, exports);\n\n\n\n\n});\n\nvar index = unwrapExports(D__workspace_github_tsioc_packages_logs_lib);\n\nreturn index;\n\n})));\n\n//# sourceMappingURL=sourcemaps/logs.umd.js.map\n\n//# sourceMappingURL=sourcemaps/logs.umd.js.map\n"]}